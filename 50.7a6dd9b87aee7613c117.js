"use strict";(self.webpackChunkhacker_reader=self.webpackChunkhacker_reader||[]).push([[50],{9192:(Es,Cl,F)=>{var S=F(9759),ii=F(6034),t=F(4685),k=F(4762),U=F(300);Es=F.hmd(Es);var As="";function sn(a){As=a}var a,$r=function(){function a(s){this.domStorage_=s,this.prefix_="firebase:"}return a.prototype.set=function(s,l){null==l?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),(0,t.Pz)(l))},a.prototype.get=function(s){var l=this.domStorage_.getItem(this.prefixedName_(s));return null==l?null:(0,t.cI)(l)},a.prototype.remove=function(s){this.domStorage_.removeItem(this.prefixedName_(s))},a.prototype.prefixedName_=function(s){return this.prefix_+s},a.prototype.toString=function(){return this.domStorage_.toString()},a}(),xh=function(){function a(){this.cache_={},this.isInMemoryStorage=!0}return a.prototype.set=function(s,l){null==l?delete this.cache_[s]:this.cache_[s]=l},a.prototype.get=function(s){return(0,t.r3)(this.cache_,s)?this.cache_[s]:null},a.prototype.remove=function(s){delete this.cache_[s]},a}(),Ve=function(a){try{if("undefined"!=typeof window&&void 0!==window[a]){var s=window[a];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new $r(s)}}catch(l){}return new xh},ni=Ve("localStorage"),Xr=Ve("sessionStorage"),ki=new U.Yd("@firebase/database"),Ml=(a=1,function(){return a++}),wl=function(a){var s=(0,t.dS)(a),l=new t.gQ;l.update(s);var c=l.digest();return t.US.encodeByteArray(c)},Je=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];for(var l="",c=0;c<a.length;c++){var h=a[c];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?l+=Je.apply(null,h):l+="object"==typeof h?(0,t.Pz)(h):h,l+=" "}return l},Se=null,an=!0,ln=function(a,s){(0,t.hu)(!s||!0===a||!1===a,"Can't turn on custom loggers persistently."),!0===a?(ki.logLevel=U.in.VERBOSE,Se=ki.log.bind(ki),s&&Xr.set("logging_enabled",!0)):"function"==typeof a?Se=a:(Se=null,Xr.remove("logging_enabled"))},ve=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(!0===an&&(an=!1,null===Se&&!0===Xr.get("logging_enabled")&&ln(!0)),Se){var l=Je.apply(null,a);Se(l)}},Ot=function(a){return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];ve.apply(void 0,(0,k.ev)([a],(0,k.CR)(s)))}},bt=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l="FIREBASE INTERNAL ERROR: "+Je.apply(void 0,(0,k.ev)([],(0,k.CR)(a)));ki.error(l)},Me=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l="FIREBASE FATAL ERROR: "+Je.apply(void 0,(0,k.ev)([],(0,k.CR)(a)));throw ki.error(l),new Error(l)},pe=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l="FIREBASE WARNING: "+Je.apply(void 0,(0,k.ev)([],(0,k.CR)(a)));ki.warn(l)},Kr=function(a){return"number"==typeof a&&(a!=a||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)},Gt="[MIN_NAME]",yt="[MAX_NAME]",ri=function(a,s){if(a===s)return 0;if(a===Gt||s===yt)return-1;if(s===Gt||a===yt)return 1;var l=eo(a),c=eo(s);return null!==l?null!==c?l-c==0?a.length-s.length:l-c:-1:null!==c?1:a<s?-1:1},Eh=function(a,s){return a===s?0:a<s?-1:1},qn=function(a,s){if(s&&a in s)return s[a];throw new Error("Missing required key ("+a+") in object: "+(0,t.Pz)(s))},Rs=function(a){if("object"!=typeof a||null===a)return(0,t.Pz)(a);var s=[];for(var l in a)s.push(l);s.sort();for(var c="{",h=0;h<s.length;h++)0!==h&&(c+=","),c+=(0,t.Pz)(s[h]),c+=":",c+=Rs(a[s[h]]);return c+"}"},kl=function(a,s){var l=a.length;if(l<=s)return[a];for(var c=[],h=0;h<l;h+=s)c.push(a.substring(h,h+s>l?l:h+s));return c};function Te(a,s){for(var l in a)a.hasOwnProperty(l)&&s(l,a[l])}var Dl=function(a){(0,t.hu)(!Kr(a),"Invalid JSON number");var h,p,m,g,v,c=1023;0===a?(p=0,m=0,h=1/a==-1/0?1:0):(h=a<0,(a=Math.abs(a))>=Math.pow(2,1-c)?(p=(g=Math.min(Math.floor(Math.log(a)/Math.LN2),c))+c,m=Math.round(a*Math.pow(2,52-g)-Math.pow(2,52))):(p=0,m=Math.round(a/Math.pow(2,-1074))));var y=[];for(v=52;v;v-=1)y.push(m%2?1:0),m=Math.floor(m/2);for(v=11;v;v-=1)y.push(p%2?1:0),p=Math.floor(p/2);y.push(h?1:0),y.reverse();var C=y.join(""),D="";for(v=0;v<64;v+=8){var T=parseInt(C.substr(v,8),2).toString(16);1===T.length&&(T="0"+T),D+=T}return D.toLowerCase()},Ih=new RegExp("^-?(0*)\\d{1,10}$"),xl=-2147483648,Is=2147483647,eo=function(a){if(Ih.test(a)){var s=Number(a);if(s>=xl&&s<=Is)return s}return null},zt=function(a){try{a()}catch(s){setTimeout(function(){throw pe("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},jn=function(a,s){var l=setTimeout(a,s);return"object"==typeof l&&l.unref&&l.unref(),l},Fh=function(){function a(s,l){var c=this;this.appName_=s,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(function(h){return c.appCheck=h})}return a.prototype.getToken=function(s){var l=this;return this.appCheck?this.appCheck.getToken(s):new Promise(function(c,h){setTimeout(function(){l.appCheck?l.getToken(s).then(c,h):c(null)},0)})},a.prototype.addTokenChangeListener=function(s){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(function(c){return c.addTokenListener(s)})},a.prototype.notifyForInvalidToken=function(){pe('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},a}(),Ph=function(){function a(s,l,c){var h=this;this.appName_=s,this.firebaseOptions_=l,this.authProvider_=c,this.auth_=null,this.auth_=c.getImmediate({optional:!0}),this.auth_||c.onInit(function(p){return h.auth_=p})}return a.prototype.getToken=function(s){var l=this;return this.auth_?this.auth_.getToken(s).catch(function(c){return c&&"auth/token-not-initialized"===c.code?(ve("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)}):new Promise(function(c,h){setTimeout(function(){l.auth_?l.getToken(s).then(c,h):c(null)},0)})},a.prototype.addTokenChangeListener=function(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(function(l){return l.addAuthTokenListener(s)})},a.prototype.removeTokenChangeListener=function(s){this.authProvider_.get().then(function(l){return l.removeAuthTokenListener(s)})},a.prototype.notifyForInvalidToken=function(){var s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';pe(s+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},a}(),Zn=function(){function a(s){this.accessToken=s}return a.prototype.getToken=function(s){return Promise.resolve({accessToken:this.accessToken})},a.prototype.addTokenChangeListener=function(s){s(this.accessToken)},a.prototype.removeTokenChangeListener=function(s){},a.prototype.notifyForInvalidToken=function(){},a.OWNER="owner",a}(),Il=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fl="websocket",Pl="long_polling",Fs=function(){function a(s,l,c,h,p,m,g){void 0===p&&(p=!1),void 0===m&&(m=""),void 0===g&&(g=!1),this.secure=l,this.namespace=c,this.webSocketOnly=h,this.nodeAdmin=p,this.persistenceKey=m,this.includeNamespaceInQueryParams=g,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ni.get("host:"+s)||this._host}return a.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},a.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(a.prototype,"host",{get:function(){return this._host},set:function(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&ni.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),a.prototype.toString=function(){var s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s},a.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},a}();function Ll(a,s,l){var c;if((0,t.hu)("string"==typeof s,"typeof type must == string"),(0,t.hu)("object"==typeof l,"typeof params must == object"),s===Fl)c=(a.secure?"wss://":"ws://")+a.internalHost+"/.ws?";else{if(s!==Pl)throw new Error("Unknown connection type: "+s);c=(a.secure?"https://":"http://")+a.internalHost+"/.lp?"}(function(a){return a.host!==a.internalHost||a.isCustomHost()||a.includeNamespaceInQueryParams})(a)&&(l.ns=a.namespace);var h=[];return Te(l,function(p,m){h.push(p+"="+m)}),c+h.join("&")}var Nh=function(){function a(){this.counters_={}}return a.prototype.incrementCounter=function(s,l){void 0===l&&(l=1),(0,t.r3)(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=l},a.prototype.get=function(){return(0,t.p$)(this.counters_)},a}(),Ps={},Ls={};function Bs(a){var s=a.toString();return Ps[s]||(Ps[s]=new Nh),Ps[s]}var Bl=function(){function a(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return a.prototype.closeAfter=function(s,l){this.closeAfterResponse=s,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},a.prototype.handleResponse=function(s,l){var c=this;this.pendingResponses[s]=l;for(var h=function(){var g=p.pendingResponses[p.currentResponseNum];delete p.pendingResponses[p.currentResponseNum];for(var v=function(C){g[C]&&zt(function(){c.onMessage_(g[C])})},y=0;y<g.length;++y)v(y);if(p.currentResponseNum===p.closeAfterResponse)return p.onClose&&(p.onClose(),p.onClose=null),"break";p.currentResponseNum++},p=this;this.pendingResponses[this.currentResponseNum]&&"break"!==h(););},a}(),Vs=function(){function a(s,l,c,h,p,m,g){var v=this;this.connId=s,this.repoInfo=l,this.applicationId=c,this.appCheckToken=h,this.authToken=p,this.transportSessionId=m,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ot(s),this.stats_=Bs(l),this.urlFn=function(y){return v.appCheckToken&&(y.ac=v.appCheckToken),Ll(l,Pl,y)}}return a.prototype.open=function(s,l){var c=this;this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Bl(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){c.log_("Timed out trying to connect."),c.onClosed_(),c.connectTimeoutTimer_=null},Math.floor(3e4)),function(a){if((0,t.Yr)()||"complete"===document.readyState)a();else{var s=!1,l=function(){document.body?s||(s=!0,a()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(function(){if(!c.isClosed_){c.scriptTagHolder=new $h(function(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];var v=(0,k.CR)(m,5),y=v[0],C=v[1],D=v[2];if(c.incrementIncomingBytes_(m),c.scriptTagHolder)if(c.connectTimeoutTimer_&&(clearTimeout(c.connectTimeoutTimer_),c.connectTimeoutTimer_=null),c.everConnected_=!0,"start"===y)c.id=C,c.password=D;else{if("close"!==y)throw new Error("Unrecognized command received: "+y);C?(c.scriptTagHolder.sendNewPolls=!1,c.myPacketOrderer.closeAfter(C,function(){c.onClosed_()})):c.onClosed_()}},function(){for(var m=[],g=0;g<arguments.length;g++)m[g]=arguments[g];var v=(0,k.CR)(m,2),y=v[0],C=v[1];c.incrementIncomingBytes_(m),c.myPacketOrderer.handleResponse(y,C)},function(){c.onClosed_()},c.urlFn);var h={start:"t"};h.ser=Math.floor(1e8*Math.random()),c.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=c.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",c.transportSessionId&&(h.s=c.transportSessionId),c.lastSessionId&&(h.ls=c.lastSessionId),c.applicationId&&(h.p=c.applicationId),c.appCheckToken&&(h.ac=c.appCheckToken),"undefined"!=typeof location&&location.hostname&&Il.test(location.hostname)&&(h.r="f");var p=c.urlFn(h);c.log_("Connecting via long-poll to "+p),c.scriptTagHolder.addTag(p,function(){})}})},a.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},a.forceAllow=function(){a.forceAllow_=!0},a.forceDisallow=function(){a.forceDisallow_=!0},a.isAvailable=function(){return!((0,t.Yr)()||!a.forceAllow_&&(a.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},a.prototype.markConnectionHealthy=function(){},a.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},a.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},a.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},a.prototype.send=function(s){var l=(0,t.Pz)(s);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);for(var c=(0,t.h$)(l),h=kl(c,1840),p=0;p<h.length;p++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,h.length,h[p]),this.curSegmentNum++},a.prototype.addDisconnectPingFrame=function(s,l){if(!(0,t.Yr)()){this.myDisconnFrame=document.createElement("iframe");var c={dframe:"t"};c.id=s,c.pw=l,this.myDisconnFrame.src=this.urlFn(c),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},a.prototype.incrementIncomingBytes_=function(s){var l=(0,t.Pz)(s).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)},a}(),$h=function(){function a(s,l,c,h){if(this.onDisconnect=c,this.urlFn=h,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,t.Yr)())this.commandCB=s,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Ml(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=a.createIFrame_();var p="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(p='<script>document.domain="'+document.domain+'";<\/script>');var g="<html><body>"+p+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(g),this.myIFrame.doc.close()}catch(v){ve("frame writing exception"),v.stack&&ve(v.stack),ve(v)}}}return a.createIFrame_=function(){var s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||ve("No IE domain setting required")}catch(h){var c=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+c+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s},a.prototype.close=function(){var s=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==s.myIFrame&&(document.body.removeChild(s.myIFrame),s.myIFrame=null)},Math.floor(0)));var l=this.onDisconnect;l&&(this.onDisconnect=null,l())},a.prototype.startLongPoll=function(s,l){for(this.myID=s,this.myPW=l,this.alive=!0;this.newRequest_(););},a.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;for(var l=this.urlFn(s),c="",h=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+c.length<=1870;){var m=this.pendingSegs.shift();c=c+"&seg"+h+"="+m.seg+"&ts"+h+"="+m.ts+"&d"+h+"="+m.d,h++}return this.addLongPollTag_(l+=c,this.currentSerial),!0}return!1},a.prototype.enqueueSegment=function(s,l,c){this.pendingSegs.push({seg:s,ts:l,d:c}),this.alive&&this.newRequest_()},a.prototype.addLongPollTag_=function(s,l){var c=this;this.outstandingRequests.add(l);var h=function(){c.outstandingRequests.delete(l),c.newRequest_()},p=setTimeout(h,Math.floor(25e3));this.addTag(s,function(){clearTimeout(p),h()})},a.prototype.addTag=function(s,l){var c=this;(0,t.Yr)()?this.doNodeLongPoll(s,l):setTimeout(function(){try{if(!c.sendNewPolls)return;var h=c.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=s,h.onload=h.onreadystatechange=function(){var p=h.readyState;(!p||"loaded"===p||"complete"===p)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),l())},h.onerror=function(){ve("Long-poll script failed to load: "+s),c.sendNewPolls=!1,c.close()},c.myIFrame.doc.body.appendChild(h)}catch(p){}},Math.floor(1))},a}(),Wn=null;"undefined"!=typeof MozWebSocket?Wn=MozWebSocket:"undefined"!=typeof WebSocket&&(Wn=WebSocket);var Di=function(){function a(s,l,c,h,p,m,g){this.connId=s,this.applicationId=c,this.appCheckToken=h,this.authToken=p,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ot(this.connId),this.stats_=Bs(l),this.connURL=a.connectionURL_(l,m,g,h),this.nodeAdmin=l.nodeAdmin}return a.connectionURL_=function(s,l,c,h){var p={v:"5"};return!(0,t.Yr)()&&"undefined"!=typeof location&&location.hostname&&Il.test(location.hostname)&&(p.r="f"),l&&(p.s=l),c&&(p.ls=c),h&&(p.ac=h),Ll(s,Fl,p)},a.prototype.open=function(s,l){var c=this;this.onDisconnect=l,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ni.set("previous_websocket_failure",!0);try{if((0,t.Yr)()){var p={headers:{"User-Agent":"Firebase/5/"+As+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(p.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(p.headers["X-Firebase-AppCheck"]=this.appCheckToken);var m=process.env,g=0===this.connURL.indexOf("wss://")?m.HTTPS_PROXY||m.https_proxy:m.HTTP_PROXY||m.http_proxy;g&&(p.proxy={origin:g}),this.mySock=new Wn(this.connURL,[],p)}else this.mySock=new Wn(this.connURL,[],p={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(y){this.log_("Error instantiating WebSocket.");var v=y.message||y.data;return v&&this.log_(v),void this.onClosed_()}this.mySock.onopen=function(){c.log_("Websocket connected."),c.everConnected_=!0},this.mySock.onclose=function(){c.log_("Websocket connection was disconnected."),c.mySock=null,c.onClosed_()},this.mySock.onmessage=function(y){c.handleIncomingFrame(y)},this.mySock.onerror=function(y){c.log_("WebSocket error.  Closing connection.");var C=y.message||y.data;C&&c.log_(C),c.onClosed_()}},a.prototype.start=function(){},a.forceDisallow=function(){a.forceDisallow_=!0},a.isAvailable=function(){var s=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var c=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);c&&c.length>1&&parseFloat(c[1])<4.4&&(s=!0)}return!s&&null!==Wn&&!a.forceDisallow_},a.previouslyFailed=function(){return ni.isInMemoryStorage||!0===ni.get("previous_websocket_failure")},a.prototype.markConnectionHealthy=function(){ni.remove("previous_websocket_failure")},a.prototype.appendFrame_=function(s){if(this.frames.push(s),this.frames.length===this.totalFrames){var l=this.frames.join("");this.frames=null;var c=(0,t.cI)(l);this.onMessage(c)}},a.prototype.handleNewFrameCount_=function(s){this.totalFrames=s,this.frames=[]},a.prototype.extractFrameCount_=function(s){if((0,t.hu)(null===this.frames,"We already have a frame buffer"),s.length<=6){var l=Number(s);if(!isNaN(l))return this.handleNewFrameCount_(l),null}return this.handleNewFrameCount_(1),s},a.prototype.handleIncomingFrame=function(s){if(null!==this.mySock){var l=s.data;if(this.bytesReceived+=l.length,this.stats_.incrementCounter("bytes_received",l.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(l);else{var c=this.extractFrameCount_(l);null!==c&&this.appendFrame_(c)}}},a.prototype.send=function(s){this.resetKeepAlive();var l=(0,t.Pz)(s);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);var c=kl(l,16384);c.length>1&&this.sendString_(String(c.length));for(var h=0;h<c.length;h++)this.sendString_(c[h])},a.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},a.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},a.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},a.prototype.resetKeepAlive=function(){var s=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){s.mySock&&s.sendString_("0"),s.resetKeepAlive()},Math.floor(45e3))},a.prototype.sendString_=function(s){try{this.mySock.send(s)}catch(l){this.log_("Exception thrown from WebSocket.send():",l.message||l.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},a.responsesRequiredToBeHealthy=2,a.healthyTimeout=3e4,a}(),eu=function(){function a(s){this.initTransports_(s)}return Object.defineProperty(a,"ALL_TRANSPORTS",{get:function(){return[Vs,Di]},enumerable:!1,configurable:!0}),a.prototype.initTransports_=function(s){var l,c,h=Di&&Di.isAvailable(),p=h&&!Di.previouslyFailed();if(s.webSocketOnly&&(h||pe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[Di];else{var m=this.transports_=[];try{for(var g=(0,k.XA)(a.ALL_TRANSPORTS),v=g.next();!v.done;v=g.next()){var y=v.value;y&&y.isAvailable()&&m.push(y)}}catch(C){l={error:C}}finally{try{v&&!v.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}}},a.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},a.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},a}(),Jl=function(){function a(s,l,c,h,p,m,g,v,y,C){this.id=s,this.repoInfo_=l,this.applicationId_=c,this.appCheckToken_=h,this.authToken_=p,this.onMessage_=m,this.onReady_=g,this.onDisconnect_=v,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ot("c:"+this.id+":"),this.transportManager_=new eu(l),this.log_("Connection created"),this.start_()}return a.prototype.start_=function(){var s=this,l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;var c=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){s.conn_&&s.conn_.open(c,h)},Math.floor(0));var p=l.healthyTimeout||0;p>0&&(this.healthyTimeout_=jn(function(){s.healthyTimeout_=null,s.isHealthy_||(s.conn_&&s.conn_.bytesReceived>102400?(s.log_("Connection exceeded healthy timeout but has received "+s.conn_.bytesReceived+" bytes.  Marking connection healthy."),s.isHealthy_=!0,s.conn_.markConnectionHealthy()):s.conn_&&s.conn_.bytesSent>10240?s.log_("Connection exceeded healthy timeout but has sent "+s.conn_.bytesSent+" bytes.  Leaving connection alive."):(s.log_("Closing unhealthy connection after timeout."),s.close()))},Math.floor(p)))},a.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},a.prototype.disconnReceiver_=function(s){var l=this;return function(c){s===l.conn_?l.onConnectionLost_(c):s===l.secondaryConn_?(l.log_("Secondary connection lost."),l.onSecondaryConnectionLost_()):l.log_("closing an old connection")}},a.prototype.connReceiver_=function(s){var l=this;return function(c){2!==l.state_&&(s===l.rx_?l.onPrimaryMessageReceived_(c):s===l.secondaryConn_?l.onSecondaryMessageReceived_(c):l.log_("message on old connection"))}},a.prototype.sendRequest=function(s){this.sendData_({t:"d",d:s})},a.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},a.prototype.onSecondaryControl_=function(s){if("t"in s){var l=s.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},a.prototype.onSecondaryMessageReceived_=function(s){var l=qn("t",s),c=qn("d",s);if("c"===l)this.onSecondaryControl_(c);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(c)}},a.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},a.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},a.prototype.onPrimaryMessageReceived_=function(s){var l=qn("t",s),c=qn("d",s);"c"===l?this.onControl_(c):"d"===l&&this.onDataMessage_(c)},a.prototype.onDataMessage_=function(s){this.onPrimaryResponse_(),this.onMessage_(s)},a.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},a.prototype.onControl_=function(s){var l=qn("t",s);if("d"in s){var c=s.d;if("h"===l)this.onHandshake_(c);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var h=0;h<this.pendingDataMessages.length;++h)this.onDataMessage_(this.pendingDataMessages[h]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(c):"r"===l?this.onReset_(c):"e"===l?bt("Server Error: "+c):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bt("Unknown control packet command: "+l)}},a.prototype.onHandshake_=function(s){var l=s.ts,c=s.v,h=s.h;this.sessionId=s.s,this.repoInfo_.host=h,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==c&&pe("Protocol version mismatch detected"),this.tryStartUpgrade_())},a.prototype.tryStartUpgrade_=function(){var s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)},a.prototype.startUpgrade_=function(s){var l=this;this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;var c=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,h),jn(function(){l.secondaryConn_&&(l.log_("Timed out trying to upgrade."),l.secondaryConn_.close())},Math.floor(6e4))},a.prototype.onReset_=function(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,1===this.state_?this.close():(this.closeConnections_(),this.start_())},a.prototype.onConnectionEstablished_=function(s,l){var c=this;this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jn(function(){c.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},a.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},a.prototype.onSecondaryConnectionLost_=function(){var s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()},a.prototype.onConnectionLost_=function(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ni.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},a.prototype.onConnectionShutdown_=function(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()},a.prototype.sendData_=function(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)},a.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},a.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},a}(),Ql=function(){function a(){}return a.prototype.put=function(s,l,c,h){},a.prototype.merge=function(s,l,c,h){},a.prototype.refreshAuthToken=function(s){},a.prototype.refreshAppCheckToken=function(s){},a.prototype.onDisconnectPut=function(s,l,c){},a.prototype.onDisconnectMerge=function(s,l,c){},a.prototype.onDisconnectCancel=function(s,l){},a.prototype.reportStats=function(s){},a}(),$l=function(){function a(s){this.allowedEvents_=s,this.listeners_={},(0,t.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}return a.prototype.trigger=function(s){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];if(Array.isArray(this.listeners_[s]))for(var h=(0,k.ev)([],(0,k.CR)(this.listeners_[s])),p=0;p<h.length;p++)h[p].callback.apply(h[p].context,l)},a.prototype.on=function(s,l,c){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:l,context:c});var h=this.getInitialEvent(s);h&&l.apply(c,h)},a.prototype.off=function(s,l,c){this.validateEventType_(s);for(var h=this.listeners_[s]||[],p=0;p<h.length;p++)if(h[p].callback===l&&(!c||c===h[p].context))return void h.splice(p,1)},a.prototype.validateEventType_=function(s){(0,t.hu)(this.allowedEvents_.find(function(l){return l===s}),"Unknown event: "+s)},a}(),Xl=function(a){function s(){var l=a.call(this,["online"])||this;return l.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,t.uI)()&&(window.addEventListener("online",function(){l.online_||(l.online_=!0,l.trigger("online",!0))},!1),window.addEventListener("offline",function(){l.online_&&(l.online_=!1,l.trigger("online",!1))},!1)),l}return(0,k.ZT)(s,a),s.getInstance=function(){return new s},s.prototype.getInitialEvent=function(l){return(0,t.hu)("online"===l,"Unknown event type: "+l),[this.online_]},s.prototype.currentlyOnline=function(){return this.online_},s}($l),ae=function(){function a(s,l){if(void 0===l){this.pieces_=s.split("/");for(var c=0,h=0;h<this.pieces_.length;h++)this.pieces_[h].length>0&&(this.pieces_[c]=this.pieces_[h],c++);this.pieces_.length=c,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=l}return a.prototype.toString=function(){for(var s="",l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(s+="/"+this.pieces_[l]);return s||"/"},a}();function ne(){return new ae("")}function W(a){return a.pieceNum_>=a.pieces_.length?null:a.pieces_[a.pieceNum_]}function oi(a){return a.pieces_.length-a.pieceNum_}function de(a){var s=a.pieceNum_;return s<a.pieces_.length&&s++,new ae(a.pieces_,s)}function Ys(a){return a.pieceNum_<a.pieces_.length?a.pieces_[a.pieces_.length-1]:null}function Jn(a,s){return void 0===s&&(s=0),a.pieces_.slice(a.pieceNum_+s)}function td(a){if(a.pieceNum_>=a.pieces_.length)return null;for(var s=[],l=a.pieceNum_;l<a.pieces_.length-1;l++)s.push(a.pieces_[l]);return new ae(s,0)}function me(a,s){for(var l=[],c=a.pieceNum_;c<a.pieces_.length;c++)l.push(a.pieces_[c]);if(s instanceof ae)for(c=s.pieceNum_;c<s.pieces_.length;c++)l.push(s.pieces_[c]);else{var h=s.split("/");for(c=0;c<h.length;c++)h[c].length>0&&l.push(h[c])}return new ae(l,0)}function Z(a){return a.pieceNum_>=a.pieces_.length}function $(a,s){var l=W(a),c=W(s);if(null===l)return s;if(l===c)return $(de(a),de(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+a+")")}function Ut(a,s){for(var l=Jn(a,0),c=Jn(s,0),h=0;h<l.length&&h<c.length;h++){var p=ri(l[h],c[h]);if(0!==p)return p}return l.length===c.length?0:l.length<c.length?-1:1}function Si(a,s){if(oi(a)!==oi(s))return!1;for(var l=a.pieceNum_,c=s.pieceNum_;l<=a.pieces_.length;l++,c++)if(a.pieces_[l]!==s.pieces_[c])return!1;return!0}function be(a,s){var l=a.pieceNum_,c=s.pieceNum_;if(oi(a)>oi(s))return!1;for(;l<a.pieces_.length;){if(a.pieces_[l]!==s.pieces_[c])return!1;++l,++c}return!0}var Qe=function(s,l){this.errorPrefix_=l,this.parts_=Jn(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(var c=0;c<this.parts_.length;c++)this.byteLength_+=(0,t.ug)(this.parts_[c]);X(this)};function X(a){if(a.byteLength_>768)throw new Error(a.errorPrefix_+"has a key path longer than 768 bytes ("+a.byteLength_+").");if(a.parts_.length>32)throw new Error(a.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ee(a))}function ee(a){return 0===a.parts_.length?"":"in property '"+a.parts_.join(".")+"'"}var ue,ro,Gs=function(a){function s(){var c,h,l=a.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(h="visibilitychange",c="hidden"):void 0!==document.mozHidden?(h="mozvisibilitychange",c="mozHidden"):void 0!==document.msHidden?(h="msvisibilitychange",c="msHidden"):void 0!==document.webkitHidden&&(h="webkitvisibilitychange",c="webkitHidden")),l.visible_=!0,h&&document.addEventListener(h,function(){var p=!document[c];p!==l.visible_&&(l.visible_=p,l.trigger("visible",p))},!1),l}return(0,k.ZT)(s,a),s.getInstance=function(){return new s},s.prototype.getInitialEvent=function(l){return(0,t.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]},s}($l),xi=1e3,si=function(a){function s(l,c,h,p,m,g,v,y){var C=a.call(this)||this;if(C.repoInfo_=l,C.applicationId_=c,C.onDataUpdate_=h,C.onConnectStatus_=p,C.onServerInfoUpdate_=m,C.authTokenProvider_=g,C.appCheckTokenProvider_=v,C.authOverride_=y,C.id=s.nextPersistentConnectionId_++,C.log_=Ot("p:"+C.id+":"),C.interruptReasons_={},C.listens=new Map,C.outstandingPuts_=[],C.outstandingGets_=[],C.outstandingPutCount_=0,C.outstandingGetCount_=0,C.onDisconnectRequestQueue_=[],C.connected_=!1,C.reconnectDelay_=xi,C.maxReconnectDelay_=3e5,C.securityDebugCallback_=null,C.lastSessionId=null,C.establishConnectionTimer_=null,C.visible_=!1,C.requestCBHash_={},C.requestNumber_=0,C.realtime_=null,C.authToken_=null,C.appCheckToken_=null,C.forceTokenRefresh_=!1,C.invalidAuthTokenCount_=0,C.invalidAppCheckTokenCount_=0,C.firstConnection_=!0,C.lastConnectionAttemptTime_=null,C.lastConnectionEstablishedTime_=null,y&&!(0,t.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Gs.getInstance().on("visible",C.onVisible_,C),-1===l.host.indexOf("fblocal")&&Xl.getInstance().on("online",C.onOnline_,C),C}return(0,k.ZT)(s,a),s.prototype.sendRequest=function(l,c,h){var p=++this.requestNumber_,m={r:p,a:l,b:c};this.log_((0,t.Pz)(m)),(0,t.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(m),h&&(this.requestCBHash_[p]=h)},s.prototype.get=function(l){var c=this;this.initConnection_();var h=new t.BH,p={p:l._path.toString(),q:l._queryObject},m={action:"g",request:p,onComplete:function(v){var y=v.d;"ok"===v.s?(c.onDataUpdate_(p.p,y,!1,null),h.resolve(y)):h.reject(y)}};this.outstandingGets_.push(m),this.outstandingGetCount_++;var g=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var v=c.outstandingGets_[g];void 0===v||m!==v||(delete c.outstandingGets_[g],c.outstandingGetCount_--,0===c.outstandingGetCount_&&(c.outstandingGets_=[]),c.log_("get "+g+" timed out on connection"),h.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(g),h.promise},s.prototype.listen=function(l,c,h,p){this.initConnection_();var m=l._queryIdentifier,g=l._path.toString();this.log_("Listen called for "+g+" "+m),this.listens.has(g)||this.listens.set(g,new Map),(0,t.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,t.hu)(!this.listens.get(g).has(m),"listen() called twice for same path/queryId.");var v={onComplete:p,hashFn:c,query:l,tag:h};this.listens.get(g).set(m,v),this.connected_&&this.sendListen_(v)},s.prototype.sendGet_=function(l){var c=this,h=this.outstandingGets_[l];this.sendRequest("g",h.request,function(p){delete c.outstandingGets_[l],c.outstandingGetCount_--,0===c.outstandingGetCount_&&(c.outstandingGets_=[]),h.onComplete&&h.onComplete(p)})},s.prototype.sendListen_=function(l){var c=this,h=l.query,p=h._path.toString(),m=h._queryIdentifier;this.log_("Listen on "+p+" for "+m);var g={p};l.tag&&(g.q=h._queryObject,g.t=l.tag),g.h=l.hashFn(),this.sendRequest("q",g,function(y){var C=y.d,D=y.s;s.warnOnListenWarnings_(C,h),(c.listens.get(p)&&c.listens.get(p).get(m))===l&&(c.log_("listen response",y),"ok"!==D&&c.removeListen_(p,m),l.onComplete&&l.onComplete(D,C))})},s.warnOnListenWarnings_=function(l,c){if(l&&"object"==typeof l&&(0,t.r3)(l,"w")){var h=(0,t.DV)(l,"w");if(Array.isArray(h)&&~h.indexOf("no_index")){var p='".indexOn": "'+c._queryParams.getIndex().toString()+'"',m=c._path.toString();pe("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+p+" at "+m+" to your security rules for better performance.")}}},s.prototype.refreshAuthToken=function(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(l)},s.prototype.reduceReconnectDelayIfAdminCredential_=function(l){(l&&40===l.length||(0,t.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},s.prototype.refreshAppCheckToken=function(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},s.prototype.tryAuth=function(){var l=this;if(this.connected_&&this.authToken_){var c=this.authToken_,h=(0,t.w9)(c)?"auth":"gauth",p={cred:c};null===this.authOverride_?p.noauth=!0:"object"==typeof this.authOverride_&&(p.authvar=this.authOverride_),this.sendRequest(h,p,function(m){var g=m.s,v=m.d||"error";l.authToken_===c&&("ok"===g?l.invalidAuthTokenCount_=0:l.onAuthRevoked_(g,v))})}},s.prototype.tryAppCheck=function(){var l=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(c){var h=c.s,p=c.d||"error";"ok"===h?l.invalidAppCheckTokenCount_=0:l.onAppCheckRevoked_(h,p)})},s.prototype.unlisten=function(l,c){var h=l._path.toString(),p=l._queryIdentifier;this.log_("Unlisten called for "+h+" "+p),(0,t.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(h,p)&&this.connected_&&this.sendUnlisten_(h,p,l._queryObject,c)},s.prototype.sendUnlisten_=function(l,c,h,p){this.log_("Unlisten on "+l+" for "+c);var m={p:l};p&&(m.q=h,m.t=p),this.sendRequest("n",m)},s.prototype.onDisconnectPut=function(l,c,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,c,h):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:c,onComplete:h})},s.prototype.onDisconnectMerge=function(l,c,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,c,h):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:c,onComplete:h})},s.prototype.onDisconnectCancel=function(l,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,c):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:c})},s.prototype.sendOnDisconnect_=function(l,c,h,p){var m={p:c,d:h};this.log_("onDisconnect "+l,m),this.sendRequest(l,m,function(g){p&&setTimeout(function(){p(g.s,g.d)},Math.floor(0))})},s.prototype.put=function(l,c,h,p){this.putInternal("p",l,c,h,p)},s.prototype.merge=function(l,c,h,p){this.putInternal("m",l,c,h,p)},s.prototype.putInternal=function(l,c,h,p,m){this.initConnection_();var g={p:c,d:h};void 0!==m&&(g.h=m),this.outstandingPuts_.push({action:l,request:g,onComplete:p}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+c)},s.prototype.sendPut_=function(l){var c=this,h=this.outstandingPuts_[l].action,p=this.outstandingPuts_[l].request,m=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(h,p,function(g){c.log_(h+" response",g),delete c.outstandingPuts_[l],c.outstandingPutCount_--,0===c.outstandingPutCount_&&(c.outstandingPuts_=[]),m&&m(g.s,g.d)})},s.prototype.reportStats=function(l){var c=this;if(this.connected_){var h={c:l};this.log_("reportStats",h),this.sendRequest("s",h,function(p){"ok"!==p.s&&c.log_("reportStats","Error sending stats: "+p.d)})}},s.prototype.onDataMessage_=function(l){if("r"in l){this.log_("from server: "+(0,t.Pz)(l));var c=l.r,h=this.requestCBHash_[c];h&&(delete this.requestCBHash_[c],h(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}},s.prototype.onDataPush_=function(l,c){this.log_("handleServerMessage",l,c),"d"===l?this.onDataUpdate_(c.p,c.d,!1,c.t):"m"===l?this.onDataUpdate_(c.p,c.d,!0,c.t):"c"===l?this.onListenRevoked_(c.p,c.q):"ac"===l?this.onAuthRevoked_(c.s,c.d):"apc"===l?this.onAppCheckRevoked_(c.s,c.d):"sd"===l?this.onSecurityDebugPacket_(c):bt("Unrecognized action received from server: "+(0,t.Pz)(l)+"\nAre you using the latest client?")},s.prototype.onReady_=function(l,c){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=c,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},s.prototype.scheduleConnect_=function(l){var c=this;(0,t.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){c.establishConnectionTimer_=null,c.establishConnection_()},Math.floor(l))},s.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},s.prototype.onVisible_=function(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0)),this.visible_=l},s.prototype.onOnline_=function(l){l?(this.log_("Browser went online."),this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},s.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=xi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var c=(new Date).getTime()-this.lastConnectionAttemptTime_,h=Math.max(0,this.reconnectDelay_-c);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},s.prototype.establishConnection_=function(){return(0,k.mG)(this,void 0,void 0,function(){var l,c,h,p,m,g,v,y,D,T,R,I,V,N=this;return(0,k.Jh)(this,function(q){switch(q.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,l=this.onDataMessage_.bind(this),c=this.onReady_.bind(this),h=this.onRealtimeDisconnect_.bind(this),p=this.id+":"+s.nextConnectionId_++,m=this.lastSessionId,g=!1,v=null,this.realtime_={close:y=function(){v?v.close():(g=!0,h())},sendRequest:function(De){(0,t.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(De)}},D=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,q.label=1;case 1:return q.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(D),this.appCheckTokenProvider_.getToken(D)])];case 2:return T=k.CR.apply(void 0,[q.sent(),2]),R=T[0],I=T[1],g?ve("getToken() completed but was canceled"):(ve("getToken() completed. Creating connection."),this.authToken_=R&&R.accessToken,this.appCheckToken_=I&&I.token,v=new Jl(p,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,l,c,h,function(De){pe(De+" ("+N.repoInfo_.toString()+")"),N.interrupt("server_kill")},m)),[3,4];case 3:return V=q.sent(),this.log_("Failed to get token: "+V),g||(this.repoInfo_.nodeAdmin&&pe(V),y()),[3,4];case 4:return[2]}})})},s.prototype.interrupt=function(l){ve("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},s.prototype.resume=function(l){ve("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,t.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0))},s.prototype.handleTimestamp_=function(l){var c=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:c})},s.prototype.cancelSentTransactions_=function(){for(var l=0;l<this.outstandingPuts_.length;l++){var c=this.outstandingPuts_[l];c&&"h"in c.request&&c.queued&&(c.onComplete&&c.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},s.prototype.onListenRevoked_=function(l,c){var h;h=c?c.map(function(m){return Rs(m)}).join("$"):"default";var p=this.removeListen_(l,h);p&&p.onComplete&&p.onComplete("permission_denied")},s.prototype.removeListen_=function(l,c){var p,h=new ae(l).toString();if(this.listens.has(h)){var m=this.listens.get(h);p=m.get(c),m.delete(c),0===m.size&&this.listens.delete(h)}else p=void 0;return p},s.prototype.onAuthRevoked_=function(l,c){ve("Auth token revoked: "+l+"/"+c),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},s.prototype.onAppCheckRevoked_=function(l,c){ve("App check token revoked: "+l+"/"+c),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},s.prototype.onSecurityDebugPacket_=function(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))},s.prototype.restoreState_=function(){var l,c,h,p;this.tryAuth(),this.tryAppCheck();try{for(var m=(0,k.XA)(this.listens.values()),g=m.next();!g.done;g=m.next()){var v=g.value;try{for(var y=(h=void 0,(0,k.XA)(v.values())),C=y.next();!C.done;C=y.next())this.sendListen_(C.value)}catch(I){h={error:I}}finally{try{C&&!C.done&&(p=y.return)&&p.call(y)}finally{if(h)throw h.error}}}}catch(I){l={error:I}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}for(var T=0;T<this.outstandingPuts_.length;T++)this.outstandingPuts_[T]&&this.sendPut_(T);for(;this.onDisconnectRequestQueue_.length;){var R=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(R.action,R.pathString,R.data,R.onComplete)}for(T=0;T<this.outstandingGets_.length;T++)this.outstandingGets_[T]&&this.sendGet_(T)},s.prototype.sendConnectStats_=function(){var l={},c="js";(0,t.Yr)()&&(c=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+c+"."+As.replace(/\./g,"-")]=1,(0,t.uI)()?l["framework.cordova"]=1:(0,t.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)},s.prototype.shouldReconnect_=function(){var l=Xl.getInstance().currentlyOnline();return(0,t.xb)(this.interruptReasons_)&&l},s.nextPersistentConnectionId_=0,s.nextConnectionId_=0,s}(Ql),j=function(){function a(s,l){this.name=s,this.node=l}return a.Wrap=function(s,l){return new a(s,l)},a}(),_e=function(){function a(){}return a.prototype.getCompare=function(){return this.compare.bind(this)},a.prototype.indexedValueChanged=function(s,l){var c=new j(Gt,s),h=new j(Gt,l);return 0!==this.compare(c,h)},a.prototype.minPost=function(){return j.MIN},a}(),no=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,k.ZT)(s,a),Object.defineProperty(s,"__EMPTY_NODE",{get:function(){return ue},set:function(l){ue=l},enumerable:!1,configurable:!0}),s.prototype.compare=function(l,c){return ri(l.name,c.name)},s.prototype.isDefinedOn=function(l){throw(0,t.g5)("KeyIndex.isDefinedOn not expected to be called.")},s.prototype.indexedValueChanged=function(l,c){return!1},s.prototype.minPost=function(){return j.MIN},s.prototype.maxPost=function(){return new j(yt,ue)},s.prototype.makePost=function(l,c){return(0,t.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new j(l,ue)},s.prototype.toString=function(){return".key"},s}(_e),nt=new no,H=function(){function a(s,l,c,h,p){void 0===p&&(p=null),this.isReverse_=h,this.resultGenerator_=p,this.nodeStack_=[];for(var m=1;!s.isEmpty();)if(s=s,m=l?c(s.key,l):1,h&&(m*=-1),m<0)s=this.isReverse_?s.left:s.right;else{if(0===m){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}return a.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var l,s=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return l},a.prototype.hasNext=function(){return this.nodeStack_.length>0},a.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}},a}(),Le=function(){function a(s,l,c,h,p){this.key=s,this.value=l,this.color=null!=c?c:a.RED,this.left=null!=h?h:Ct.EMPTY_NODE,this.right=null!=p?p:Ct.EMPTY_NODE}return a.prototype.copy=function(s,l,c,h,p){return new a(null!=s?s:this.key,null!=l?l:this.value,null!=c?c:this.color,null!=h?h:this.left,null!=p?p:this.right)},a.prototype.count=function(){return this.left.count()+1+this.right.count()},a.prototype.isEmpty=function(){return!1},a.prototype.inorderTraversal=function(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)},a.prototype.reverseTraversal=function(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)},a.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},a.prototype.minKey=function(){return this.min_().key},a.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},a.prototype.insert=function(s,l,c){var h=this,p=c(s,h.key);return(h=p<0?h.copy(null,null,null,h.left.insert(s,l,c),null):0===p?h.copy(null,l,null,null,null):h.copy(null,null,null,null,h.right.insert(s,l,c))).fixUp_()},a.prototype.removeMin_=function(){if(this.left.isEmpty())return Ct.EMPTY_NODE;var s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),(s=s.copy(null,null,null,s.left.removeMin_(),null)).fixUp_()},a.prototype.remove=function(s,l){var c,h;if(l(s,(c=this).key)<0)!c.left.isEmpty()&&!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.remove(s,l),null);else{if(c.left.isRed_()&&(c=c.rotateRight_()),!c.right.isEmpty()&&!c.right.isRed_()&&!c.right.left.isRed_()&&(c=c.moveRedRight_()),0===l(s,c.key)){if(c.right.isEmpty())return Ct.EMPTY_NODE;h=c.right.min_(),c=c.copy(h.key,h.value,null,null,c.right.removeMin_())}c=c.copy(null,null,null,null,c.right.remove(s,l))}return c.fixUp_()},a.prototype.isRed_=function(){return this.color},a.prototype.fixUp_=function(){var s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s},a.prototype.moveRedLeft_=function(){var s=this.colorFlip_();return s.right.left.isRed_()&&(s=(s=(s=s.copy(null,null,null,null,s.right.rotateRight_())).rotateLeft_()).colorFlip_()),s},a.prototype.moveRedRight_=function(){var s=this.colorFlip_();return s.left.left.isRed_()&&(s=(s=s.rotateRight_()).colorFlip_()),s},a.prototype.rotateLeft_=function(){var s=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)},a.prototype.rotateRight_=function(){var s=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)},a.prototype.colorFlip_=function(){var s=this.left.copy(null,null,!this.left.color,null,null),l=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,l)},a.prototype.checkMaxDepth_=function(){var s=this.check_();return Math.pow(2,s)<=this.count()+1},a.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)},a.RED=!0,a.BLACK=!1,a}(),Ti=function(){function a(){}return a.prototype.copy=function(s,l,c,h,p){return this},a.prototype.insert=function(s,l,c){return new Le(s,l,null)},a.prototype.remove=function(s,l){return this},a.prototype.count=function(){return 0},a.prototype.isEmpty=function(){return!0},a.prototype.inorderTraversal=function(s){return!1},a.prototype.reverseTraversal=function(s){return!1},a.prototype.minKey=function(){return null},a.prototype.maxKey=function(){return null},a.prototype.check_=function(){return 0},a.prototype.isRed_=function(){return!1},a}(),Ct=function(){function a(s,l){void 0===l&&(l=a.EMPTY_NODE),this.comparator_=s,this.root_=l}return a.prototype.insert=function(s,l){return new a(this.comparator_,this.root_.insert(s,l,this.comparator_).copy(null,null,Le.BLACK,null,null))},a.prototype.remove=function(s){return new a(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,Le.BLACK,null,null))},a.prototype.get=function(s){for(var l,c=this.root_;!c.isEmpty();){if(0===(l=this.comparator_(s,c.key)))return c.value;l<0?c=c.left:l>0&&(c=c.right)}return null},a.prototype.getPredecessorKey=function(s){for(var l,c=this.root_,h=null;!c.isEmpty();){if(0===(l=this.comparator_(s,c.key))){if(c.left.isEmpty())return h?h.key:null;for(c=c.left;!c.right.isEmpty();)c=c.right;return c.key}l<0?c=c.left:l>0&&(h=c,c=c.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},a.prototype.isEmpty=function(){return this.root_.isEmpty()},a.prototype.count=function(){return this.root_.count()},a.prototype.minKey=function(){return this.root_.minKey()},a.prototype.maxKey=function(){return this.root_.maxKey()},a.prototype.inorderTraversal=function(s){return this.root_.inorderTraversal(s)},a.prototype.reverseTraversal=function(s){return this.root_.reverseTraversal(s)},a.prototype.getIterator=function(s){return new H(this.root_,null,this.comparator_,!1,s)},a.prototype.getIteratorFrom=function(s,l){return new H(this.root_,s,this.comparator_,!1,l)},a.prototype.getReverseIteratorFrom=function(s,l){return new H(this.root_,s,this.comparator_,!0,l)},a.prototype.getReverseIterator=function(s){return new H(this.root_,null,this.comparator_,!0,s)},a.EMPTY_NODE=new Ti,a}();function zs(a,s){return ri(a.name,s.name)}function ai(a,s){return ri(a,s)}var oo,$n,Us,li,cn,dn=function(a){return"number"==typeof a?"number:"+Dl(a):"string:"+a},qt=function(a){if(a.isLeafNode()){var s=a.val();(0,t.hu)("string"==typeof s||"number"==typeof s||"object"==typeof s&&(0,t.r3)(s,".sv"),"Priority must be a string or number.")}else(0,t.hu)(a===ro||a.isEmpty(),"priority of unexpected type.");(0,t.hu)(a===ro||a.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Mt=function(){function a(s,l){void 0===l&&(l=a.__childrenNodeConstructor.EMPTY_NODE),this.value_=s,this.priorityNode_=l,this.lazyHash_=null,(0,t.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qt(this.priorityNode_)}return Object.defineProperty(a,"__childrenNodeConstructor",{get:function(){return oo},set:function(s){oo=s},enumerable:!1,configurable:!0}),a.prototype.isLeafNode=function(){return!0},a.prototype.getPriority=function(){return this.priorityNode_},a.prototype.updatePriority=function(s){return new a(this.value_,s)},a.prototype.getImmediateChild=function(s){return".priority"===s?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE},a.prototype.getChild=function(s){return Z(s)?this:".priority"===W(s)?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE},a.prototype.hasChild=function(){return!1},a.prototype.getPredecessorChildName=function(s,l){return null},a.prototype.updateImmediateChild=function(s,l){return".priority"===s?this.updatePriority(l):l.isEmpty()&&".priority"!==s?this:a.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,l).updatePriority(this.priorityNode_)},a.prototype.updateChild=function(s,l){var c=W(s);return null===c?l:l.isEmpty()&&".priority"!==c?this:((0,t.hu)(".priority"!==c||1===oi(s),".priority must be the last token in a path"),this.updateImmediateChild(c,a.__childrenNodeConstructor.EMPTY_NODE.updateChild(de(s),l)))},a.prototype.isEmpty=function(){return!1},a.prototype.numChildren=function(){return 0},a.prototype.forEachChild=function(s,l){return!1},a.prototype.val=function(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},a.prototype.hash=function(){if(null===this.lazyHash_){var s="";this.priorityNode_.isEmpty()||(s+="priority:"+dn(this.priorityNode_.val())+":");var l=typeof this.value_;s+=l+":",s+="number"===l?Dl(this.value_):this.value_,this.lazyHash_=wl(s)}return this.lazyHash_},a.prototype.getValue=function(){return this.value_},a.prototype.compareTo=function(s){return s===a.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof a.__childrenNodeConstructor?-1:((0,t.hu)(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))},a.prototype.compareToLeafNode_=function(s){var l=typeof s.value_,c=typeof this.value_,h=a.VALUE_TYPE_ORDER.indexOf(l),p=a.VALUE_TYPE_ORDER.indexOf(c);return(0,t.hu)(h>=0,"Unknown leaf type: "+l),(0,t.hu)(p>=0,"Unknown leaf type: "+c),h===p?"object"===c?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:p-h},a.prototype.withIndex=function(){return this},a.prototype.isIndexed=function(){return!0},a.prototype.equals=function(s){return s===this||!!s.isLeafNode()&&(this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_))},a.VALUE_TYPE_ORDER=["object","boolean","number","string"],a}(),Q=new(function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,k.ZT)(s,a),s.prototype.compare=function(l,c){var h=l.node.getPriority(),p=c.node.getPriority(),m=h.compareTo(p);return 0===m?ri(l.name,c.name):m},s.prototype.isDefinedOn=function(l){return!l.getPriority().isEmpty()},s.prototype.indexedValueChanged=function(l,c){return!l.getPriority().equals(c.getPriority())},s.prototype.minPost=function(){return j.MIN},s.prototype.maxPost=function(){return new j(yt,new Mt("[PRIORITY-POST]",Us))},s.prototype.makePost=function(l,c){var h=$n(l);return new j(c,new Mt("[PRIORITY-POST]",h))},s.prototype.toString=function(){return".priority"},s}(_e)),so=Math.log(2),qs=function(){function a(s){this.count=parseInt(Math.log(s+1)/so,10),this.current_=this.count-1;var h=parseInt(Array(this.count+1).join("1"),2);this.bits_=s+1&h}return a.prototype.nextBitIsOne=function(){var s=!(this.bits_&1<<this.current_);return this.current_--,s},a}(),jt=function(a,s,l,c){a.sort(s);var h=function(v,y){var D,T,C=y-v;if(0===C)return null;if(1===C)return D=a[v],T=l?l(D):D,new Le(T,D.node,Le.BLACK,null,null);var R=parseInt(C/2,10)+v,I=h(v,R),V=h(R+1,y);return D=a[R],T=l?l(D):D,new Le(T,D.node,Le.BLACK,I,V)},g=function(v){for(var y=null,C=null,D=a.length,T=function(q,De){var ct=D-q,Nn=D;D-=q;var ps=h(ct+1,Nn),fs=a[ct],Ji=l?l(fs):fs;R(new Le(Ji,fs.node,De,null,ps))},R=function(q){y?(y.left=q,y=q):(C=q,y=q)},I=0;I<v.count;++I){var V=v.nextBitIsOne(),N=Math.pow(2,v.count-(I+1));V?T(N,Le.BLACK):(T(N,Le.BLACK),T(N,Le.RED))}return C}(new qs(a.length));return new Ct(c||s,g)},di={},Kn=function(){function a(s,l){this.indexes_=s,this.indexSet_=l}return Object.defineProperty(a,"Default",{get:function(){return(0,t.hu)(di&&Q,"ChildrenNode.ts has not been loaded"),li=li||new a({".priority":di},{".priority":Q})},enumerable:!1,configurable:!0}),a.prototype.get=function(s){var l=(0,t.DV)(this.indexes_,s);if(!l)throw new Error("No index defined for "+s);return l instanceof Ct?l:null},a.prototype.hasIndex=function(s){return(0,t.r3)(this.indexSet_,s.toString())},a.prototype.addIndex=function(s,l){(0,t.hu)(s!==nt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var c=[],h=!1,p=l.getIterator(j.Wrap),m=p.getNext();m;)h=h||s.isDefinedOn(m.node),c.push(m),m=p.getNext();var g;g=h?jt(c,s.getCompare()):di;var v=s.toString(),y=(0,k.pi)({},this.indexSet_);y[v]=s;var C=(0,k.pi)({},this.indexes_);return C[v]=g,new a(C,y)},a.prototype.addToIndexes=function(s,l){var c=this;return new a((0,t.UI)(this.indexes_,function(p,m){var g=(0,t.DV)(c.indexSet_,m);if((0,t.hu)(g,"Missing index implementation for "+m),p===di){if(g.isDefinedOn(s.node)){for(var v=[],y=l.getIterator(j.Wrap),C=y.getNext();C;)C.name!==s.name&&v.push(C),C=y.getNext();return v.push(s),jt(v,g.getCompare())}return di}var D=l.get(s.name),T=p;return D&&(T=T.remove(new j(s.name,D))),T.insert(s,s.node)}),this.indexSet_)},a.prototype.removeFromIndexes=function(s,l){return new a((0,t.UI)(this.indexes_,function(h){if(h===di)return h;var p=l.get(s.name);return p?h.remove(new j(s.name,p)):h}),this.indexSet_)},a}(),Y=function(){function a(s,l,c){this.children_=s,this.priorityNode_=l,this.indexMap_=c,this.lazyHash_=null,this.priorityNode_&&qt(this.priorityNode_),this.children_.isEmpty()&&(0,t.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(a,"EMPTY_NODE",{get:function(){return cn||(cn=new a(new Ct(ai),null,Kn.Default))},enumerable:!1,configurable:!0}),a.prototype.isLeafNode=function(){return!1},a.prototype.getPriority=function(){return this.priorityNode_||cn},a.prototype.updatePriority=function(s){return this.children_.isEmpty()?this:new a(this.children_,s,this.indexMap_)},a.prototype.getImmediateChild=function(s){if(".priority"===s)return this.getPriority();var l=this.children_.get(s);return null===l?cn:l},a.prototype.getChild=function(s){var l=W(s);return null===l?this:this.getImmediateChild(l).getChild(de(s))},a.prototype.hasChild=function(s){return null!==this.children_.get(s)},a.prototype.updateImmediateChild=function(s,l){if((0,t.hu)(l,"We should always be passing snapshot nodes"),".priority"===s)return this.updatePriority(l);var c=new j(s,l),h=void 0,p=void 0;l.isEmpty()?(h=this.children_.remove(s),p=this.indexMap_.removeFromIndexes(c,this.children_)):(h=this.children_.insert(s,l),p=this.indexMap_.addToIndexes(c,this.children_));var m=h.isEmpty()?cn:this.priorityNode_;return new a(h,m,p)},a.prototype.updateChild=function(s,l){var c=W(s);if(null===c)return l;(0,t.hu)(".priority"!==W(s)||1===oi(s),".priority must be the last token in a path");var h=this.getImmediateChild(c).updateChild(de(s),l);return this.updateImmediateChild(c,h)},a.prototype.isEmpty=function(){return this.children_.isEmpty()},a.prototype.numChildren=function(){return this.children_.count()},a.prototype.val=function(s){if(this.isEmpty())return null;var l={},c=0,h=0,p=!0;if(this.forEachChild(Q,function(v,y){l[v]=y.val(s),c++,p&&a.INTEGER_REGEXP_.test(v)?h=Math.max(h,Number(v)):p=!1}),!s&&p&&h<2*c){var m=[];for(var g in l)m[g]=l[g];return m}return s&&!this.getPriority().isEmpty()&&(l[".priority"]=this.getPriority().val()),l},a.prototype.hash=function(){if(null===this.lazyHash_){var s="";this.getPriority().isEmpty()||(s+="priority:"+dn(this.getPriority().val())+":"),this.forEachChild(Q,function(l,c){var h=c.hash();""!==h&&(s+=":"+l+":"+h)}),this.lazyHash_=""===s?"":wl(s)}return this.lazyHash_},a.prototype.getPredecessorChildName=function(s,l,c){var h=this.resolveIndex_(c);if(h){var p=h.getPredecessorKey(new j(s,l));return p?p.name:null}return this.children_.getPredecessorKey(s)},a.prototype.getFirstChildName=function(s){var l=this.resolveIndex_(s);if(l){var c=l.minKey();return c&&c.name}return this.children_.minKey()},a.prototype.getFirstChild=function(s){var l=this.getFirstChildName(s);return l?new j(l,this.children_.get(l)):null},a.prototype.getLastChildName=function(s){var l=this.resolveIndex_(s);if(l){var c=l.maxKey();return c&&c.name}return this.children_.maxKey()},a.prototype.getLastChild=function(s){var l=this.getLastChildName(s);return l?new j(l,this.children_.get(l)):null},a.prototype.forEachChild=function(s,l){var c=this.resolveIndex_(s);return c?c.inorderTraversal(function(h){return l(h.name,h.node)}):this.children_.inorderTraversal(l)},a.prototype.getIterator=function(s){return this.getIteratorFrom(s.minPost(),s)},a.prototype.getIteratorFrom=function(s,l){var c=this.resolveIndex_(l);if(c)return c.getIteratorFrom(s,function(m){return m});for(var h=this.children_.getIteratorFrom(s.name,j.Wrap),p=h.peek();null!=p&&l.compare(p,s)<0;)h.getNext(),p=h.peek();return h},a.prototype.getReverseIterator=function(s){return this.getReverseIteratorFrom(s.maxPost(),s)},a.prototype.getReverseIteratorFrom=function(s,l){var c=this.resolveIndex_(l);if(c)return c.getReverseIteratorFrom(s,function(m){return m});for(var h=this.children_.getReverseIteratorFrom(s.name,j.Wrap),p=h.peek();null!=p&&l.compare(p,s)>0;)h.getNext(),p=h.peek();return h},a.prototype.compareTo=function(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Ei?-1:0},a.prototype.withIndex=function(s){if(s===nt||this.indexMap_.hasIndex(s))return this;var l=this.indexMap_.addIndex(s,this.children_);return new a(this.children_,this.priorityNode_,l)},a.prototype.isIndexed=function(s){return s===nt||this.indexMap_.hasIndex(s)},a.prototype.equals=function(s){if(s===this)return!0;if(s.isLeafNode())return!1;var l=s;if(this.getPriority().equals(l.getPriority())){if(this.children_.count()===l.children_.count()){for(var c=this.getIterator(Q),h=l.getIterator(Q),p=c.getNext(),m=h.getNext();p&&m;){if(p.name!==m.name||!p.node.equals(m.node))return!1;p=c.getNext(),m=h.getNext()}return null===p&&null===m}return!1}return!1},a.prototype.resolveIndex_=function(s){return s===nt?null:this.indexMap_.get(s.toString())},a.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,a}(),Ei=new(function(a){function s(){return a.call(this,new Ct(ai),Y.EMPTY_NODE,Kn.Default)||this}return(0,k.ZT)(s,a),s.prototype.compareTo=function(l){return l===this?0:1},s.prototype.equals=function(l){return l===this},s.prototype.getPriority=function(){return this},s.prototype.getImmediateChild=function(l){return Y.EMPTY_NODE},s.prototype.isEmpty=function(){return!1},s}(Y));function ge(a,s){if(void 0===s&&(s=null),null===a)return Y.EMPTY_NODE;if("object"==typeof a&&".priority"in a&&(s=a[".priority"]),(0,t.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]),"object"!=typeof a||".sv"in a)return new Mt(a,ge(s));if(a instanceof Array){var v=Y.EMPTY_NODE;return Te(a,function(y,C){if((0,t.r3)(a,y)&&"."!==y.substring(0,1)){var D=ge(C);(D.isLeafNode()||!D.isEmpty())&&(v=v.updateImmediateChild(y,D))}}),v.updatePriority(ge(s))}var c=[],h=!1;if(Te(a,function(y,C){if("."!==y.substring(0,1)){var D=ge(C);D.isEmpty()||(h=h||!D.getPriority().isEmpty(),c.push(new j(y,D)))}}),0===c.length)return Y.EMPTY_NODE;var m=jt(c,zs,function(y){return y.name},ai);if(h){var g=jt(c,Q.getCompare());return new Y(m,ge(s),new Kn({".priority":g},{".priority":Q}))}return new Y(m,ge(s),Kn.Default)}Object.defineProperties(j,{MIN:{value:new j(Gt,Y.EMPTY_NODE)},MAX:{value:new j(yt,Ei)}}),no.__EMPTY_NODE=Y.EMPTY_NODE,Mt.__childrenNodeConstructor=Y,function(a){ro=a}(Ei),function(a){Us=a}(Ei),function(a){$n=a}(ge);var ot=function(a){function s(l){var c=a.call(this)||this;return c.indexPath_=l,(0,t.hu)(!Z(l)&&".priority"!==W(l),"Can't create PathIndex with empty path or .priority key"),c}return(0,k.ZT)(s,a),s.prototype.extractChild=function(l){return l.getChild(this.indexPath_)},s.prototype.isDefinedOn=function(l){return!l.getChild(this.indexPath_).isEmpty()},s.prototype.compare=function(l,c){var h=this.extractChild(l.node),p=this.extractChild(c.node),m=h.compareTo(p);return 0===m?ri(l.name,c.name):m},s.prototype.makePost=function(l,c){var h=ge(l),p=Y.EMPTY_NODE.updateChild(this.indexPath_,h);return new j(c,p)},s.prototype.maxPost=function(){var l=Y.EMPTY_NODE.updateChild(this.indexPath_,Ei);return new j(yt,l)},s.prototype.toString=function(){return Jn(this.indexPath_,0).join("/")},s}(_e),hn=new(function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,k.ZT)(s,a),s.prototype.compare=function(l,c){var h=l.node.compareTo(c.node);return 0===h?ri(l.name,c.name):h},s.prototype.isDefinedOn=function(l){return!0},s.prototype.indexedValueChanged=function(l,c){return!l.equals(c)},s.prototype.minPost=function(){return j.MIN},s.prototype.maxPost=function(){return j.MAX},s.prototype.makePost=function(l,c){var h=ge(l);return new j(c,h)},s.prototype.toString=function(){return".value"},s}(_e)),Zt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ai=function(){var a=0,s=[];return function(l){var c=l===a;a=l;var h,p=new Array(8);for(h=7;h>=0;h--)p[h]=Zt.charAt(l%64),l=Math.floor(l/64);(0,t.hu)(0===l,"Cannot push at time == 0");var m=p.join("");if(c){for(h=11;h>=0&&63===s[h];h--)s[h]=0;s[h]++}else for(h=0;h<12;h++)s[h]=Math.floor(64*Math.random());for(h=0;h<12;h++)m+=Zt.charAt(s[h]);return(0,t.hu)(20===m.length,"nextPushId: Length should be 20."),m}}(),nd=function(a){if(a===""+Is)return"-";var s=eo(a);if(null!=s)return""+(s+1);for(var l=new Array(a.length),c=0;c<l.length;c++)l[c]=a.charAt(c);if(l.length<786)return l.push("-"),l.join("");for(var h=l.length-1;h>=0&&"z"===l[h];)h--;if(-1===h)return yt;var m=Zt.charAt(Zt.indexOf(l[h])+1);return l[h]=m,l.slice(0,h+1).join("")},co=function(a){if(a===""+xl)return Gt;var s=eo(a);if(null!=s)return""+(s-1);for(var l=new Array(a.length),c=0;c<l.length;c++)l[c]=a.charAt(c);return"-"===l[l.length-1]?1===l.length?""+Is:(delete l[l.length-1],l.join("")):(l[l.length-1]=Zt.charAt(Zt.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function Zs(a){return{type:"value",snapshotNode:a}}function Ri(a,s){return{type:"child_added",snapshotNode:s,childName:a}}function un(a,s){return{type:"child_removed",snapshotNode:s,childName:a}}function pn(a,s,l){return{type:"child_changed",snapshotNode:s,childName:a,oldSnap:l}}var ho=function(){function a(s){this.index_=s}return a.prototype.updateChild=function(s,l,c,h,p,m){(0,t.hu)(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");var g=s.getImmediateChild(l);return g.getChild(h).equals(c.getChild(h))&&g.isEmpty()===c.isEmpty()||(null!=m&&(c.isEmpty()?s.hasChild(l)?m.trackChildChange(un(l,g)):(0,t.hu)(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?m.trackChildChange(Ri(l,c)):m.trackChildChange(pn(l,c,g))),s.isLeafNode()&&c.isEmpty())?s:s.updateImmediateChild(l,c).withIndex(this.index_)},a.prototype.updateFullNode=function(s,l,c){return null!=c&&(s.isLeafNode()||s.forEachChild(Q,function(h,p){l.hasChild(h)||c.trackChildChange(un(h,p))}),l.isLeafNode()||l.forEachChild(Q,function(h,p){if(s.hasChild(h)){var m=s.getImmediateChild(h);m.equals(p)||c.trackChildChange(pn(h,p,m))}else c.trackChildChange(Ri(h,p))})),l.withIndex(this.index_)},a.prototype.updatePriority=function(s,l){return s.isEmpty()?Y.EMPTY_NODE:s.updatePriority(l)},a.prototype.filtersNodes=function(){return!1},a.prototype.getIndexedFilter=function(){return this},a.prototype.getIndex=function(){return this.index_},a}(),Ws=function(){function a(s){this.indexedFilter_=new ho(s.getIndex()),this.index_=s.getIndex(),this.startPost_=a.getStartPost_(s),this.endPost_=a.getEndPost_(s)}return a.prototype.getStartPost=function(){return this.startPost_},a.prototype.getEndPost=function(){return this.endPost_},a.prototype.matches=function(s){return this.index_.compare(this.getStartPost(),s)<=0&&this.index_.compare(s,this.getEndPost())<=0},a.prototype.updateChild=function(s,l,c,h,p,m){return this.matches(new j(l,c))||(c=Y.EMPTY_NODE),this.indexedFilter_.updateChild(s,l,c,h,p,m)},a.prototype.updateFullNode=function(s,l,c){l.isLeafNode()&&(l=Y.EMPTY_NODE);var h=l.withIndex(this.index_);h=h.updatePriority(Y.EMPTY_NODE);var p=this;return l.forEachChild(Q,function(m,g){p.matches(new j(m,g))||(h=h.updateImmediateChild(m,Y.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,h,c)},a.prototype.updatePriority=function(s,l){return s},a.prototype.filtersNodes=function(){return!0},a.prototype.getIndexedFilter=function(){return this.indexedFilter_},a.prototype.getIndex=function(){return this.index_},a.getStartPost_=function(s){if(s.hasStart()){var l=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),l)}return s.getIndex().minPost()},a.getEndPost_=function(s){if(s.hasEnd()){var l=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),l)}return s.getIndex().maxPost()},a}(),Js=function(){function a(s){this.rangedFilter_=new Ws(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft()}return a.prototype.updateChild=function(s,l,c,h,p,m){return this.rangedFilter_.matches(new j(l,c))||(c=Y.EMPTY_NODE),s.getImmediateChild(l).equals(c)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,l,c,h,p,m):this.fullLimitUpdateChild_(s,l,c,p,m)},a.prototype.updateFullNode=function(s,l,c){var h;if(l.isLeafNode()||l.isEmpty())h=Y.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){h=Y.EMPTY_NODE.withIndex(this.index_);var p=void 0;p=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var m=0;p.hasNext()&&m<this.limit_;){var g=p.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),g)<=0:this.index_.compare(g,this.rangedFilter_.getEndPost())<=0))break;h=h.updateImmediateChild(g.name,g.node),m++}}else{h=(h=l.withIndex(this.index_)).updatePriority(Y.EMPTY_NODE);var y=void 0,C=void 0,D=void 0;if(p=void 0,this.reverse_){p=h.getReverseIterator(this.index_),y=this.rangedFilter_.getEndPost(),C=this.rangedFilter_.getStartPost();var T=this.index_.getCompare();D=function(N,q){return T(q,N)}}else p=h.getIterator(this.index_),y=this.rangedFilter_.getStartPost(),C=this.rangedFilter_.getEndPost(),D=this.index_.getCompare();m=0;for(var R=!1;p.hasNext();)g=p.getNext(),!R&&D(y,g)<=0&&(R=!0),R&&m<this.limit_&&D(g,C)<=0?m++:h=h.updateImmediateChild(g.name,Y.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,h,c)},a.prototype.updatePriority=function(s,l){return s},a.prototype.filtersNodes=function(){return!0},a.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},a.prototype.getIndex=function(){return this.index_},a.prototype.fullLimitUpdateChild_=function(s,l,c,h,p){var m;if(this.reverse_){var g=this.index_.getCompare();m=function(De,ct){return g(ct,De)}}else m=this.index_.getCompare();var v=s;(0,t.hu)(v.numChildren()===this.limit_,"");var y=new j(l,c),C=this.reverse_?v.getFirstChild(this.index_):v.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(v.hasChild(l)){for(var T=v.getImmediateChild(l),R=h.getChildAfterChild(this.index_,C,this.reverse_);null!=R&&(R.name===l||v.hasChild(R.name));)R=h.getChildAfterChild(this.index_,R,this.reverse_);var I=null==R?1:m(R,y);if(D&&!c.isEmpty()&&I>=0)return null!=p&&p.trackChildChange(pn(l,c,T)),v.updateImmediateChild(l,c);null!=p&&p.trackChildChange(un(l,T));var N=v.updateImmediateChild(l,Y.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=p&&p.trackChildChange(Ri(R.name,R.node)),N.updateImmediateChild(R.name,R.node)):N}return c.isEmpty()?s:D&&m(C,y)>=0?(null!=p&&(p.trackChildChange(un(C.name,C.node)),p.trackChildChange(Ri(l,c))),v.updateImmediateChild(l,c).updateImmediateChild(C.name,Y.EMPTY_NODE)):s},a}(),uo=function(){function a(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Q}return a.prototype.hasStart=function(){return this.startSet_},a.prototype.hasStartAfter=function(){return this.startAfterSet_},a.prototype.hasEndBefore=function(){return this.endBeforeSet_},a.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},a.prototype.getIndexStartValue=function(){return(0,t.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},a.prototype.getIndexStartName=function(){return(0,t.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gt},a.prototype.hasEnd=function(){return this.endSet_},a.prototype.getIndexEndValue=function(){return(0,t.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},a.prototype.getIndexEndName=function(){return(0,t.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yt},a.prototype.hasLimit=function(){return this.limitSet_},a.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},a.prototype.getLimit=function(){return(0,t.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},a.prototype.getIndex=function(){return this.index_},a.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},a.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Q},a.prototype.copy=function(){var s=new a;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s},a}();function po(a,s,l){var c=a.copy();return c.startSet_=!0,void 0===s&&(s=null),c.indexStartValue_=s,null!=l?(c.startNameSet_=!0,c.indexStartName_=l):(c.startNameSet_=!1,c.indexStartName_=""),c}function fo(a,s,l){var c=a.copy();return c.endSet_=!0,void 0===s&&(s=null),c.indexEndValue_=s,void 0!==l?(c.endNameSet_=!0,c.indexEndName_=l):(c.endNameSet_=!1,c.indexEndName_=""),c}function mo(a,s){var l=a.copy();return l.index_=s,l}function Qs(a){var l,s={};return a.isDefault()||(a.index_===Q?l="$priority":a.index_===hn?l="$value":a.index_===nt?l="$key":((0,t.hu)(a.index_ instanceof ot,"Unrecognized index type!"),l=a.index_.toString()),s.orderBy=(0,t.Pz)(l),a.startSet_&&(s.startAt=(0,t.Pz)(a.indexStartValue_),a.startNameSet_&&(s.startAt+=","+(0,t.Pz)(a.indexStartName_))),a.endSet_&&(s.endAt=(0,t.Pz)(a.indexEndValue_),a.endNameSet_&&(s.endAt+=","+(0,t.Pz)(a.indexEndName_))),a.limitSet_&&(a.isViewFromLeft()?s.limitToFirst=a.limit_:s.limitToLast=a.limit_)),s}function $s(a){var s={};if(a.startSet_&&(s.sp=a.indexStartValue_,a.startNameSet_&&(s.sn=a.indexStartName_)),a.endSet_&&(s.ep=a.indexEndValue_,a.endNameSet_&&(s.en=a.indexEndName_)),a.limitSet_){s.l=a.limit_;var l=a.viewFrom_;""===l&&(l=a.isViewFromLeft()?"l":"r"),s.vf=l}return a.index_!==Q&&(s.i=a.index_.toString()),s}var ld=function(a){function s(l,c,h,p){var m=a.call(this)||this;return m.repoInfo_=l,m.onDataUpdate_=c,m.authTokenProvider_=h,m.appCheckTokenProvider_=p,m.log_=Ot("p:rest:"),m.listens_={},m}return(0,k.ZT)(s,a),s.prototype.reportStats=function(l){throw new Error("Method not implemented.")},s.getListenId_=function(l,c){return void 0!==c?"tag$"+c:((0,t.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())},s.prototype.listen=function(l,c,h,p){var m=this,g=l._path.toString();this.log_("Listen called for "+g+" "+l._queryIdentifier);var v=s.getListenId_(l,h),y={};this.listens_[v]=y;var C=Qs(l._queryParams);this.restRequest_(g+".json",C,function(D,T){var R=T;404===D&&(R=null,D=null),null===D&&m.onDataUpdate_(g,R,!1,h),(0,t.DV)(m.listens_,v)===y&&p(D?401===D?"permission_denied":"rest_error:"+D:"ok",null)})},s.prototype.unlisten=function(l,c){var h=s.getListenId_(l,c);delete this.listens_[h]},s.prototype.get=function(l){var c=this,h=Qs(l._queryParams),p=l._path.toString(),m=new t.BH;return this.restRequest_(p+".json",h,function(g,v){var y=v;404===g&&(y=null,g=null),null===g?(c.onDataUpdate_(p,y,!1,null),m.resolve(y)):m.reject(new Error(y))}),m.promise},s.prototype.refreshAuthToken=function(l){},s.prototype.restRequest_=function(l,c,h){var p=this;return void 0===c&&(c={}),c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(m){var g=(0,k.CR)(m,2),v=g[0],y=g[1];v&&v.accessToken&&(c.auth=v.accessToken),y&&y.token&&(c.ac=y.token);var C=(p.repoInfo_.secure?"https://":"http://")+p.repoInfo_.host+l+"?ns="+p.repoInfo_.namespace+(0,t.xO)(c);p.log_("Sending REST request for "+C);var D=new XMLHttpRequest;D.onreadystatechange=function(){if(h&&4===D.readyState){p.log_("REST Response for "+C+" received. status:",D.status,"response:",D.responseText);var T=null;if(D.status>=200&&D.status<300){try{T=(0,t.cI)(D.responseText)}catch(R){pe("Failed to parse JSON response for "+C+": "+D.responseText)}h(null,T)}else 401!==D.status&&404!==D.status&&pe("Got unsuccessful REST response for "+C+" Status: "+D.status),h(D.status);h=null}},D.open("GET",C,!0),D.send()})},s}(Ql),dd=function(){function a(){this.rootNode_=Y.EMPTY_NODE}return a.prototype.getNode=function(s){return this.rootNode_.getChild(s)},a.prototype.updateSnapshot=function(s,l){this.rootNode_=this.rootNode_.updateChild(s,l)},a}();function _o(){return{value:null,children:new Map}}function fn(a,s,l){if(Z(s))a.value=l,a.children.clear();else if(null!==a.value)a.value=a.value.updateChild(s,l);else{var c=W(s);a.children.has(c)||a.children.set(c,_o()),fn(a.children.get(c),s=de(s),l)}}function Xs(a,s){if(Z(s))return a.value=null,a.children.clear(),!0;if(null!==a.value){if(a.value.isLeafNode())return!1;var l=a.value;return a.value=null,l.forEachChild(Q,function(p,m){fn(a,new ae(p),m)}),Xs(a,s)}if(a.children.size>0){var c=W(s);return s=de(s),a.children.has(c)&&Xs(a.children.get(c),s)&&a.children.delete(c),0===a.children.size}return!0}function Ii(a,s,l){null!==a.value?l(s,a.value):function(a,s){a.children.forEach(function(l,c){s(c,l)})}(a,function(c,h){Ii(h,new ae(s.toString()+"/"+c),l)})}var go=function(){function a(s){this.collection_=s,this.last_=null}return a.prototype.get=function(){var s=this.collection_.get(),l=(0,k.pi)({},s);return this.last_&&Te(this.last_,function(c,h){l[c]=l[c]-h}),this.last_=s,l},a}(),ta=function(){function a(s,l){this.server_=l,this.statsToReport_={},this.statsListener_=new go(s);var c=1e4+2e4*Math.random();jn(this.reportStats_.bind(this),Math.floor(c))}return a.prototype.reportStats_=function(){var s=this,l=this.statsListener_.get(),c={},h=!1;Te(l,function(p,m){m>0&&(0,t.r3)(s.statsToReport_,p)&&(c[p]=m,h=!0)}),h&&this.server_.reportStats(c),jn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},a}(),st=(()=>(function(a){a[a.OVERWRITE=0]="OVERWRITE",a[a.MERGE=1]="MERGE",a[a.ACK_USER_WRITE=2]="ACK_USER_WRITE",a[a.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(st||(st={})),st))();function vo(a){return{fromUser:!1,fromServer:!0,queryId:a,tagged:!0}}var na=function(){function a(s,l,c){this.path=s,this.affectedTree=l,this.revert=c,this.type=st.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return a.prototype.operationForChild=function(s){if(Z(this.path)){if(null!=this.affectedTree.value)return(0,t.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var l=this.affectedTree.subtree(new ae(s));return new a(ne(),l,this.revert)}return(0,t.hu)(W(this.path)===s,"operationForChild called for unrelated child."),new a(de(this.path),this.affectedTree,this.revert)},a}(),mn=function(){function a(s,l){this.source=s,this.path=l,this.type=st.LISTEN_COMPLETE}return a.prototype.operationForChild=function(s){return Z(this.path)?new a(this.source,ne()):new a(this.source,de(this.path))},a}(),fe=function(){function a(s,l,c){this.source=s,this.path=l,this.snap=c,this.type=st.OVERWRITE}return a.prototype.operationForChild=function(s){return Z(this.path)?new a(this.source,ne(),this.snap.getImmediateChild(s)):new a(this.source,de(this.path),this.snap)},a}(),_n=function(){function a(s,l,c){this.source=s,this.path=l,this.children=c,this.type=st.MERGE}return a.prototype.operationForChild=function(s){if(Z(this.path)){var l=this.children.subtree(new ae(s));return l.isEmpty()?null:l.value?new fe(this.source,ne(),l.value):new a(this.source,ne(),l)}return(0,t.hu)(W(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new a(this.source,de(this.path),this.children)},a.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},a}(),Lt=function(){function a(s,l,c){this.node_=s,this.fullyInitialized_=l,this.filtered_=c}return a.prototype.isFullyInitialized=function(){return this.fullyInitialized_},a.prototype.isFiltered=function(){return this.filtered_},a.prototype.isCompleteForPath=function(s){if(Z(s))return this.isFullyInitialized()&&!this.filtered_;var l=W(s);return this.isCompleteForChild(l)},a.prototype.isCompleteForChild=function(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)},a.prototype.getNode=function(){return this.node_},a}(),ra=function(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()};function Fi(a,s,l,c,h,p){var m=c.filter(function(g){return g.type===l});m.sort(function(g,v){return function(a,s,l){if(null==s.childName||null==l.childName)throw(0,t.g5)("Should only compare child_ events.");var c=new j(s.childName,s.snapshotNode),h=new j(l.childName,l.snapshotNode);return a.index_.compare(c,h)}(a,g,v)}),m.forEach(function(g){var v=function(a,s,l){return"value"===s.type||"child_removed"===s.type||(s.prevName=l.getPredecessorChildName(s.childName,s.snapshotNode,a.index_)),s}(a,g,p);h.forEach(function(y){y.respondsTo(g.type)&&s.push(y.createEvent(v,a.query_))})})}function sr(a,s){return{eventCache:a,serverCache:s}}function ar(a,s,l,c){return sr(new Lt(s,l,c),a.serverCache)}function oa(a,s,l,c){return sr(a.eventCache,new Lt(s,l,c))}function yo(a){return a.eventCache.isFullyInitialized()?a.eventCache.getNode():null}function ci(a){return a.serverCache.isFullyInitialized()?a.serverCache.getNode():null}var He,Ge=function(){function a(s,l){void 0===l&&(He||(He=new Ct(Eh)),l=He),this.value=s,this.children=l}return a.fromObject=function(s){var l=new a(null);return Te(s,function(c,h){l=l.set(new ae(c),h)}),l},a.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},a.prototype.findRootMostMatchingPathAndValue=function(s,l){if(null!=this.value&&l(this.value))return{path:ne(),value:this.value};if(Z(s))return null;var c=W(s),h=this.children.get(c);if(null!==h){var p=h.findRootMostMatchingPathAndValue(de(s),l);return null!=p?{path:me(new ae(c),p.path),value:p.value}:null}return null},a.prototype.findRootMostValueAndPath=function(s){return this.findRootMostMatchingPathAndValue(s,function(){return!0})},a.prototype.subtree=function(s){if(Z(s))return this;var l=W(s),c=this.children.get(l);return null!==c?c.subtree(de(s)):new a(null)},a.prototype.set=function(s,l){if(Z(s))return new a(l,this.children);var c=W(s),p=(this.children.get(c)||new a(null)).set(de(s),l),m=this.children.insert(c,p);return new a(this.value,m)},a.prototype.remove=function(s){if(Z(s))return this.children.isEmpty()?new a(null):new a(null,this.children);var l=W(s),c=this.children.get(l);if(c){var h=c.remove(de(s)),p=void 0;return p=h.isEmpty()?this.children.remove(l):this.children.insert(l,h),null===this.value&&p.isEmpty()?new a(null):new a(this.value,p)}return this},a.prototype.get=function(s){if(Z(s))return this.value;var l=W(s),c=this.children.get(l);return c?c.get(de(s)):null},a.prototype.setTree=function(s,l){if(Z(s))return l;var m,c=W(s),p=(this.children.get(c)||new a(null)).setTree(de(s),l);return m=p.isEmpty()?this.children.remove(c):this.children.insert(c,p),new a(this.value,m)},a.prototype.fold=function(s){return this.fold_(ne(),s)},a.prototype.fold_=function(s,l){var c={};return this.children.inorderTraversal(function(h,p){c[h]=p.fold_(me(s,h),l)}),l(s,this.value,c)},a.prototype.findOnPath=function(s,l){return this.findOnPath_(s,ne(),l)},a.prototype.findOnPath_=function(s,l,c){var h=!!this.value&&c(l,this.value);if(h)return h;if(Z(s))return null;var p=W(s),m=this.children.get(p);return m?m.findOnPath_(de(s),me(l,p),c):null},a.prototype.foreachOnPath=function(s,l){return this.foreachOnPath_(s,ne(),l)},a.prototype.foreachOnPath_=function(s,l,c){if(Z(s))return this;this.value&&c(l,this.value);var h=W(s),p=this.children.get(h);return p?p.foreachOnPath_(de(s),me(l,h),c):new a(null)},a.prototype.foreach=function(s){this.foreach_(ne(),s)},a.prototype.foreach_=function(s,l){this.children.inorderTraversal(function(c,h){h.foreach_(me(s,c),l)}),this.value&&l(s,this.value)},a.prototype.foreachChild=function(s){this.children.inorderTraversal(function(l,c){c.value&&s(l,c.value)})},a}(),$e=function(){function a(s){this.writeTree_=s}return a.empty=function(){return new a(new Ge(null))},a}();function vn(a,s,l){if(Z(s))return new $e(new Ge(l));var c=a.writeTree_.findRootMostValueAndPath(s);if(null!=c){var h=c.path,p=c.value,m=$(h,s);return p=p.updateChild(m,l),new $e(a.writeTree_.set(h,p))}var g=new Ge(l),v=a.writeTree_.setTree(s,g);return new $e(v)}function lr(a,s,l){var c=a;return Te(l,function(h,p){c=vn(c,me(s,h),p)}),c}function sa(a,s){if(Z(s))return $e.empty();var l=a.writeTree_.setTree(s,new Ge(null));return new $e(l)}function dr(a,s){return null!=Pi(a,s)}function Pi(a,s){var l=a.writeTree_.findRootMostValueAndPath(s);return null!=l?a.writeTree_.get(l.path).getChild($(l.path,s)):null}function aa(a){var s=[],l=a.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Q,function(c,h){s.push(new j(c,h))}):a.writeTree_.children.inorderTraversal(function(c,h){null!=h.value&&s.push(new j(c,h.value))}),s}function wt(a,s){if(Z(s))return a;var l=Pi(a,s);return new $e(null!=l?new Ge(l):a.writeTree_.subtree(s))}function Li(a){return a.writeTree_.isEmpty()}function hi(a,s){return Co(ne(),a.writeTree_,s)}function Co(a,s,l){if(null!=s.value)return l.updateChild(a,s.value);var c=null;return s.children.inorderTraversal(function(h,p){".priority"===h?((0,t.hu)(null!==p.value,"Priority writes must always be leaf nodes"),c=p.value):l=Co(me(a,h),p,l)}),!l.getChild(a).isEmpty()&&null!==c&&(l=l.updateChild(me(a,".priority"),c)),l}function Mo(a,s){return Vi(s,a)}function fd(a,s){if(a.snap)return be(a.path,s);for(var l in a.children)if(a.children.hasOwnProperty(l)&&be(me(a.path,l),s))return!0;return!1}function cu(a){return a.visible}function hr(a,s,l){for(var c=$e.empty(),h=0;h<a.length;++h){var p=a[h];if(s(p)){var m=p.path,g=void 0;if(p.snap)be(l,m)?c=vn(c,g=$(l,m),p.snap):be(m,l)&&(g=$(m,l),c=vn(c,ne(),p.snap.getChild(g)));else{if(!p.children)throw(0,t.g5)("WriteRecord should have .snap or .children");if(be(l,m))c=lr(c,g=$(l,m),p.children);else if(be(m,l))if(Z(g=$(m,l)))c=lr(c,ne(),p.children);else{var v=(0,t.DV)(p.children,W(g));if(v){var y=v.getChild(de(g));c=vn(c,ne(),y)}}}}}return c}function Bi(a,s,l,c,h){if(c||h){var v=wt(a.visibleWrites,s);return!h&&Li(v)?l:h||null!=l||dr(v,ne())?hi(hr(a.allWrites,function(T){return(T.visible||h)&&(!c||!~c.indexOf(T.writeId))&&(be(T.path,s)||be(s,T.path))},s),l||Y.EMPTY_NODE):null}var p=Pi(a.visibleWrites,s);if(null!=p)return p;var m=wt(a.visibleWrites,s);return Li(m)?l:null!=l||dr(m,ne())?hi(m,l||Y.EMPTY_NODE):null}function Ni(a,s,l,c){return Bi(a.writeTree,a.treePath,s,l,c)}function pr(a,s){return function(a,s,l){var c=Y.EMPTY_NODE,h=Pi(a.visibleWrites,s);if(h)return h.isLeafNode()||h.forEachChild(Q,function(g,v){c=c.updateImmediateChild(g,v)}),c;if(l){var p=wt(a.visibleWrites,s);return l.forEachChild(Q,function(g,v){var y=hi(wt(p,new ae(g)),v);c=c.updateImmediateChild(g,y)}),aa(p).forEach(function(g){c=c.updateImmediateChild(g.name,g.node)}),c}return aa(wt(a.visibleWrites,s)).forEach(function(g){c=c.updateImmediateChild(g.name,g.node)}),c}(a.writeTree,a.treePath,s)}function da(a,s,l,c){return function(a,s,l,c,h){(0,t.hu)(c||h,"Either existingEventSnap or existingServerSnap must exist");var p=me(s,l);if(dr(a.visibleWrites,p))return null;var m=wt(a.visibleWrites,p);return Li(m)?h.getChild(l):hi(m,h.getChild(l))}(a.writeTree,a.treePath,s,l,c)}function K(a,s){return function(a,s){return Pi(a.visibleWrites,s)}(a.writeTree,me(a.treePath,s))}function Wt(a,s,l){return function(a,s,l,c){var h=me(s,l),p=Pi(a.visibleWrites,h);return null!=p?p:c.isCompleteForChild(l)?hi(wt(a.visibleWrites,h),c.getNode().getImmediateChild(l)):null}(a.writeTree,a.treePath,s,l)}function Do(a,s){return Vi(me(a.treePath,s),a.writeTree)}function Vi(a,s){return{treePath:a,writeTree:s}}var _d=function(){function a(){this.changeMap=new Map}return a.prototype.trackChildChange=function(s){var l=s.type,c=s.childName;(0,t.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,t.hu)(".priority"!==c,"Only non-priority child changes can be tracked.");var h=this.changeMap.get(c);if(h){var p=h.type;if("child_added"===l&&"child_removed"===p)this.changeMap.set(c,pn(c,s.snapshotNode,h.snapshotNode));else if("child_removed"===l&&"child_added"===p)this.changeMap.delete(c);else if("child_removed"===l&&"child_changed"===p)this.changeMap.set(c,un(c,h.oldSnap));else if("child_changed"===l&&"child_added"===p)this.changeMap.set(c,Ri(c,s.snapshotNode));else{if("child_changed"!==l||"child_changed"!==p)throw(0,t.g5)("Illegal combination of changes: "+s+" occurred after "+h);this.changeMap.set(c,pn(c,s.snapshotNode,h.oldSnap))}}else this.changeMap.set(c,s)},a.prototype.getChanges=function(){return Array.from(this.changeMap.values())},a}(),fr=new(function(){function a(){}return a.prototype.getCompleteChild=function(s){return null},a.prototype.getChildAfterChild=function(s,l,c){return null},a}()),Jt=function(){function a(s,l,c){void 0===c&&(c=null),this.writes_=s,this.viewCache_=l,this.optCompleteServerCache_=c}return a.prototype.getCompleteChild=function(s){var l=this.viewCache_.eventCache;if(l.isCompleteForChild(s))return l.getNode().getImmediateChild(s);var c=null!=this.optCompleteServerCache_?new Lt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wt(this.writes_,s,c)},a.prototype.getChildAfterChild=function(s,l,c){var h=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ci(this.viewCache_),p=function(a,s,l,c,h,p){return function(a,s,l,c,h,p,m){var g,v=wt(a.visibleWrites,s),y=Pi(v,ne());if(null!=y)g=y;else{if(null==l)return[];g=hi(v,l)}if((g=g.withIndex(m)).isEmpty()||g.isLeafNode())return[];for(var C=[],D=m.getCompare(),T=p?g.getReverseIteratorFrom(c,m):g.getIteratorFrom(c,m),R=T.getNext();R&&C.length<h;)0!==D(R,c)&&C.push(R),R=T.getNext();return C}(a.writeTree,a.treePath,s,l,c,h,p)}(this.writes_,h,l,1,c,s);return 0===p.length?null:p[0]},a}();function ha(a,s,l,c,h,p){var m=s.eventCache;if(null!=K(c,l))return s;var g=void 0,v=void 0;if(Z(l))if((0,t.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){var y=ci(s),D=pr(c,y instanceof Y?y:Y.EMPTY_NODE);g=a.filter.updateFullNode(s.eventCache.getNode(),D,p)}else{var T=Ni(c,ci(s));g=a.filter.updateFullNode(s.eventCache.getNode(),T,p)}else{var R=W(l);if(".priority"===R){(0,t.hu)(1===oi(l),"Can't have a priority with additional path components");var I=m.getNode(),V=da(c,l,I,v=s.serverCache.getNode());g=null!=V?a.filter.updatePriority(I,V):m.getNode()}else{var N=de(l),q=void 0;if(m.isCompleteForChild(R)){v=s.serverCache.getNode();var De=da(c,l,m.getNode(),v);q=null!=De?m.getNode().getImmediateChild(R).updateChild(N,De):m.getNode().getImmediateChild(R)}else q=Wt(c,R,s.serverCache);g=null!=q?a.filter.updateChild(m.getNode(),R,q,N,h,p):m.getNode()}}return ar(s,g,m.isFullyInitialized()||Z(l),a.filter.filtersNodes())}function bn(a,s,l,c,h,p,m,g){var y,v=s.serverCache,C=m?a.filter:a.filter.getIndexedFilter();if(Z(l))y=C.updateFullNode(v.getNode(),c,null);else if(C.filtersNodes()&&!v.isFiltered()){var D=v.getNode().updateChild(l,c);y=C.updateFullNode(v.getNode(),D,null)}else{var T=W(l);if(!v.isCompleteForPath(l)&&oi(l)>1)return s;var R=de(l),V=v.getNode().getImmediateChild(T).updateChild(R,c);y=".priority"===T?C.updatePriority(v.getNode(),V):C.updateChild(v.getNode(),T,V,R,fr,null)}var N=oa(s,y,v.isFullyInitialized()||Z(l),C.filtersNodes());return ha(a,N,l,h,new Jt(h,N,p),g)}function So(a,s,l,c,h,p,m){var v,y,g=s.eventCache,C=new Jt(h,s,p);if(Z(l))y=a.filter.updateFullNode(s.eventCache.getNode(),c,m),v=ar(s,y,!0,a.filter.filtersNodes());else{var D=W(l);if(".priority"===D)y=a.filter.updatePriority(s.eventCache.getNode(),c),v=ar(s,y,g.isFullyInitialized(),g.isFiltered());else{var T=de(l),R=g.getNode().getImmediateChild(D),I=void 0;if(Z(T))I=c;else{var V=C.getCompleteChild(D);I=null!=V?".priority"===Ys(T)&&V.getChild(td(T)).isEmpty()?V:V.updateChild(T,c):Y.EMPTY_NODE}v=R.equals(I)?s:ar(s,a.filter.updateChild(g.getNode(),D,I,T,C,m),g.isFullyInitialized(),a.filter.filtersNodes())}}return v}function ua(a,s){return a.eventCache.isCompleteForChild(s)}function pa(a,s,l){return l.foreach(function(c,h){s=s.updateChild(c,h)}),s}function pt(a,s,l,c,h,p,m,g){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;var y,v=s;y=Z(l)?c:new Ge(null).setTree(l,c);var C=s.serverCache.getNode();return y.children.inorderTraversal(function(D,T){if(C.hasChild(D)){var I=pa(0,s.serverCache.getNode().getImmediateChild(D),T);v=bn(a,v,new ae(D),I,h,p,m,g)}}),y.children.inorderTraversal(function(D,T){var R=!s.serverCache.isCompleteForChild(D)&&void 0===T.value;if(!C.hasChild(D)&&!R){var V=pa(0,s.serverCache.getNode().getImmediateChild(D),T);v=bn(a,v,new ae(D),V,h,p,m,g)}}),v}var bd=function(){function a(s,l){this.query_=s,this.eventRegistrations_=[];var c=this.query_._queryParams,h=new ho(c.getIndex()),p=function(a){return a.loadsAllData()?new ho(a.getIndex()):a.hasLimit()?new Js(a):new Ws(a)}(c);this.processor_=function(a){return{filter:a}}(p);var m=l.serverCache,g=l.eventCache,v=h.updateFullNode(Y.EMPTY_NODE,m.getNode(),null),y=p.updateFullNode(Y.EMPTY_NODE,g.getNode(),null),C=new Lt(v,m.isFullyInitialized(),h.filtersNodes()),D=new Lt(y,g.isFullyInitialized(),p.filtersNodes());this.viewCache_=sr(D,C),this.eventGenerator_=new ra(this.query_)}return Object.defineProperty(a.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),a}();function fa(a,s){var l=ci(a.viewCache_);return l&&(a.query._queryParams.loadsAllData()||!Z(s)&&!l.getImmediateChild(W(s)).isEmpty())?l.getChild(s):null}function Md(a){return 0===a.eventRegistrations_.length}function yn(a,s,l){var c=[];if(l){(0,t.hu)(null==s,"A cancel should cancel all event registrations.");var h=a.query._path;a.eventRegistrations_.forEach(function(v){var y=v.createCancelEvent(l,h);y&&c.push(y)})}if(s){for(var p=[],m=0;m<a.eventRegistrations_.length;++m){var g=a.eventRegistrations_[m];if(g.matches(s)){if(s.hasAnyCallback()){p=p.concat(a.eventRegistrations_.slice(m+1));break}}else p.push(g)}a.eventRegistrations_=p}else a.eventRegistrations_=[];return c}function xo(a,s,l,c){s.type===st.MERGE&&null!==s.source.queryId&&((0,t.hu)(ci(a.viewCache_),"We should always have a full cache before handling merges"),(0,t.hu)(yo(a.viewCache_),"Missing event cache, even though we have a server cache"));var h=a.viewCache_,p=function(a,s,l,c,h){var m,g,p=new _d;if(l.type===st.OVERWRITE){var v=l;v.source.fromUser?m=So(a,s,v.path,v.snap,c,h,p):((0,t.hu)(v.source.fromServer,"Unknown source."),g=v.source.tagged||s.serverCache.isFiltered()&&!Z(v.path),m=bn(a,s,v.path,v.snap,c,h,g,p))}else if(l.type===st.MERGE){var y=l;y.source.fromUser?m=function(a,s,l,c,h,p,m){var g=s;return c.foreach(function(v,y){var C=me(l,v);ua(s,W(C))&&(g=So(a,g,C,y,h,p,m))}),c.foreach(function(v,y){var C=me(l,v);ua(s,W(C))||(g=So(a,g,C,y,h,p,m))}),g}(a,s,y.path,y.children,c,h,p):((0,t.hu)(y.source.fromServer,"Unknown source."),g=y.source.tagged||s.serverCache.isFiltered(),m=pt(a,s,y.path,y.children,c,h,g,p))}else if(l.type===st.ACK_USER_WRITE){var C=l;m=C.revert?function(a,s,l,c,h,p){var m;if(null!=K(c,l))return s;var g=new Jt(c,s,h),v=s.eventCache.getNode(),y=void 0;if(Z(l)||".priority"===W(l)){var C=void 0;if(s.serverCache.isFullyInitialized())C=Ni(c,ci(s));else{var D=s.serverCache.getNode();(0,t.hu)(D instanceof Y,"serverChildren would be complete if leaf node"),C=pr(c,D)}y=a.filter.updateFullNode(v,C=C,p)}else{var T=W(l),R=Wt(c,T,s.serverCache);null==R&&s.serverCache.isCompleteForChild(T)&&(R=v.getImmediateChild(T)),(y=null!=R?a.filter.updateChild(v,T,R,de(l),g,p):s.eventCache.getNode().hasChild(T)?a.filter.updateChild(v,T,Y.EMPTY_NODE,de(l),g,p):v).isEmpty()&&s.serverCache.isFullyInitialized()&&(m=Ni(c,ci(s))).isLeafNode()&&(y=a.filter.updateFullNode(y,m,p))}return m=s.serverCache.isFullyInitialized()||null!=K(c,ne()),ar(s,y,m,a.filter.filtersNodes())}(a,s,C.path,c,h,p):function(a,s,l,c,h,p,m){if(null!=K(h,l))return s;var g=s.serverCache.isFiltered(),v=s.serverCache;if(null!=c.value){if(Z(l)&&v.isFullyInitialized()||v.isCompleteForPath(l))return bn(a,s,l,v.getNode().getChild(l),h,p,g,m);if(Z(l)){var y=new Ge(null);return v.getNode().forEachChild(nt,function(D,T){y=y.set(new ae(D),T)}),pt(a,s,l,y,h,p,g,m)}return s}var C=new Ge(null);return c.foreach(function(D,T){var R=me(l,D);v.isCompleteForPath(R)&&(C=C.set(D,v.getNode().getChild(R)))}),pt(a,s,l,C,h,p,g,m)}(a,s,C.path,C.affectedTree,c,h,p)}else{if(l.type!==st.LISTEN_COMPLETE)throw(0,t.g5)("Unknown operation type: "+l.type);m=function(a,s,l,c,h){var p=s.serverCache;return ha(a,oa(s,p.getNode(),p.isFullyInitialized()||Z(l),p.isFiltered()),l,c,fr,h)}(a,s,l.path,c,p)}var D=p.getChanges();return function(a,s,l){var c=s.eventCache;if(c.isFullyInitialized()){var h=c.getNode().isLeafNode()||c.getNode().isEmpty(),p=yo(a);(l.length>0||!a.eventCache.isFullyInitialized()||h&&!c.getNode().equals(p)||!c.getNode().getPriority().equals(p.getPriority()))&&l.push(Zs(yo(s)))}}(s,m,D),{viewCache:m,changes:D}}(a.processor_,h,s,l,c);return function(a,s){(0,t.hu)(s.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,t.hu)(s.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed")}(a.processor_,p.viewCache),(0,t.hu)(p.viewCache.serverCache.isFullyInitialized()||!h.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),a.viewCache_=p.viewCache,_r(a,p.changes,p.viewCache.eventCache.getNode(),null)}function _r(a,s,l,c){return function(a,s,l,c){var h=[],p=[];return s.forEach(function(m){"child_changed"===m.type&&a.index_.indexedValueChanged(m.oldSnap,m.snapshotNode)&&p.push(function(a,s){return{type:"child_moved",snapshotNode:s,childName:a}}(m.childName,m.snapshotNode))}),Fi(a,h,"child_removed",s,c,l),Fi(a,h,"child_added",s,c,l),Fi(a,h,"child_moved",p,c,l),Fi(a,h,"child_changed",s,c,l),Fi(a,h,"value",s,c,l),h}(a.eventGenerator_,s,l,c?[c]:a.eventRegistrations_)}var Bt,kn,To=function(){this.views=new Map};function Cn(a,s,l,c){var h,p,m=s.source.queryId;if(null!==m){var g=a.views.get(m);return(0,t.hu)(null!=g,"SyncTree gave us an op for an invalid query."),xo(g,s,l,c)}var v=[];try{for(var y=(0,k.XA)(a.views.values()),C=y.next();!C.done;C=y.next())v=v.concat(xo(g=C.value,s,l,c))}catch(D){h={error:D}}finally{try{C&&!C.done&&(p=y.return)&&p.call(y)}finally{if(h)throw h.error}}return v}function vr(a,s,l,c,h){var m=a.views.get(s._queryIdentifier);if(!m){var g=Ni(l,h?c:null),v=!1;g?v=!0:c instanceof Y?(g=pr(l,c),v=!1):(g=Y.EMPTY_NODE,v=!1);var y=sr(new Lt(g,v,!1),new Lt(c,h,!1));return new bd(s,y)}return m}function Ao(a){var s,l,c=[];try{for(var h=(0,k.XA)(a.views.values()),p=h.next();!p.done;p=h.next()){var m=p.value;m.query._queryParams.loadsAllData()||c.push(m)}}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}return c}function Nt(a,s){var l,c,h=null;try{for(var p=(0,k.XA)(a.views.values()),m=p.next();!m.done;m=p.next())h=h||fa(m.value,s)}catch(v){l={error:v}}finally{try{m&&!m.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}return h}function Ro(a,s){return s._queryParams.loadsAllData()?wn(a):a.views.get(s._queryIdentifier)}function Io(a,s){return null!=Ro(a,s)}function Qt(a){return null!=wn(a)}function wn(a){var s,l;try{for(var c=(0,k.XA)(a.views.values()),h=c.next();!h.done;h=c.next()){var p=h.value;if(p.query._queryParams.loadsAllData())return p}}catch(m){s={error:m}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}return null}var kd=1,br=function(s){this.listenProvider_=s,this.syncPointTree_=new Ge(null),this.pendingWriteTree_={visibleWrites:$e.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Oo(a,s,l,c,h){return function(a,s,l,c,h){(0,t.hu)(c>a.lastWriteId,"Stacking an older write on top of newer ones"),void 0===h&&(h=!0),a.allWrites.push({path:s,snap:l,writeId:c,visible:h}),h&&(a.visibleWrites=vn(a.visibleWrites,s,l)),a.lastWriteId=c}(a.pendingWriteTree_,s,l,c,h),h?Gi(a,new fe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,l)):[]}function Vt(a,s,l){void 0===l&&(l=!1);var c=function(a,s){for(var l=0;l<a.allWrites.length;l++){var c=a.allWrites[l];if(c.writeId===s)return c}return null}(a.pendingWriteTree_,s);if(function(a,s){var l=a.allWrites.findIndex(function(y){return y.writeId===s});(0,t.hu)(l>=0,"removeWrite called with nonexistent writeId.");var c=a.allWrites[l];a.allWrites.splice(l,1);for(var h=c.visible,p=!1,m=a.allWrites.length-1;h&&m>=0;){var g=a.allWrites[m];g.visible&&(m>=l&&fd(g,c.path)?h=!1:be(c.path,g.path)&&(p=!0)),m--}return!!h&&(p?(function(a){a.visibleWrites=hr(a.allWrites,cu,ne()),a.lastWriteId=a.allWrites.length>0?a.allWrites[a.allWrites.length-1].writeId:-1}(a),!0):(c.snap?a.visibleWrites=sa(a.visibleWrites,c.path):Te(c.children,function(y){a.visibleWrites=sa(a.visibleWrites,me(c.path,y))}),!0))}(a.pendingWriteTree_,s)){var p=new Ge(null);return null!=c.snap?p=p.set(ne(),!0):Te(c.children,function(m){p=p.set(new ae(m),!0)}),Gi(a,new na(c.path,p,l))}return[]}function $t(a,s,l){return Gi(a,new fe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,l))}function Fo(a,s,l,c){var h=s._path,p=a.syncPointTree_.get(h),m=[];if(p&&("default"===s._queryIdentifier||Io(p,s))){var g=function(a,s,l,c){var h,p,m=s._queryIdentifier,g=[],v=[],y=Qt(a);if("default"===m)try{for(var C=(0,k.XA)(a.views.entries()),D=C.next();!D.done;D=C.next()){var I,T=(0,k.CR)(D.value,2),R=T[0];v=v.concat(yn(I=T[1],l,c)),Md(I)&&(a.views.delete(R),I.query._queryParams.loadsAllData()||g.push(I.query))}}catch(V){h={error:V}}finally{try{D&&!D.done&&(p=C.return)&&p.call(C)}finally{if(h)throw h.error}}else(I=a.views.get(m))&&(v=v.concat(yn(I,l,c)),Md(I)&&(a.views.delete(m),I.query._queryParams.loadsAllData()||g.push(I.query)));return y&&!Qt(a)&&g.push(new((0,t.hu)(Bt,"Reference.ts has not been loaded"),Bt)(s._repo,s._path)),{removed:g,events:v}}(p,s,l,c);(function(a){return 0===a.views.size})(p)&&(a.syncPointTree_=a.syncPointTree_.remove(h));var v=g.removed;m=g.events;var y=-1!==v.findIndex(function(De){return De._queryParams.loadsAllData()}),C=a.syncPointTree_.findOnPath(h,function(De,ct){return Qt(ct)});if(y&&!C){var D=a.syncPointTree_.subtree(h);if(!D.isEmpty())for(var T=function(a){return a.fold(function(s,l,c){if(l&&Qt(l))return[wn(l)];var p=[];return l&&(p=Ao(l)),Te(c,function(m,g){p=p.concat(g)}),p})}(D),R=0;R<T.length;++R){var I=T[R],V=I.query,N=Lo(a,I);a.listenProvider_.startListening(pi(V),xn(a,V),N.hashFn,N.onComplete)}}!C&&v.length>0&&!c&&(y?a.listenProvider_.stopListening(pi(s),null):v.forEach(function(De){var ct=a.queryToTagMap.get(Tn(De));a.listenProvider_.stopListening(pi(De),ct)})),function(a,s){for(var l=0;l<s.length;++l){var c=s[l];if(!c._queryParams.loadsAllData()){var h=Tn(c),p=a.queryToTagMap.get(h);a.queryToTagMap.delete(h),a.tagToQueryMap.delete(p)}}}(a,v)}return m}function Yi(a,s,l){var c=s._path,h=null,p=!1;a.syncPointTree_.foreachOnPath(c,function(V,N){var q=$(V,c);h=h||Nt(N,q),p=p||Qt(N)});var g,m=a.syncPointTree_.get(c);m?(p=p||Qt(m),h=h||Nt(m,ne())):(m=new To,a.syncPointTree_=a.syncPointTree_.set(c,m)),null!=h?g=!0:(g=!1,h=Y.EMPTY_NODE,a.syncPointTree_.subtree(c).foreachChild(function(V,N){var q=Nt(N,ne());q&&(h=h.updateImmediateChild(V,q))}));var y=Io(m,s);if(!y&&!s._queryParams.loadsAllData()){var C=Tn(s);(0,t.hu)(!a.queryToTagMap.has(C),"View does not exist, but we have a tag");var D=kd++;a.queryToTagMap.set(C,D),a.tagToQueryMap.set(D,C)}var R=function(a,s,l,c,h,p){var m=vr(a,s,c,h,p);return a.views.has(s._queryIdentifier)||a.views.set(s._queryIdentifier,m),function(a,s){a.eventRegistrations_.push(s)}(m,l),function(a,s){var l=a.viewCache_.eventCache,c=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Q,function(p,m){c.push(Ri(p,m))}),l.isFullyInitialized()&&c.push(Zs(l.getNode())),_r(a,c,l.getNode(),s)}(m,l)}(m,s,l,Mo(a.pendingWriteTree_,c),h,g);if(!y&&!p){var I=Ro(m,s);R=R.concat(function(a,s,l){var c=s._path,h=xn(a,s),p=Lo(a,l),m=a.listenProvider_.startListening(pi(s),h,p.hashFn,p.onComplete),g=a.syncPointTree_.subtree(c);if(h)(0,t.hu)(!Qt(g.value),"If we're adding a query, it shouldn't be shadowed");else for(var v=g.fold(function(D,T,R){if(!Z(D)&&T&&Qt(T))return[wn(T).query];var I=[];return T&&(I=I.concat(Ao(T).map(function(V){return V.query}))),Te(R,function(V,N){I=I.concat(N)}),I}),y=0;y<v.length;++y){var C=v[y];a.listenProvider_.stopListening(pi(C),xn(a,C))}return m}(a,s,I))}return R}function Sn(a,s,l){var h=a.pendingWriteTree_,p=a.syncPointTree_.findOnPath(s,function(m,g){var y=Nt(g,$(m,s));if(y)return y});return Bi(h,s,p,l,!0)}function Gi(a,s){return Cr(s,a.syncPointTree_,null,Mo(a.pendingWriteTree_,ne()))}function Cr(a,s,l,c){if(Z(a.path))return Po(a,s,l,c);var h=s.get(ne());null==l&&null!=h&&(l=Nt(h,ne()));var p=[],m=W(a.path),g=a.operationForChild(m),v=s.children.get(m);if(v&&g){var y=l?l.getImmediateChild(m):null,C=Do(c,m);p=p.concat(Cr(g,v,y,C))}return h&&(p=p.concat(Cn(h,a,c,l))),p}function Po(a,s,l,c){var h=s.get(ne());null==l&&null!=h&&(l=Nt(h,ne()));var p=[];return s.children.inorderTraversal(function(m,g){var v=l?l.getImmediateChild(m):null,y=Do(c,m),C=a.operationForChild(m);C&&(p=p.concat(Po(C,g,v,y)))}),h&&(p=p.concat(Cn(h,a,c,l))),p}function Lo(a,s){var l=s.query,c=xn(a,l);return{hashFn:function(){return(function(a){return a.viewCache_.serverCache.getNode()}(s)||Y.EMPTY_NODE).hash()},onComplete:function(h){if("ok"===h)return c?function(a,s,l){var c=Bo(a,l);if(c){var h=zi(c),p=h.path,m=h.queryId,g=$(p,s);return Mr(a,p,new mn(vo(m),g))}return[]}(a,l._path,c):function(a,s){return Gi(a,new mn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(a,l._path);var p=function(a,s){var l="Unknown Error";"too_big"===a?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===a?l="Client doesn't have permission to access the desired data.":"unavailable"===a&&(l="The service is unavailable");var c=new Error(a+" at "+s._path.toString()+": "+l);return c.code=a.toUpperCase(),c}(h,l);return Fo(a,l,null,p)}}}function xn(a,s){var l=Tn(s);return a.queryToTagMap.get(l)}function Tn(a){return a._path.toString()+"$"+a._queryIdentifier}function Bo(a,s){return a.tagToQueryMap.get(s)}function zi(a){var s=a.indexOf("$");return(0,t.hu)(-1!==s&&s<a.length-1,"Bad queryKey."),{queryId:a.substr(s+1),path:new ae(a.substr(0,s))}}function Mr(a,s,l){var c=a.syncPointTree_.get(s);return(0,t.hu)(c,"Missing sync point for query tag that we're tracking"),Cn(c,l,Mo(a.pendingWriteTree_,s),null)}function pi(a){return a._queryParams.loadsAllData()&&!a._queryParams.isDefault()?new((0,t.hu)(kn,"Reference.ts has not been loaded"),kn)(a._repo,a._path):a}var Ca=function(){function a(s){this.node_=s}return a.prototype.getImmediateChild=function(s){return new a(this.node_.getImmediateChild(s))},a.prototype.node=function(){return this.node_},a}(),gu=function(){function a(s,l){this.syncTree_=s,this.path_=l}return a.prototype.getImmediateChild=function(s){var l=me(this.path_,s);return new a(this.syncTree_,l)},a.prototype.node=function(){return Sn(this.syncTree_,this.path_)},a}(),Ho=function(a,s,l){return a&&"object"==typeof a?((0,t.hu)(".sv"in a,"Unexpected leaf node or priority contents"),"string"==typeof a[".sv"]?xd(a[".sv"],s,l):"object"==typeof a[".sv"]?vu(a[".sv"],s):void(0,t.hu)(!1,"Unexpected server value: "+JSON.stringify(a,null,2))):a},xd=function(a,s,l){switch(a){case"timestamp":return l.timestamp;default:(0,t.hu)(!1,"Unexpected server value: "+a)}},vu=function(a,s,l){a.hasOwnProperty("increment")||(0,t.hu)(!1,"Unexpected server value: "+JSON.stringify(a,null,2));var c=a.increment;"number"!=typeof c&&(0,t.hu)(!1,"Unexpected increment value: "+c);var h=s.node();if((0,t.hu)(null!=h,"Expected ChildrenNode.EMPTY_NODE for nulls"),!h.isLeafNode())return c;var m=h.getValue();return"number"!=typeof m?c:m+c},wr=function(a,s,l,c){return kr(s,new gu(l,a),c)},Ma=function(a,s,l){return kr(a,new Ca(s),l)};function kr(a,s,l){var p,c=a.getPriority().val(),h=Ho(c,s.getImmediateChild(".priority"),l);if(a.isLeafNode()){var m=a,g=Ho(m.getValue(),s,l);return g!==m.getValue()||h!==m.getPriority().val()?new Mt(g,ge(h)):a}var v=a;return p=v,h!==v.getPriority().val()&&(p=p.updatePriority(new Mt(h))),v.forEachChild(Q,function(y,C){var D=kr(C,s.getImmediateChild(y),l);D!==C&&(p=p.updateImmediateChild(y,D))}),p}var wa=function(s,l,c){void 0===s&&(s=""),void 0===l&&(l=null),void 0===c&&(c={children:{},childCount:0}),this.name=s,this.parent=l,this.node=c};function En(a,s){for(var l=s instanceof ae?s:new ae(s),c=a,h=W(l);null!==h;){var p=(0,t.DV)(c.node.children,h)||{children:{},childCount:0};c=new wa(h,c,p),h=W(l=de(l))}return c}function Ui(a){return a.node.value}function Yo(a,s){a.node.value=s,Da(a)}function Td(a){return a.node.childCount>0}function Dr(a,s){Te(a.node.children,function(l,c){s(new wa(l,a,c))})}function Ed(a,s,l,c){l&&!c&&s(a),Dr(a,function(h){Ed(h,s,!0,c)}),l&&c&&s(a)}function Sr(a){return new ae(null===a.parent?a.name:Sr(a.parent)+"/"+a.name)}function Da(a){null!==a.parent&&function(a,s,l){var c=function(a){return void 0===Ui(a)&&!Td(a)}(l),h=(0,t.r3)(a.node.children,s);c&&h?(delete a.node.children[s],a.node.childCount--,Da(a)):!c&&!h&&(a.node.children[s]=l.node,a.node.childCount++,Da(a))}(a.parent,a.name,a)}var Cu=/[\[\].#$\/\u0000-\u001F\u007F]/,Go=/[\[\].#$\u0000-\u001F\u007F]/,Xt=10485760,ze=function(a){return"string"==typeof a&&0!==a.length&&!Cu.test(a)},Sa=function(a){return"string"==typeof a&&0!==a.length&&!Go.test(a)},xr=function(a){return null===a||"string"==typeof a||"number"==typeof a&&!Kr(a)||a&&"object"==typeof a&&(0,t.r3)(a,".sv")},ft=function(a,s,l,c){c&&void 0===s||Tr((0,t.gK)(a,"value"),s,l)},Tr=function(a,s,l){var c=l instanceof ae?new Qe(l,a):l;if(void 0===s)throw new Error(a+"contains undefined "+ee(c));if("function"==typeof s)throw new Error(a+"contains a function "+ee(c)+" with contents = "+s.toString());if(Kr(s))throw new Error(a+"contains "+s.toString()+" "+ee(c));if("string"==typeof s&&s.length>Xt/3&&(0,t.ug)(s)>Xt)throw new Error(a+"contains a string greater than "+Xt+" utf8 bytes "+ee(c)+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){var h=!1,p=!1;if(Te(s,function(m,g){if(".value"===m)h=!0;else if(".priority"!==m&&".sv"!==m&&(p=!0,!ze(m)))throw new Error(a+" contains an invalid key ("+m+") "+ee(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(a,s){a.parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=(0,t.ug)(s),X(a)})(c,m),Tr(a,g,c),function(a){var s=a.parts_.pop();a.byteLength_-=(0,t.ug)(s),a.parts_.length>0&&(a.byteLength_-=1)}(c)}),h&&p)throw new Error(a+' contains ".value" child '+ee(c)+" in addition to actual children.")}},Ad=function(a,s,l,c){if(!c||void 0!==s){var h=(0,t.gK)(a,"values");if(!s||"object"!=typeof s||Array.isArray(s))throw new Error(h+" must be an object containing the children to replace.");var p=[];Te(s,function(m,g){var v=new ae(m);if(Tr(h,g,me(l,v)),".priority"===Ys(v)&&!xr(g))throw new Error(h+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");p.push(v)}),function(a,s){var l,c;for(l=0;l<s.length;l++)for(var h=Jn(c=s[l]),p=0;p<h.length;p++)if((".priority"!==h[p]||p!==h.length-1)&&!ze(h[p]))throw new Error(a+"contains an invalid key ("+h[p]+") in path "+c.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');s.sort(Ut);var m=null;for(l=0;l<s.length;l++){if(c=s[l],null!==m&&be(m,c))throw new Error(a+"contains a path "+m.toString()+" that is ancestor of another path "+c.toString());m=c}}(h,p)}},Ie=function(a,s,l){if(!l||void 0!==s){if(Kr(s))throw new Error((0,t.gK)(a,"priority")+"is "+s.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xr(s))throw new Error((0,t.gK)(a,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mu=function(a,s,l){if(!l||void 0!==s)switch(s){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,t.gK)(a,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Xe=function(a,s,l,c){if(!(c&&void 0===l||ze(l)))throw new Error((0,t.gK)(a,s)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Er=function(a,s,l,c){if(!(c&&void 0===l||Sa(l)))throw new Error((0,t.gK)(a,s)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},at=function(a,s){if(".info"===W(s))throw new Error(a+" failed = Can't modify data under /.info/")},Uo=function(a,s){var l=s.path.toString();if("string"!=typeof s.repoInfo.host||0===s.repoInfo.host.length||!ze(s.repoInfo.namespace)&&"localhost"!==s.repoInfo.host.split(":")[0]||0!==l.length&&!function(a){return a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Sa(a)}(l))throw new Error((0,t.gK)(a,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},xa=function(a,s,l,c){if((!c||void 0!==l)&&"boolean"!=typeof l)throw new Error((0,t.gK)(a,s)+"must be a boolean.")},Id=function(){this.eventLists_=[],this.recursionDepth_=0};function qo(a,s){for(var l=null,c=0;c<s.length;c++){var h=s[c],p=h.getPath();null!==l&&!Si(p,l.path)&&(a.eventLists_.push(l),l=null),null===l&&(l={events:[],path:p}),l.events.push(h)}l&&a.eventLists_.push(l)}function mt(a,s,l){qo(a,l),Ar(a,function(c){return Si(c,s)})}function Ke(a,s,l){qo(a,l),Ar(a,function(c){return be(c,s)||be(s,c)})}function Ar(a,s){a.recursionDepth_++;for(var l=!0,c=0;c<a.eventLists_.length;c++){var h=a.eventLists_[c];h&&(s(h.path)?(qi(a.eventLists_[c]),a.eventLists_[c]=null):l=!1)}l&&(a.eventLists_=[]),a.recursionDepth_--}function qi(a){for(var s=0;s<a.events.length;s++){var l=a.events[s];if(null!==l){a.events[s]=null;var c=l.getEventRunner();Se&&ve("event: "+l.toString()),zt(c)}}}var Ta="repo_interrupt",Ea=function(){function a(s,l,c,h){this.repoInfo_=s,this.forceRestClient_=l,this.authTokenProvider_=c,this.appCheckProvider_=h,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Id,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_o(),this.transactionQueueTree_=new wa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return a.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},a}();function Aa(a){var l=a.infoData_.getNode(new ae(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Rn(a){return function(a){return(a=a||{}).timestamp=a.timestamp||(new Date).getTime(),a}({timestamp:Aa(a)})}function Ra(a,s,l,c,h){a.dataUpdateCount++;var p=new ae(s);l=a.interceptServerDataCallback_?a.interceptServerDataCallback_(s,l):l;var m=[];if(h)if(c){var g=(0,t.UI)(l,function(T){return ge(T)});m=function(a,s,l,c){var h=Bo(a,c);if(h){var p=zi(h),m=p.path,g=p.queryId,v=$(m,s),y=Ge.fromObject(l);return Mr(a,m,new _n(vo(g),v,y))}return[]}(a.serverSyncTree_,p,g,h)}else{var v=ge(l);m=function(a,s,l,c){var h=Bo(a,c);if(null!=h){var p=zi(h),m=p.path,g=p.queryId,v=$(m,s);return Mr(a,m,new fe(vo(g),v,l))}return[]}(a.serverSyncTree_,p,v,h)}else if(c){var y=(0,t.UI)(l,function(T){return ge(T)});m=function(a,s,l){var c=Ge.fromObject(l);return Gi(a,new _n({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,c))}(a.serverSyncTree_,p,y)}else{var C=ge(l);m=$t(a.serverSyncTree_,p,C)}var D=p;m.length>0&&(D=Ue(a,p)),Ke(a.eventQueue_,D,m)}function fi(a,s){Kt(a,"connected",s),!1===s&&function(a){ji(a,"onDisconnectEvents");var s=Rn(a),l=_o();Ii(a.onDisconnect_,ne(),function(h,p){var m=wr(h,p,a.serverSyncTree_,s);fn(l,h,m)});var c=[];Ii(l,ne(),function(h,p){c=c.concat($t(a.serverSyncTree_,h,p));var m=es(a,h);Ue(a,m)}),a.onDisconnect_=_o(),Ke(a.eventQueue_,ne(),c)}(a)}function Kt(a,s,l){var c=new ae("/.info/"+s),h=ge(l);a.infoData_.updateSnapshot(c,h);var p=$t(a.infoSyncTree_,c,h);Ke(a.eventQueue_,c,p)}function Ht(a){return a.nextWriteId_++}function Zo(a,s,l,c,h){ji(a,"set",{path:s.toString(),value:l,priority:c});var p=Rn(a),m=ge(l,c),g=Sn(a.serverSyncTree_,s),v=Ma(m,g,p),y=Ht(a),C=Oo(a.serverSyncTree_,s,v,y,!0);qo(a.eventQueue_,C),a.server_.put(s.toString(),m.val(!0),function(T,R){var I="ok"===T;I||pe("set at "+s+" failed: "+T);var V=Vt(a.serverSyncTree_,y,!I);Ke(a.eventQueue_,s,V),lt(0,h,T,R)});var D=es(a,s);Ue(a,D),Ke(a.eventQueue_,D,[])}function Wo(a,s,l){a.server_.onDisconnectCancel(s.toString(),function(c,h){"ok"===c&&Xs(a.onDisconnect_,s),lt(0,l,c,h)})}function Ir(a,s,l,c){var h=ge(l);a.server_.onDisconnectPut(s.toString(),h.val(!0),function(p,m){"ok"===p&&fn(a.onDisconnect_,s,h),lt(0,c,p,m)})}function In(a,s,l){var c;c=".info"===W(s._path)?Fo(a.infoSyncTree_,s,l):Fo(a.serverSyncTree_,s,l),mt(a.eventQueue_,s._path,c)}function Qo(a){a.persistentConnection_&&a.persistentConnection_.interrupt(Ta)}function ji(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var c="";a.persistentConnection_&&(c=a.persistentConnection_.id+":"),ve.apply(void 0,(0,k.ev)([c],(0,k.CR)(s)))}function lt(a,s,l,c){s&&zt(function(){if("ok"===l)s(null);else{var h=(l||"error").toUpperCase(),p=h;c&&(p+=": "+c);var m=new Error(p);m.code=h,s(m)}})}function Xo(a,s,l){return Sn(a.serverSyncTree_,s,l)||Y.EMPTY_NODE}function ei(a,s){if(void 0===s&&(s=a.transactionQueueTree_),s||Fn(a,s),Ui(s)){var l=Pr(a,s);(0,t.hu)(l.length>0,"Sending zero length transaction queue"),l.every(function(h){return 0===h.status})&&function(a,s,l){for(var c=l.map(function(T){return T.currentWriteId}),h=Xo(a,s,c),p=h,m=h.hash(),g=0;g<l.length;g++){var v=l[g];(0,t.hu)(0===v.status,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;var y=$(s,v.path);p=p.updateChild(y,v.currentOutputSnapshotRaw)}var C=p.val(!0),D=s;a.server_.put(D.toString(),C,function(T){ji(a,"transaction put response",{path:D.toString(),status:T});var R=[];if("ok"===T){for(var I=[],V=function(q){l[q].status=2,R=R.concat(Vt(a.serverSyncTree_,l[q].currentWriteId)),l[q].onComplete&&I.push(function(){return l[q].onComplete(null,!0,l[q].currentOutputSnapshotResolved)}),l[q].unwatcher()},N=0;N<l.length;N++)V(N);for(Fn(a,En(a.transactionQueueTree_,s)),ei(a,a.transactionQueueTree_),Ke(a.eventQueue_,s,R),N=0;N<I.length;N++)zt(I[N])}else{if("datastale"===T)for(N=0;N<l.length;N++)l[N].status=3===l[N].status?4:0;else for(pe("transaction at "+D.toString()+" failed: "+T),N=0;N<l.length;N++)l[N].status=4,l[N].abortReason=T;Ue(a,s)}},m)}(a,Sr(s),l)}else Td(s)&&Dr(s,function(h){ei(a,h)})}function Ue(a,s){var l=Fr(a,s),c=Sr(l);return function(a,s,l){if(0!==s.length){for(var c=[],h=[],m=s.filter(function(y){return 0===y.status}).map(function(y){return y.currentWriteId}),g=function(y){var R,C=s[y],D=$(l,C.path),T=!1;if((0,t.hu)(null!==D,"rerunTransactionsUnderNode_: relativePath should not be null."),4===C.status)T=!0,R=C.abortReason,h=h.concat(Vt(a.serverSyncTree_,C.currentWriteId,!0));else if(0===C.status)if(C.retryCount>=25)T=!0,R="maxretry",h=h.concat(Vt(a.serverSyncTree_,C.currentWriteId,!0));else{var I=Xo(a,C.path,m);C.currentInputSnapshot=I;var V=s[y].update(I.val());if(void 0!==V){Tr("transaction failed: Data returned ",V,C.path);var N=ge(V);"object"==typeof V&&null!=V&&(0,t.r3)(V,".priority")||(N=N.updatePriority(I.getPriority()));var De=C.currentWriteId,ct=Rn(a),Nn=Ma(N,I,ct);C.currentOutputSnapshotRaw=N,C.currentOutputSnapshotResolved=Nn,C.currentWriteId=Ht(a),m.splice(m.indexOf(De),1),h=(h=h.concat(Oo(a.serverSyncTree_,C.path,Nn,C.currentWriteId,C.applyLocally))).concat(Vt(a.serverSyncTree_,De,!0))}else T=!0,R="nodata",h=h.concat(Vt(a.serverSyncTree_,C.currentWriteId,!0))}Ke(a.eventQueue_,l,h),h=[],T&&(s[y].status=2,setTimeout(s[y].unwatcher,Math.floor(0)),s[y].onComplete&&c.push("nodata"===R?function(){return s[y].onComplete(null,!1,s[y].currentInputSnapshot)}:function(){return s[y].onComplete(new Error(R),!1,null)}))},v=0;v<s.length;v++)g(v);for(Fn(a,a.transactionQueueTree_),v=0;v<c.length;v++)zt(c[v]);ei(a,a.transactionQueueTree_)}}(a,Pr(a,l),c),c}function Fr(a,s){var l,c=a.transactionQueueTree_;for(l=W(s);null!==l&&void 0===Ui(c);)c=En(c,l),l=W(s=de(s));return c}function Pr(a,s){var l=[];return On(a,s,l),l.sort(function(c,h){return c.order-h.order}),l}function On(a,s,l){var c=Ui(s);if(c)for(var h=0;h<c.length;h++)l.push(c[h]);Dr(s,function(p){On(a,p,l)})}function Fn(a,s){var l=Ui(s);if(l){for(var c=0,h=0;h<l.length;h++)2!==l[h].status&&(l[c]=l[h],c++);l.length=c,Yo(s,l.length>0?l:void 0)}Dr(s,function(p){Fn(a,p)})}function es(a,s){var l=Sr(Fr(a,s)),c=En(a.transactionQueueTree_,s);return function(a,s,l){for(var c=a.parent;null!==c;){if(s(c))return!0;c=c.parent}}(c,function(h){Fa(a,h)}),Fa(a,c),Ed(c,function(h){Fa(a,h)}),l}function Fa(a,s){var l=Ui(s);if(l){for(var c=[],h=[],p=-1,m=0;m<l.length;m++)3===l[m].status||(1===l[m].status?((0,t.hu)(p===m-1,"All SENT items should be at beginning of queue."),p=m,l[m].status=3,l[m].abortReason="set"):((0,t.hu)(0===l[m].status,"Unexpected transaction status in abort"),l[m].unwatcher(),h=h.concat(Vt(a.serverSyncTree_,l[m].currentWriteId,!0)),l[m].onComplete&&c.push(l[m].onComplete.bind(null,new Error("set"),!1,null))));for(-1===p?Yo(s,void 0):l.length=p+1,Ke(a.eventQueue_,Sr(s),h),m=0;m<c.length;m++)zt(c[m])}}var Pa=function(a,s){var l=Su(a),c=l.namespace;return"firebase.com"===l.domain&&Me(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!c||"undefined"===c)&&"localhost"!==l.domain&&Me("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Fs(l.host,l.secure,c,s,"ws"===l.scheme||"wss"===l.scheme,"",c!==l.subdomain),path:new ae(l.pathString)}},Su=function(a){var s="",l="",c="",h="",p="",m=!0,g="https",v=443;if("string"==typeof a){var y=a.indexOf("//");y>=0&&(g=a.substring(0,y-1),a=a.substring(y+2));var C=a.indexOf("/");-1===C&&(C=a.length);var D=a.indexOf("?");-1===D&&(D=a.length),s=a.substring(0,Math.min(C,D)),C<D&&(h=function(a){for(var s="",l=a.split("/"),c=0;c<l.length;c++)if(l[c].length>0){var h=l[c];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch(p){}s+="/"+h}return s}(a.substring(C,D)));var T=function(a){var s,l,c={};"?"===a.charAt(0)&&(a=a.substring(1));try{for(var h=(0,k.XA)(a.split("&")),p=h.next();!p.done;p=h.next()){var m=p.value;if(0!==m.length){var g=m.split("=");2===g.length?c[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):pe("Invalid query segment '"+m+"' in query '"+a+"'")}}}catch(v){s={error:v}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}return c}(a.substring(Math.min(a.length,D)));(y=s.indexOf(":"))>=0?(m="https"===g||"wss"===g,v=parseInt(s.substring(y+1),10)):y=s.length;var R=s.slice(0,y);if("localhost"===R.toLowerCase())l="localhost";else if(R.split(".").length<=2)l=R;else{var I=s.indexOf(".");c=s.substring(0,I).toLowerCase(),l=s.substring(I+1),p=c}"ns"in T&&(p=T.ns)}return{host:s,port:v,domain:l,subdomain:c,secure:m,scheme:g,pathString:h,namespace:p}},Vd=function(){function a(s,l,c,h){this.eventType=s,this.eventRegistration=l,this.snapshot=c,this.prevName=h}return a.prototype.getPath=function(){var s=this.snapshot.ref;return"value"===this.eventType?s._path:s.parent._path},a.prototype.getEventType=function(){return this.eventType},a.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},a.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,t.Pz)(this.snapshot.exportVal())},a}(),Hd=function(){function a(s,l,c){this.eventRegistration=s,this.error=l,this.path=c}return a.prototype.getPath=function(){return this.path},a.prototype.getEventType=function(){return"cancel"},a.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},a.prototype.toString=function(){return this.path.toString()+":cancel"},a}(),Yd=function(){function a(s,l){this.snapshotCallback=s,this.cancelCallback=l}return a.prototype.onValue=function(s,l){this.snapshotCallback.call(null,s,l)},a.prototype.onCancel=function(s){return(0,t.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)},Object.defineProperty(a.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),a.prototype.matches=function(s){return this.snapshotCallback===s.snapshotCallback||this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context},a}(),ts=function(){function a(s,l){this._repo=s,this._path=l}return a.prototype.cancel=function(){var s=new t.BH;return Wo(this._repo,this._path,s.wrapCallback(function(){})),s.promise},a.prototype.remove=function(){at("OnDisconnect.remove",this._path);var s=new t.BH;return Ir(this._repo,this._path,null,s.wrapCallback(function(){})),s.promise},a.prototype.set=function(s){at("OnDisconnect.set",this._path),ft("OnDisconnect.set",s,this._path,!1);var l=new t.BH;return Ir(this._repo,this._path,s,l.wrapCallback(function(){})),l.promise},a.prototype.setWithPriority=function(s,l){at("OnDisconnect.setWithPriority",this._path),ft("OnDisconnect.setWithPriority",s,this._path,!1),Ie("OnDisconnect.setWithPriority",l,!1);var c=new t.BH;return function(a,s,l,c,h){var p=ge(l,c);a.server_.onDisconnectPut(s.toString(),p.val(!0),function(m,g){"ok"===m&&fn(a.onDisconnect_,s,p),lt(0,h,m,g)})}(this._repo,this._path,s,l,c.wrapCallback(function(){})),c.promise},a.prototype.update=function(s){at("OnDisconnect.update",this._path),Ad("OnDisconnect.update",s,this._path,!1);var l=new t.BH;return function(a,s,l,c){if((0,t.xb)(l))return ve("onDisconnect().update() called with empty data.  Don't do anything."),void lt(0,c,"ok",void 0);a.server_.onDisconnectMerge(s.toString(),l,function(h,p){"ok"===h&&Te(l,function(m,g){var v=ge(g);fn(a.onDisconnect_,me(s,m),v)}),lt(0,c,h,p)})}(this._repo,this._path,s,l.wrapCallback(function(){})),l.promise},a}(),dt=function(){function a(s,l,c,h){this._repo=s,this._path=l,this._queryParams=c,this._orderByCalled=h}return Object.defineProperty(a.prototype,"key",{get:function(){return Z(this._path)?null:Ys(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ref",{get:function(){return new et(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_queryIdentifier",{get:function(){var s=$s(this._queryParams),l=Rs(s);return"{}"===l?"default":l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_queryObject",{get:function(){return $s(this._queryParams)},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(s){if(!((s=(0,t.m9)(s))instanceof a))return!1;var l=this._repo===s._repo,c=Si(this._path,s._path);return l&&c&&this._queryIdentifier===s._queryIdentifier},a.prototype.toJSON=function(){return this.toString()},a.prototype.toString=function(){return this._repo.toString()+function(a){for(var s="",l=a.pieceNum_;l<a.pieces_.length;l++)""!==a.pieces_[l]&&(s+="/"+encodeURIComponent(String(a.pieces_[l])));return s||"/"}(this._path)},a}();function mi(a,s){if(!0===a._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function _t(a){var s=null,l=null;if(a.hasStart()&&(s=a.getIndexStartValue()),a.hasEnd()&&(l=a.getIndexEndValue()),a.getIndex()===nt){var c="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",h="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(a.hasStart()){if(a.getIndexStartName()!==Gt)throw new Error(c);if("string"!=typeof s)throw new Error(h)}if(a.hasEnd()){if(a.getIndexEndName()!==yt)throw new Error(c);if("string"!=typeof l)throw new Error(h)}}else if(a.getIndex()===Q){if(null!=s&&!xr(s)||null!=l&&!xr(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,t.hu)(a.getIndex()instanceof ot||a.getIndex()===hn,"unknown index type."),null!=s&&"object"==typeof s||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _i(a){if(a.hasStart()&&a.hasEnd()&&a.hasLimit()&&!a.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var et=function(a){function s(l,c){return a.call(this,l,c,new uo,!1)||this}return(0,k.ZT)(s,a),Object.defineProperty(s.prototype,"parent",{get:function(){var l=td(this._path);return null===l?null:new s(this._repo,l)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){for(var l=this;null!==l.parent;)l=l.parent;return l},enumerable:!1,configurable:!0}),s}(dt),is=function(){function a(s,l,c){this._node=s,this.ref=l,this._index=c}return Object.defineProperty(a.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),a.prototype.child=function(s){var l=new ae(s),c=Dt(this.ref,s);return new a(this._node.getChild(l),c,Q)},a.prototype.exists=function(){return!this._node.isEmpty()},a.prototype.exportVal=function(){return this._node.val(!0)},a.prototype.forEach=function(s){var l=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(h,p){return s(new a(p,Dt(l.ref,h),Q))})},a.prototype.hasChild=function(s){var l=new ae(s);return!this._node.getChild(l).isEmpty()},a.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},a.prototype.toJSON=function(){return this.exportVal()},a.prototype.val=function(){return this._node.val()},a}();function Gd(a,s){return(a=(0,t.m9)(a))._checkNotDeleted("ref"),void 0!==s?Dt(a._root,s):a._root}function Pn(a,s){(a=(0,t.m9)(a))._checkNotDeleted("refFromURL");var l=Pa(s,a._repo.repoInfo_.nodeAdmin);Uo("refFromURL",l);var c=l.repoInfo;return!a._repo.repoInfo_.isCustomHost()&&c.host!==a._repo.repoInfo_.host&&Me("refFromURL: Host name does not match the current database: (found "+c.host+" but expected "+a._repo.repoInfo_.host+")"),Gd(a,l.path.toString())}function Dt(a,s){return null===W((a=(0,t.m9)(a))._path)?((l=s)&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Er("child","path",l,!1)):Er("child","path",s,!1),new et(a._repo,me(a._path,s));var l}function La(a,s){a=(0,t.m9)(a),at("push",a._path),ft("push",s,a._path,!0);var m,l=Aa(a._repo),c=Ai(l),h=Dt(a,c),p=Dt(a,c);return m=null!=s?Lr(p,s).then(function(){return p}):Promise.resolve(p),h.then=m.then.bind(m),h.catch=m.then.bind(m,void 0),h}function xu(a){return at("remove",a._path),Lr(a,null)}function Lr(a,s){a=(0,t.m9)(a),at("set",a._path),ft("set",s,a._path,!1);var l=new t.BH;return Zo(a._repo,a._path,s,null,l.wrapCallback(function(){})),l.promise}function zd(a,s){a=(0,t.m9)(a),at("setPriority",a._path),Ie("setPriority",s,!1);var l=new t.BH;return Zo(a._repo,me(a._path,".priority"),s,null,l.wrapCallback(function(){})),l.promise}function Ud(a,s,l){if(at("setWithPriority",a._path),ft("setWithPriority",s,a._path,!1),Ie("setWithPriority",l,!1),".length"===a.key||".keys"===a.key)throw"setWithPriority failed: "+a.key+" is a read-only object.";var c=new t.BH;return Zo(a._repo,a._path,s,l,c.wrapCallback(function(){})),c.promise}function Tu(a,s){Ad("update",s,a._path,!1);var l=new t.BH;return function(a,s,l,c){ji(a,"update",{path:s.toString(),value:l});var h=!0,p=Rn(a),m={};if(Te(l,function(y,C){h=!1,m[y]=wr(me(s,y),ge(C),a.serverSyncTree_,p)}),h)ve("update() called with empty data.  Don't do anything."),lt(0,c,"ok",void 0);else{var g=Ht(a),v=function(a,s,l,c){!function(a,s,l,c){(0,t.hu)(c>a.lastWriteId,"Stacking an older merge on top of newer ones"),a.allWrites.push({path:s,children:l,writeId:c,visible:!0}),a.visibleWrites=lr(a.visibleWrites,s,l),a.lastWriteId=c}(a.pendingWriteTree_,s,l,c);var h=Ge.fromObject(l);return Gi(a,new _n({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,h))}(a.serverSyncTree_,s,m,g);qo(a.eventQueue_,v),a.server_.merge(s.toString(),l,function(y,C){var D="ok"===y;D||pe("update at "+s+" failed: "+y);var T=Vt(a.serverSyncTree_,g,!D),R=T.length>0?Ue(a,s):s;Ke(a.eventQueue_,R,T),lt(0,c,y,C)}),Te(l,function(y){var C=es(a,me(s,y));Ue(a,C)}),Ke(a.eventQueue_,s,[])}}(a._repo,a._path,s,l.wrapCallback(function(){})),l.promise}function Br(a){return function(a,s){var l=function(a,s){var l=s._path,c=null;a.syncPointTree_.foreachOnPath(l,function(y,C){var D=$(y,l);c=c||Nt(C,D)});var h=a.syncPointTree_.get(l);h?c=c||Nt(h,ne()):(h=new To,a.syncPointTree_=a.syncPointTree_.set(l,h));var p=null!=c,m=p?new Lt(c,!0,!1):null;return function(a){return yo(a.viewCache_)}(vr(h,s,Mo(a.pendingWriteTree_,s._path),p?m.getNode():Y.EMPTY_NODE,p))}(a.serverSyncTree_,s);return null!=l?Promise.resolve(l):a.server_.get(s).then(function(c){var h=ge(c).withIndex(s._queryParams.getIndex()),p=$t(a.serverSyncTree_,s._path,h);return mt(a.eventQueue_,s._path,p),Promise.resolve(h)},function(c){return ji(a,"get for query "+(0,t.Pz)(s)+" failed: "+c),Promise.reject(new Error(c))})}((a=(0,t.m9)(a))._repo,a).then(function(s){return new is(s,new et(a._repo,a._path),a._queryParams.getIndex())})}var Zi=function(){function a(s){this.callbackContext=s}return a.prototype.respondsTo=function(s){return"value"===s},a.prototype.createEvent=function(s,l){var c=l._queryParams.getIndex();return new Vd("value",this,new is(s.snapshotNode,new et(l._repo,l._path),c))},a.prototype.getEventRunner=function(s){var l=this;return"cancel"===s.getEventType()?function(){return l.callbackContext.onCancel(s.error)}:function(){return l.callbackContext.onValue(s.snapshot,null)}},a.prototype.createCancelEvent=function(s,l){return this.callbackContext.hasCancelCallback?new Hd(this,s,l):null},a.prototype.matches=function(s){return s instanceof a&&(!s.callbackContext||!this.callbackContext||s.callbackContext.matches(this.callbackContext))},a.prototype.hasAnyCallback=function(){return null!==this.callbackContext},a}(),Ba=function(){function a(s,l){this.eventType=s,this.callbackContext=l}return a.prototype.respondsTo=function(s){var l="children_added"===s?"child_added":s;return this.eventType===("children_removed"===l?"child_removed":l)},a.prototype.createCancelEvent=function(s,l){return this.callbackContext.hasCancelCallback?new Hd(this,s,l):null},a.prototype.createEvent=function(s,l){(0,t.hu)(null!=s.childName,"Child events should have a childName.");var c=Dt(new et(l._repo,l._path),s.childName),h=l._queryParams.getIndex();return new Vd(s.type,this,new is(s.snapshotNode,c,h),s.prevName)},a.prototype.getEventRunner=function(s){var l=this;return"cancel"===s.getEventType()?function(){return l.callbackContext.onCancel(s.error)}:function(){return l.callbackContext.onValue(s.snapshot,s.prevName)}},a.prototype.matches=function(s){return s instanceof a&&this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext))},a.prototype.hasAnyCallback=function(){return!!this.callbackContext},a}();function ti(a,s,l,c,h){var p;if("object"==typeof c&&(p=void 0,h=c),"function"==typeof c&&(p=c),h&&h.onlyOnce){var m=l,g=function(C,D){In(a._repo,a,y),m(C,D)};g.userCallback=l.userCallback,g.context=l.context,l=g}var v=new Yd(l,p||void 0),y="value"===s?new Zi(v):new Ba(s,v);return function(a,s,l){var c;c=".info"===W(s._path)?Yi(a.infoSyncTree_,s,l):Yi(a.serverSyncTree_,s,l),mt(a.eventQueue_,s._path,c)}(a._repo,a,y),function(){return In(a._repo,a,y)}}function Na(a,s,l,c){return ti(a,"value",s,l,c)}function qd(a,s,l,c){return ti(a,"child_added",s,l,c)}function jd(a,s,l,c){return ti(a,"child_changed",s,l,c)}function Zd(a,s,l,c){return ti(a,"child_moved",s,l,c)}function Wd(a,s,l,c){return ti(a,"child_removed",s,l,c)}function St(a,s,l){var c=null,h=l?new Yd(l):null;"value"===s?c=new Zi(h):s&&(c=new Ba(s,h)),In(a._repo,a,c)}var ke=function(){},Va=function(a){function s(l,c){var h=a.call(this)||this;return h._value=l,h._key=c,h}return(0,k.ZT)(s,a),s.prototype._apply=function(l){ft("endAt",this._value,l._path,!0);var c=fo(l._queryParams,this._value,this._key);if(_i(c),_t(c),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new dt(l._repo,l._path,c,l._orderByCalled)},s}(ke);function Jd(a,s){return Xe("endAt","key",s,!0),new Va(a,s)}var ns=function(a){function s(l,c){var h=a.call(this)||this;return h._value=l,h._key=c,h}return(0,k.ZT)(s,a),s.prototype._apply=function(l){ft("endBefore",this._value,l._path,!1);var c=function(a,s,l){var h;return a.index_===nt?("string"==typeof s&&(s=co(s)),h=fo(a,s,l)):h=fo(a,s,null==l?Gt:co(l)),h.endBeforeSet_=!0,h}(l._queryParams,this._value,this._key);if(_i(c),_t(c),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new dt(l._repo,l._path,c,l._orderByCalled)},s}(ke);function Qd(a,s){return Xe("endBefore","key",s,!0),new ns(a,s)}var Nr=function(a){function s(l,c){var h=a.call(this)||this;return h._value=l,h._key=c,h}return(0,k.ZT)(s,a),s.prototype._apply=function(l){ft("startAt",this._value,l._path,!0);var c=po(l._queryParams,this._value,this._key);if(_i(c),_t(c),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new dt(l._repo,l._path,c,l._orderByCalled)},s}(ke);function rs(a,s){return void 0===a&&(a=null),Xe("startAt","key",s,!0),new Nr(a,s)}var Eu=function(a){function s(l,c){var h=a.call(this)||this;return h._value=l,h._key=c,h}return(0,k.ZT)(s,a),s.prototype._apply=function(l){ft("startAfter",this._value,l._path,!1);var c=function(a,s,l){var c;return a.index_===nt?("string"==typeof s&&(s=nd(s)),c=po(a,s,l)):c=po(a,s,null==l?yt:nd(l)),c.startAfterSet_=!0,c}(l._queryParams,this._value,this._key);if(_i(c),_t(c),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new dt(l._repo,l._path,c,l._orderByCalled)},s}(ke);function Ha(a,s){return Xe("startAfter","key",s,!0),new Eu(a,s)}var Ya=function(a){function s(l){var c=a.call(this)||this;return c._limit=l,c}return(0,k.ZT)(s,a),s.prototype._apply=function(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new dt(l._repo,l._path,function(a,s){var l=a.copy();return l.limitSet_=!0,l.limit_=s,l.viewFrom_="l",l}(l._queryParams,this._limit),l._orderByCalled)},s}(ke);function le(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ya(a)}var $d=function(a){function s(l){var c=a.call(this)||this;return c._limit=l,c}return(0,k.ZT)(s,a),s.prototype._apply=function(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new dt(l._repo,l._path,function(a,s){var l=a.copy();return l.limitSet_=!0,l.limit_=s,l.viewFrom_="r",l}(l._queryParams,this._limit),l._orderByCalled)},s}(ke);function Xd(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new $d(a)}var Kd=function(a){function s(l){var c=a.call(this)||this;return c._path=l,c}return(0,k.ZT)(s,a),s.prototype._apply=function(l){mi(l,"orderByChild");var c=new ae(this._path);if(Z(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var h=new ot(c),p=mo(l._queryParams,h);return _t(p),new dt(l._repo,l._path,p,!0)},s}(ke);function ec(a){if("$key"===a)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===a)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===a)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Er("orderByChild","path",a,!1),new Kd(a)}var tc=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,k.ZT)(s,a),s.prototype._apply=function(l){mi(l,"orderByKey");var c=mo(l._queryParams,nt);return _t(c),new dt(l._repo,l._path,c,!0)},s}(ke);function Au(){return new tc}var os=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,k.ZT)(s,a),s.prototype._apply=function(l){mi(l,"orderByPriority");var c=mo(l._queryParams,Q);return _t(c),new dt(l._repo,l._path,c,!0)},s}(ke);function ss(){return new os}var Ga=function(a){function s(){return null!==a&&a.apply(this,arguments)||this}return(0,k.ZT)(s,a),s.prototype._apply=function(l){mi(l,"orderByValue");var c=mo(l._queryParams,hn);return _t(c),new dt(l._repo,l._path,c,!0)},s}(ke);function ic(){return new Ga}var nc=function(a){function s(l,c){var h=a.call(this)||this;return h._value=l,h._key=c,h}return(0,k.ZT)(s,a),s.prototype._apply=function(l){if(ft("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Va(this._value,this._key)._apply(new Nr(this._value,this._key)._apply(l))},s}(ke);function P(a,s){return Xe("equalTo","key",s,!0),new nc(a,s)}function ce(a){for(var s,l,c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];var p=(0,t.m9)(a);try{for(var m=(0,k.XA)(c),g=m.next();!g.done;g=m.next()){var v=g.value;p=v._apply(p)}}catch(y){s={error:y}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}return p}(function(a){(0,t.hu)(!Bt,"__referenceConstructor has already been defined"),Bt=a})(et),function(a){(0,t.hu)(!kn,"__referenceConstructor has already been defined"),kn=a}(et);var Oe={},xt=!1;function as(a,s,l,c,h){var p=c||a.options.databaseURL;void 0===p&&(a.options.projectId||Me("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ve("Using default host for project ",a.options.projectId),p=a.options.projectId+"-default-rtdb.firebaseio.com");var v,m=Pa(p,h),g=m.repoInfo,y=void 0;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(v=!0,g=(m=Pa(p="http://"+y+"?ns="+g.namespace,h)).repoInfo):v=!m.repoInfo.secure;var C=h&&v?new Zn(Zn.OWNER):new Ph(a.name,a.options,s);Uo("Invalid Firebase Database URL",m),Z(m.path)||Me("Database URL must point to the root of a Firebase Database (not including a child path).");var D=function(a,s,l,c){var h=Oe[s.name];h||(Oe[s.name]=h={});var p=h[a.toURLString()];return p&&Me("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),p=new Ea(a,xt,l,c),h[a.toURLString()]=p,p}(g,a,C,new Fh(a.name,l));return new Tt(D,a)}var Tt=function(){function a(s,l){this._repoInternal=s,this.app=l,this.type="database",this._instanceStarted=!1}return Object.defineProperty(a.prototype,"_repo",{get:function(){return this._instanceStarted||(function(a,s,l){if(a.stats_=Bs(a.repoInfo_),a.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)a.server_=new ld(a.repoInfo_,function(c,h,p,m){Ra(a,c,h,p,m)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(function(){return fi(a,!0)},0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,t.Pz)(l)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}a.persistentConnection_=new si(a.repoInfo_,s,function(c,h,p,m){Ra(a,c,h,p,m)},function(c){fi(a,c)},function(c){!function(a,s){Te(s,function(l,c){Kt(a,l,c)})}(a,c)},a.authTokenProvider_,a.appCheckProvider_,l),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(function(c){a.server_.refreshAuthToken(c)}),a.appCheckProvider_.addTokenChangeListener(function(c){a.server_.refreshAppCheckToken(c.token)}),a.statsReporter_=function(a,s){var l=a.toString();return Ls[l]||(Ls[l]=s()),Ls[l]}(a.repoInfo_,function(){return new ta(a.stats_,a.server_)}),a.infoData_=new dd,a.infoSyncTree_=new br({startListening:function(c,h,p,m){var g=[],v=a.infoData_.getNode(c._path);return v.isEmpty()||(g=$t(a.infoSyncTree_,c._path,v),setTimeout(function(){m("ok")},0)),g},stopListening:function(){}}),Kt(a,"connected",!1),a.serverSyncTree_=new br({startListening:function(c,h,p,m){return a.server_.listen(c,p,h,function(g,v){var y=m(g,v);Ke(a.eventQueue_,c._path,y)}),[]},stopListening:function(c,h){a.server_.unlisten(c,h)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new et(this._repo,ne())),this._rootInternal},enumerable:!1,configurable:!0}),a.prototype._delete=function(){return null!==this._rootInternal&&(function(a,s){var l=Oe[s];(!l||l[a.key]!==a)&&Me("Database "+s+"("+a.repoInfo_+") has already been deleted."),Qo(a),delete l[a.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},a.prototype._checkNotDeleted=function(s){null===this._rootInternal&&Me("Cannot call "+s+" on a deleted database.")},a}();function sc(a){(a=(0,t.m9)(a))._checkNotDeleted("goOffline"),Qo(a._repo)}function Ru(a){(a=(0,t.m9)(a))._checkNotDeleted("goOnline"),function(a){a.persistentConnection_&&a.persistentConnection_.resume(Ta)}(a._repo)}var ac={".sv":"timestamp"},Hr=function(){function a(s,l){this.committed=s,this.snapshot=l}return a.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},a}();function cc(a,s,l){var c;if(a=(0,t.m9)(a),at("Reference.transaction",a._path),".length"===a.key||".keys"===a.key)throw"Reference.transaction failed: "+a.key+" is a read-only object.";var h=null===(c=null==l?void 0:l.applyLocally)||void 0===c||c,p=new t.BH,g=Na(a,function(){});return function(a,s,l,c,h,p){ji(a,"transaction on "+s);var m={path:s,update:l,onComplete:c,status:null,order:Ml(),applyLocally:p,retryCount:0,unwatcher:h,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=Xo(a,s,void 0);m.currentInputSnapshot=g;var v=m.update(g.val());if(void 0===v)m.unwatcher(),m.currentOutputSnapshotRaw=null,m.currentOutputSnapshotResolved=null,m.onComplete&&m.onComplete(null,!1,m.currentInputSnapshot);else{Tr("transaction failed: Data returned ",v,m.path),m.status=0;var y=En(a.transactionQueueTree_,s),C=Ui(y)||[];C.push(m),Yo(y,C);var D=void 0;"object"==typeof v&&null!==v&&(0,t.r3)(v,".priority")?(D=(0,t.DV)(v,".priority"),(0,t.hu)(xr(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(Sn(a.serverSyncTree_,s)||Y.EMPTY_NODE).getPriority().val();var R=Rn(a),I=ge(v,D),V=Ma(I,g,R);m.currentOutputSnapshotRaw=I,m.currentOutputSnapshotResolved=V,m.currentWriteId=Ht(a);var N=Oo(a.serverSyncTree_,s,V,m.currentWriteId,m.applyLocally);Ke(a.eventQueue_,s,N),ei(a,a.transactionQueueTree_)}}(a._repo,a._path,s,function(v,y,C){var D=null;v?p.reject(v):(D=new is(C,new et(a._repo,a._path),Q),p.resolve(new Hr(y,D)))},g,h),p.promise}var hc=function(){function a(s){this._delegate=s}return a.prototype.cancel=function(s){(0,t.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,t.Wj)("OnDisconnect.cancel","onComplete",s,!0);var l=this._delegate.cancel();return s&&l.then(function(){return s(null)},function(c){return s(c)}),l},a.prototype.remove=function(s){(0,t.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,t.Wj)("OnDisconnect.remove","onComplete",s,!0);var l=this._delegate.remove();return s&&l.then(function(){return s(null)},function(c){return s(c)}),l},a.prototype.set=function(s,l){(0,t.Dv)("OnDisconnect.set",1,2,arguments.length),(0,t.Wj)("OnDisconnect.set","onComplete",l,!0);var c=this._delegate.set(s);return l&&c.then(function(){return l(null)},function(h){return l(h)}),c},a.prototype.setWithPriority=function(s,l,c){(0,t.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,t.Wj)("OnDisconnect.setWithPriority","onComplete",c,!0);var h=this._delegate.setWithPriority(s,l);return c&&h.then(function(){return c(null)},function(p){return c(p)}),h},a.prototype.update=function(s,l){if((0,t.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(s)){for(var c={},h=0;h<s.length;++h)c[""+h]=s[h];s=c,pe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,t.Wj)("OnDisconnect.update","onComplete",l,!0);var p=this._delegate.update(s);return l&&p.then(function(){return l(null)},function(m){return l(m)}),p},a}(),uc=function(){function a(s,l){this.committed=s,this.snapshot=l}return a.prototype.toJSON=function(){return(0,t.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},a}(),Ln=function(){function a(s,l){this._database=s,this._delegate=l}return a.prototype.val=function(){return(0,t.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},a.prototype.exportVal=function(){return(0,t.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},a.prototype.toJSON=function(){return(0,t.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},a.prototype.exists=function(){return(0,t.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},a.prototype.child=function(s){return(0,t.Dv)("DataSnapshot.child",0,1,arguments.length),s=String(s),Er("DataSnapshot.child","path",s,!1),new a(this._database,this._delegate.child(s))},a.prototype.hasChild=function(s){return(0,t.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Er("DataSnapshot.hasChild","path",s,!1),this._delegate.hasChild(s)},a.prototype.getPriority=function(){return(0,t.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},a.prototype.forEach=function(s){var l=this;return(0,t.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,t.Wj)("DataSnapshot.forEach","action",s,!1),this._delegate.forEach(function(c){return s(new a(l._database,c))})},a.prototype.hasChildren=function(){return(0,t.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(a.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),a.prototype.numChildren=function(){return(0,t.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},a.prototype.getRef=function(){return(0,t.Dv)("DataSnapshot.ref",0,0,arguments.length),new Wi(this._database,this._delegate.ref)},Object.defineProperty(a.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),a}(),za=function(){function a(s,l){this.database=s,this._delegate=l}return a.prototype.on=function(s,l,c,h){var m,p=this;(0,t.Dv)("Query.on",2,4,arguments.length),(0,t.Wj)("Query.on","callback",l,!1);var g=a.getCancelAndContextArgs_("Query.on",c,h),v=function(C,D){l.call(g.context,new Ln(p.database,C),D)};v.userCallback=l,v.context=g.context;var y=null===(m=g.cancel)||void 0===m?void 0:m.bind(g.context);switch(s){case"value":return Na(this._delegate,v,y),l;case"child_added":return qd(this._delegate,v,y),l;case"child_removed":return Wd(this._delegate,v,y),l;case"child_changed":return jd(this._delegate,v,y),l;case"child_moved":return Zd(this._delegate,v,y),l;default:throw new Error((0,t.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},a.prototype.off=function(s,l,c){if((0,t.Dv)("Query.off",0,3,arguments.length),Mu("Query.off",s,!0),(0,t.Wj)("Query.off","callback",l,!0),(0,t.lb)("Query.off","context",c,!0),l){var h=function(){};h.userCallback=l,h.context=c,St(this._delegate,s,h)}else St(this._delegate,s)},a.prototype.get=function(){var s=this;return Br(this._delegate).then(function(l){return new Ln(s.database,l)})},a.prototype.once=function(s,l,c,h){var p=this;(0,t.Dv)("Query.once",1,4,arguments.length),(0,t.Wj)("Query.once","callback",l,!0);var m=a.getCancelAndContextArgs_("Query.once",c,h),g=new t.BH,v=function(C,D){var T=new Ln(p.database,C);l&&l.call(m.context,T,D),g.resolve(T)};v.userCallback=l,v.context=m.context;var y=function(C){m.cancel&&m.cancel.call(m.context,C),g.reject(C)};switch(s){case"value":Na(this._delegate,v,y,{onlyOnce:!0});break;case"child_added":qd(this._delegate,v,y,{onlyOnce:!0});break;case"child_removed":Wd(this._delegate,v,y,{onlyOnce:!0});break;case"child_changed":jd(this._delegate,v,y,{onlyOnce:!0});break;case"child_moved":Zd(this._delegate,v,y,{onlyOnce:!0});break;default:throw new Error((0,t.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return g.promise},a.prototype.limitToFirst=function(s){return(0,t.Dv)("Query.limitToFirst",1,1,arguments.length),new a(this.database,ce(this._delegate,le(s)))},a.prototype.limitToLast=function(s){return(0,t.Dv)("Query.limitToLast",1,1,arguments.length),new a(this.database,ce(this._delegate,Xd(s)))},a.prototype.orderByChild=function(s){return(0,t.Dv)("Query.orderByChild",1,1,arguments.length),new a(this.database,ce(this._delegate,ec(s)))},a.prototype.orderByKey=function(){return(0,t.Dv)("Query.orderByKey",0,0,arguments.length),new a(this.database,ce(this._delegate,Au()))},a.prototype.orderByPriority=function(){return(0,t.Dv)("Query.orderByPriority",0,0,arguments.length),new a(this.database,ce(this._delegate,ss()))},a.prototype.orderByValue=function(){return(0,t.Dv)("Query.orderByValue",0,0,arguments.length),new a(this.database,ce(this._delegate,ic()))},a.prototype.startAt=function(s,l){return void 0===s&&(s=null),(0,t.Dv)("Query.startAt",0,2,arguments.length),new a(this.database,ce(this._delegate,rs(s,l)))},a.prototype.startAfter=function(s,l){return void 0===s&&(s=null),(0,t.Dv)("Query.startAfter",0,2,arguments.length),new a(this.database,ce(this._delegate,Ha(s,l)))},a.prototype.endAt=function(s,l){return void 0===s&&(s=null),(0,t.Dv)("Query.endAt",0,2,arguments.length),new a(this.database,ce(this._delegate,Jd(s,l)))},a.prototype.endBefore=function(s,l){return void 0===s&&(s=null),(0,t.Dv)("Query.endBefore",0,2,arguments.length),new a(this.database,ce(this._delegate,Qd(s,l)))},a.prototype.equalTo=function(s,l){return(0,t.Dv)("Query.equalTo",1,2,arguments.length),new a(this.database,ce(this._delegate,P(s,l)))},a.prototype.toString=function(){return(0,t.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},a.prototype.toJSON=function(){return(0,t.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},a.prototype.isEqual=function(s){if((0,t.Dv)("Query.isEqual",1,1,arguments.length),!(s instanceof a)){var l="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(l)}return this._delegate.isEqual(s._delegate)},a.getCancelAndContextArgs_=function(s,l,c){var h={cancel:void 0,context:void 0};if(l&&c)h.cancel=l,(0,t.Wj)(s,"cancel",h.cancel,!0),h.context=c,(0,t.lb)(s,"context",h.context,!0);else if(l)if("object"==typeof l&&null!==l)h.context=l;else{if("function"!=typeof l)throw new Error((0,t.gK)(s,"cancelOrContext")+" must either be a cancel callback or a context object.");h.cancel=l}return h},Object.defineProperty(a.prototype,"ref",{get:function(){return new Wi(this.database,new et(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),a}(),Wi=function(a){function s(l,c){var h=a.call(this,l,new dt(c._repo,c._path,new uo,!1))||this;return h.database=l,h._delegate=c,h}return(0,k.ZT)(s,a),s.prototype.getKey=function(){return(0,t.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},s.prototype.child=function(l){return(0,t.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new s(this.database,Dt(this._delegate,l))},s.prototype.getParent=function(){(0,t.Dv)("Reference.parent",0,0,arguments.length);var l=this._delegate.parent;return l?new s(this.database,l):null},s.prototype.getRoot=function(){return(0,t.Dv)("Reference.root",0,0,arguments.length),new s(this.database,this._delegate.root)},s.prototype.set=function(l,c){(0,t.Dv)("Reference.set",1,2,arguments.length),(0,t.Wj)("Reference.set","onComplete",c,!0);var h=Lr(this._delegate,l);return c&&h.then(function(){return c(null)},function(p){return c(p)}),h},s.prototype.update=function(l,c){if((0,t.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){for(var h={},p=0;p<l.length;++p)h[""+p]=l[p];l=h,pe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}at("Reference.update",this._delegate._path),(0,t.Wj)("Reference.update","onComplete",c,!0);var m=Tu(this._delegate,l);return c&&m.then(function(){return c(null)},function(g){return c(g)}),m},s.prototype.setWithPriority=function(l,c,h){(0,t.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,t.Wj)("Reference.setWithPriority","onComplete",h,!0);var p=Ud(this._delegate,l,c);return h&&p.then(function(){return h(null)},function(m){return h(m)}),p},s.prototype.remove=function(l){(0,t.Dv)("Reference.remove",0,1,arguments.length),(0,t.Wj)("Reference.remove","onComplete",l,!0);var c=xu(this._delegate);return l&&c.then(function(){return l(null)},function(h){return l(h)}),c},s.prototype.transaction=function(l,c,h){var p=this;(0,t.Dv)("Reference.transaction",1,3,arguments.length),(0,t.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,t.Wj)("Reference.transaction","onComplete",c,!0),xa("Reference.transaction","applyLocally",h,!0);var m=cc(this._delegate,l,{applyLocally:h}).then(function(g){return new uc(g.committed,new Ln(p.database,g.snapshot))});return c&&m.then(function(g){return c(null,g.committed,g.snapshot)},function(g){return c(g,!1,null)}),m},s.prototype.setPriority=function(l,c){(0,t.Dv)("Reference.setPriority",1,2,arguments.length),(0,t.Wj)("Reference.setPriority","onComplete",c,!0);var h=zd(this._delegate,l);return c&&h.then(function(){return c(null)},function(p){return c(p)}),h},s.prototype.push=function(l,c){var h=this;(0,t.Dv)("Reference.push",0,2,arguments.length),(0,t.Wj)("Reference.push","onComplete",c,!0);var p=La(this._delegate,l),m=p.then(function(v){return new s(h.database,v)});c&&m.then(function(){return c(null)},function(v){return c(v)});var g=new s(this.database,p);return g.then=m.then.bind(m),g.catch=m.catch.bind(m,void 0),g},s.prototype.onDisconnect=function(){return at("Reference.onDisconnect",this._delegate._path),new hc(new ts(this._delegate._repo,this._delegate._path))},Object.defineProperty(s.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),s}(za),qe=function(){function a(s,l){var c=this;this._delegate=s,this.app=l,this.INTERNAL={delete:function(){return c._delegate._delete()}}}return a.prototype.useEmulator=function(s,l,c){void 0===c&&(c={}),function(a,s,l,c){void 0===c&&(c={}),(a=(0,t.m9)(a))._checkNotDeleted("useEmulator"),a._instanceStarted&&Me("Cannot call useEmulator() after instance has already been initialized.");var h=a._repoInternal,p=void 0;if(h.repoInfo_.nodeAdmin)c.mockUserToken&&Me('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),p=new Zn(Zn.OWNER);else if(c.mockUserToken){var m=(0,t.Sg)(c.mockUserToken,a.app.options.projectId);p=new Zn(m)}!function(a,s,l,c){a.repoInfo_=new Fs(s+":"+l,!1,a.repoInfo_.namespace,a.repoInfo_.webSocketOnly,a.repoInfo_.nodeAdmin,a.repoInfo_.persistenceKey,a.repoInfo_.includeNamespaceInQueryParams),c&&(a.authTokenProvider_=c)}(h,s,l,p)}(this._delegate,s,l,c)},a.prototype.ref=function(s){if((0,t.Dv)("database.ref",0,1,arguments.length),s instanceof Wi){var l=Pn(this._delegate,s.toString());return new Wi(this,l)}return l=Gd(this._delegate,s),new Wi(this,l)},a.prototype.refFromURL=function(s){var l="database.refFromURL";(0,t.Dv)(l,1,1,arguments.length);var c=Pn(this._delegate,s);return new Wi(this,c)},a.prototype.goOffline=function(){return(0,t.Dv)("database.goOffline",0,0,arguments.length),sc(this._delegate)},a.prototype.goOnline=function(){return(0,t.Dv)("database.goOnline",0,0,arguments.length),Ru(this._delegate)},a.ServerValue={TIMESTAMP:ac,increment:function(s){return function(a){return{".sv":{increment:a}}}(s)}},a}(),ja=Object.freeze({__proto__:null,forceLongPolling:function(){Di.forceDisallow(),Vs.forceAllow()},forceWebSockets:function(){Vs.forceDisallow()},isWebSocketsAvailable:function(){return Di.isAvailable()},setSecurityDebugCallback:function(a,s){a._delegate._repo.persistentConnection_.securityDebugCallback_=s},stats:function(a,s){!function(a,s){if(void 0===s&&(s=!1),"undefined"!=typeof console){var l;s?(a.statsListener_||(a.statsListener_=new go(a.stats_)),l=a.statsListener_.get()):l=a.stats_.get();var c=Object.keys(l).reduce(function(h,p){return Math.max(p.length,h)},0);Te(l,function(h,p){for(var m=h,g=h.length;g<c+2;g++)m+=" ";console.log(m+p)})}}(a._delegate._repo,s)},statsIncrementCounter:function(a,s){!function(a,s){a.stats_.incrementCounter(s),function(a,s){a.statsToReport_[s]=!0}(a.statsReporter_,s)}(a._delegate._repo,s)},dataUpdateCount:function(a){return a._delegate._repo.dataUpdateCount},interceptServerData:function(a,s){return function(a,s){a.interceptServerDataCallback_=s}(a._delegate._repo,s)},initStandalone:function(a){var s=a.app,l=a.url,h=a.customAuthImpl,p=a.namespace,m=a.nodeAdmin,g=void 0!==m&&m;sn(a.version);var v=new ii.zt("auth-internal",new ii.H0("database-standalone"));return v.setComponent(new ii.wA("auth-internal",function(){return h},"PRIVATE")),{instance:new qe(as(s,v,void 0,l,g),s),namespace:p}}}),hs=si;si.prototype.simpleListen=function(a,s){this.sendRequest("q",{p:a},s)},si.prototype.echo=function(a,s){this.sendRequest("echo",{d:a},s)};var Za=Object.freeze({__proto__:null,DataConnection:hs,RealTimeConnection:Jl,hijackHash:function(a){var s=si.prototype.put;return si.prototype.put=function(l,c,h,p){void 0!==p&&(p=a()),s.call(this,l,c,h,p)},function(){si.prototype.put=s}},ConnectionTarget:Fs,queryIdentifier:function(a){return a._delegate._queryIdentifier},forceRestClient:function(a){!function(a){xt=a}(a)}}),us=qe.ServerValue;!function(a){sn(a.SDK_VERSION);var s=a.INTERNAL.registerComponent(new ii.wA("database",function(l,c){var h=c.instanceIdentifier,p=l.getProvider("app").getImmediate(),m=l.getProvider("auth-internal"),g=l.getProvider("app-check-internal");return new qe(as(p,m,g,h),p)},"PUBLIC").setServiceProps({Reference:Wi,Query:za,Database:qe,DataSnapshot:Ln,enableLogging:ln,INTERNAL:ja,ServerValue:us,TEST_ACCESS:Za}).setMultipleInstances(!0));a.registerVersion("@firebase/database","0.10.9"),(0,t.Yr)()&&(Es.exports=s)}(S.Z)},4050:(Es,Cl,F)=>{F.r(Cl),F.d(Cl,{FeedModule:()=>fS});var S=F(8583),ii=F(2882),t=F(7716),k=F(6889),U=F(8839),wi=F(5094),oe=F(1964);function $(n,...r){return r.length?r.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Ut=F(9922),Si=F(6902),be=F(424),Qe=F(5076);var re=F(4689),X=F(5207),ee=F(4294);var xi=F(2738);function Ft(n,r){return void 0===r&&(r=xi.y),n=null!=n?n:id,(0,be.e)(function(e,i){var o,d=!0;e.subscribe(new Qe.Q(i,function(u){var f=r(u);(d||!n(o,f))&&(d=!1,o=f,i.next(u))}))})}function id(n,r){return n===r}var it=F(8476),io=F(6186);function L(n){return(0,be.e)(function(r,e){(0,it.Xf)(n).subscribe(new Qe.Q(e,function(){return e.complete()},io.Z)),!e.closed&&r.subscribe(e)})}function E(n){return null!=n&&"false"!=`${n}`}function J(n,r=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):r}function j(n){return Array.isArray(n)?n:[n]}function _e(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ue(n){return n instanceof t.SBq?n.nativeElement:n}let nt;try{nt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){nt=!1}let ai,qt,$n,H=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,S.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nt)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.Lbi))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(t.Lbi))},token:n,providedIn:"root"}),n})(),Le=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();function ut(n){return function(){if(null==ai&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ai=!0}))}finally{ai=ai||!1}return ai}()?n:!!n.capture}function oo(){if(null==qt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qt=!1,qt;if("scrollBehavior"in document.documentElement.style)qt=!0;else{const n=Element.prototype.scrollTo;qt=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return qt}function Xn(n){if(function(){if(null==$n){const n="undefined"!=typeof document?document.head:null;$n=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $n}()){const r=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&r instanceof ShadowRoot)return r}return null}function Pt(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const r=n.shadowRoot.activeElement;if(r===n)break;n=r}return n}function rt(n){return n.composedPath?n.composedPath()[0]:n.target}var Q=F(1776);let so=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),li=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[so]}),n})();class Ai extends class{constructor(r){this._items=r,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new k.x,this._typeaheadSubscription=U.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new k.x,this.change=new k.x,r instanceof t.n_E&&r.changes.subscribe(e=>{if(this._activeItem){const o=e.toArray().indexOf(this._activeItem);o>-1&&o!==this._activeItemIndex&&(this._activeItemIndex=o)}})}skipPredicate(r){return this._skipPredicateFn=r,this}withWrap(r=!0){return this._wrap=r,this}withVerticalOrientation(r=!0){return this._vertical=r,this}withHorizontalOrientation(r){return this._horizontal=r,this}withAllowedModifierKeys(r){return this._allowedModifierKeys=r,this}withTypeAhead(r=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ut.b)(e=>this._pressedLetters.push(e)),function(n,r){return void 0===r&&(r=Si.z),(0,be.e)(function(e,i){var o=null,d=null,u=null,f=function(){if(o){o.unsubscribe(),o=null;var b=d;d=null,i.next(b)}};function _(){var b=u+n,w=r.now();if(w<b)return o=this.schedule(void 0,b-w),void i.add(o);f()}e.subscribe(new Qe.Q(i,function(b){d=b,u=r.now(),o||(o=r.schedule(_,n),i.add(o))},function(){f(),i.complete()},void 0,function(){d=o=null}))})}(r),(0,re.h)(()=>this._pressedLetters.length>0),(0,X.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let o=1;o<i.length+1;o++){const d=(this._activeItemIndex+o)%i.length,u=i[d];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(d);break}}this._pressedLetters=[]}),this}withHomeAndEnd(r=!0){return this._homeAndEnd=r,this}setActiveItem(r){const e=this._activeItem;this.updateActiveItem(r),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(r){const e=r.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(d=>!r[d]||this._allowedModifierKeys.indexOf(d)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&o){this.setNextItemActive();break}return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&o){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&o){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}return;default:return void((o||$(r,"shiftKey"))&&(r.key&&1===r.key.length?this._letterKeyStream.next(r.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],r.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(r){const e=this._getItemsArray(),i="number"==typeof r?r:e.indexOf(r),o=e[i];this._activeItem=null==o?null:o,this._activeItemIndex=i}_setActiveItemByDelta(r){this._wrap?this._setActiveInWrapMode(r):this._setActiveInDefaultMode(r)}_setActiveInWrapMode(r){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const o=(this._activeItemIndex+r*i+e.length)%e.length;if(!this._skipPredicateFn(e[o]))return void this.setActiveItem(o)}}_setActiveInDefaultMode(r){this._setActiveItemByIndex(this._activeItemIndex+r,r)}_setActiveItemByIndex(r,e){const i=this._getItemsArray();if(i[r]){for(;this._skipPredicateFn(i[r]);)if(!i[r+=e])return;this.setActiveItem(r)}}_getItemsArray(){return this._items instanceof t.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(r){return this._origin=r,this}setActiveItem(r){super.setActiveItem(r),this.activeItem&&this.activeItem.focus(this._origin)}}let co=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(r){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===uo(i)||!this.isVisible(i)))return!1;let o=e.nodeName.toLowerCase(),d=uo(e);return e.hasAttribute("contenteditable")?-1!==d:!("iframe"===o||"object"===o||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let r=n.nodeName.toLowerCase(),e="input"===r&&n.type;return"text"===e||"password"===e||"select"===r||"textarea"===r}(e))&&("audio"===o?!!e.hasAttribute("controls")&&-1!==d:"video"===o?-1!==d&&(null!==d||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let r=n.nodeName.toLowerCase();return"input"===r||"select"===r||"button"===r||"textarea"===r}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Js(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(H))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(H))},token:n,providedIn:"root"}),n})();function Js(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let r=n.getAttribute("tabindex");return"-32768"!=r&&!(!r||isNaN(parseInt(r,10)))}function uo(n){if(!Js(n))return null;const r=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(r)?-1:r}class po{constructor(r,e,i,o,d=!1){this._element=r,this._checker=e,this._ngZone=i,this._document=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,d||this.attachAnchors()}get enabled(){return this._enabled}set enabled(r){this._enabled=r,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}destroy(){const r=this._startAnchor,e=this._endAnchor;r&&(r.removeEventListener("focus",this.startAnchorListener),r.parentNode&&r.parentNode.removeChild(r)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(r){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(r)))})}focusFirstTabbableElementWhenReady(r){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(r)))})}focusLastTabbableElementWhenReady(r){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(r)))})}_getRegionBoundary(r){let e=this._element.querySelectorAll(`[cdk-focus-region-${r}], [cdkFocusRegion${r}], [cdk-focus-${r}]`);for(let i=0;i<e.length;i++)e[i].hasAttribute(`cdk-focus-${r}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${r}', use 'cdkFocusRegion${r}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]):e[i].hasAttribute(`cdk-focus-region-${r}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${r}', use 'cdkFocusRegion${r}' instead. The deprecated attribute will be removed in 8.0.0.`,e[i]);return"start"==r?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(r){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(r),!!i}return e.focus(r),!0}return this.focusFirstTabbableElement(r)}focusFirstTabbableElement(r){const e=this._getRegionBoundary("start");return e&&e.focus(r),!!e}focusLastTabbableElement(r){const e=this._getRegionBoundary("end");return e&&e.focus(r),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let e=r.children||r.childNodes;for(let i=0;i<e.length;i++){let o=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(o)return o}return null}_getLastTabbableElement(r){if(this._checker.isFocusable(r)&&this._checker.isTabbable(r))return r;let e=r.children||r.childNodes;for(let i=e.length-1;i>=0;i--){let o=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(o)return o}return null}_createAnchor(){const r=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,r),r.classList.add("cdk-visually-hidden"),r.classList.add("cdk-focus-trap-anchor"),r.setAttribute("aria-hidden","true"),r}_toggleAnchorTabIndex(r,e){r?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(r){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(r,this._startAnchor),this._toggleAnchorTabIndex(r,this._endAnchor))}_executeOnStable(r){this._ngZone.isStable?r():this._ngZone.onStable.pipe((0,ee.q)(1)).subscribe(r)}}let ir=(()=>{class n{constructor(e,i,o){this._checker=e,this._ngZone=i,this._document=o}create(e,i=!1){return new po(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(co),t.LFG(t.R0b),t.LFG(S.K0))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(co),t.LFG(t.R0b),t.LFG(S.K0))},token:n,providedIn:"root"}),n})();function Ii(n){return 0===n.offsetX&&0===n.offsetY}function nr(n){const r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!r||-1!==r.identifier||null!=r.radiusX&&1!==r.radiusX||null!=r.radiusY&&1!==r.radiusY)}"undefined"!=typeof Element&&Element;const go=new t.OlP("cdk-input-modality-detector-options"),Ks={ignoreKeys:[18,17,224,91,16]},Oi=ut({passive:!0,capture:!0});let ta=(()=>{class n{constructor(e,i,o,d){this._platform=e,this._mostRecentTarget=null,this._modality=new wi.X(null),this._lastTouchMs=0,this._onKeydown=u=>{var f,_;(null===(_=null===(f=this._options)||void 0===f?void 0:f.ignoreKeys)||void 0===_?void 0:_.some(b=>b===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=rt(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Ii(u)?"keyboard":"mouse"),this._mostRecentTarget=rt(u))},this._onTouchstart=u=>{nr(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=rt(u))},this._options=Object.assign(Object.assign({},Ks),d),this.modalityDetected=this._modality.pipe(function(n){return(0,re.h)(function(r,e){return n<=e})}(1)),this.modalityChanged=this.modalityDetected.pipe(Ft()),e.isBrowser&&i.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Oi),o.addEventListener("mousedown",this._onMousedown,Oi),o.addEventListener("touchstart",this._onTouchstart,Oi)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,Oi),document.removeEventListener("mousedown",this._onMousedown,Oi),document.removeEventListener("touchstart",this._onTouchstart,Oi))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(H),t.LFG(t.R0b),t.LFG(S.K0),t.LFG(go,8))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(H),t.LFG(t.R0b),t.LFG(S.K0),t.LFG(go,8))},token:n,providedIn:"root"}),n})();const na=new t.OlP("cdk-focus-monitor-default-options"),mn=ut({passive:!0,capture:!0});let fe=(()=>{class n{constructor(e,i,o,d,u){this._ngZone=e,this._platform=i,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new k.x,this._rootNodeFocusAndBlurListener=f=>{const _=rt(f),b="focus"===f.type?this._onFocus:this._onBlur;for(let w=_;w;w=w.parentElement)b.call(this,f,w)},this._document=d,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(e,i=!1){const o=ue(e);if(!this._platform.isBrowser||1!==o.nodeType)return(0,oe.of)(null);const d=Xn(o)||this._getDocument(),u=this._elementInfo.get(o);if(u)return i&&(u.checkChildren=!0),u.subject;const f={checkChildren:i,subject:new k.x,rootNode:d};return this._elementInfo.set(o,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(e){const i=ue(e),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(e,i,o){const d=ue(e);d===this._getDocument().activeElement?this._getClosestElementsInfo(d).forEach(([f,_])=>this._originChanged(f,i,_)):(this._setOrigin(i),"function"==typeof d.focus&&d.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,i,o){o?e.classList.add(i):e.classList.remove(i)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){this._toggleClass(e,"cdk-focused",!!i),this._toggleClass(e,"cdk-touch-focused","touch"===i),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===i),this._toggleClass(e,"cdk-mouse-focused","mouse"===i),this._toggleClass(e,"cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const o=this._elementInfo.get(i),d=rt(e);!o||!o.checkChildren&&i!==d||this._originChanged(i,this._getFocusOrigin(d),o)}_onBlur(e,i){const o=this._elementInfo.get(i);!o||o.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(o.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,mn),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,mn)}),this._rootNodeFocusListenerCount.set(i,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(L(this._stopInputModalityDetector)).subscribe(d=>{this._setOrigin(d,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mn),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mn),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,o){this._setClasses(e,i),this._emitOrigin(o.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((o,d)=>{(d===e||o.checkChildren&&d.contains(e))&&i.push([d,o])}),i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.R0b),t.LFG(H),t.LFG(ta),t.LFG(S.K0,8),t.LFG(na,8))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(t.R0b),t.LFG(H),t.LFG(ta),t.LFG(S.K0,8),t.LFG(na,8))},token:n,providedIn:"root"}),n})();const Lt="cdk-high-contrast-black-on-white",ra="cdk-high-contrast-white-on-black",bo="cdk-high-contrast-active";let Fi=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(e):null,d=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),d){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(bo),e.remove(Lt),e.remove(ra),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(bo),e.add(Lt)):2===i&&(e.add(bo),e.add(ra))}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(H),t.LFG(S.K0))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(H),t.LFG(S.K0))},token:n,providedIn:"root"}),n})(),gn=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Fi))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Le,li]]}),n})(),ci=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var wt,He=F(6937),Ye=F(9162),Ge=F(6396),$e={schedule:function(n){var r=requestAnimationFrame,e=cancelAnimationFrame,i=$e.delegate;i&&(r=i.requestAnimationFrame,e=i.cancelAnimationFrame);var o=r(function(d){e=void 0,n(d)});return new U.w0(function(){return null==e?void 0:e(o)})},requestAnimationFrame:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=$e.delegate;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,Ye.ev)([],(0,Ye.CR)(n)))},cancelAnimationFrame:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=$e.delegate;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,Ye.ev)([],(0,Ye.CR)(n)))},delegate:void 0},vn=function(n){function r(e,i){var o=n.call(this,e,i)||this;return o.scheduler=e,o.work=i,o}return(0,Ye.ZT)(r,n),r.prototype.requestAsyncId=function(e,i,o){return void 0===o&&(o=0),null!==o&&o>0?n.prototype.requestAsyncId.call(this,e,i,o):(e.actions.push(this),e._scheduled||(e._scheduled=$e.requestAnimationFrame(function(){return e.flush(void 0)})))},r.prototype.recycleAsyncId=function(e,i,o){if(void 0===o&&(o=0),null!=o&&o>0||null==o&&this.delay>0)return n.prototype.recycleAsyncId.call(this,e,i,o);0===e.actions.length&&($e.cancelAnimationFrame(i),e._scheduled=void 0)},r}(Ge.o),lr=F(1146),dr=new(function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,Ye.ZT)(r,n),r.prototype.flush=function(e){this._active=!0,this._scheduled=void 0;var o,i=this.actions,d=-1;e=e||i.shift();var u=i.length;do{if(o=e.execute(e.state,e.delay))break}while(++d<u&&(e=i.shift()));if(this._active=!1,o){for(;++d<u&&(e=i.shift());)e.unsubscribe();throw o}},r}(lr.v))(vn),aa=1,Li={};function hi(n){return n in Li&&(delete Li[n],!0)}var hd=function(n){var r=aa++;return Li[r]=!0,wt||(wt=Promise.resolve()),wt.then(function(){return hi(r)&&n()}),r},ud=function(n){hi(n)},cr={setImmediate:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=cr.delegate;return((null==e?void 0:e.setImmediate)||hd).apply(void 0,(0,Ye.ev)([],(0,Ye.CR)(n)))},clearImmediate:function(n){var r=cr.delegate;return((null==r?void 0:r.clearImmediate)||ud)(n)},delegate:void 0},pd=function(n){function r(e,i){var o=n.call(this,e,i)||this;return o.scheduler=e,o.work=i,o}return(0,Ye.ZT)(r,n),r.prototype.requestAsyncId=function(e,i,o){return void 0===o&&(o=0),null!==o&&o>0?n.prototype.requestAsyncId.call(this,e,i,o):(e.actions.push(this),e._scheduled||(e._scheduled=cr.setImmediate(e.flush.bind(e,void 0))))},r.prototype.recycleAsyncId=function(e,i,o){if(void 0===o&&(o=0),null!=o&&o>0||null==o&&this.delay>0)return n.prototype.recycleAsyncId.call(this,e,i,o);0===e.actions.length&&(cr.clearImmediate(i),e._scheduled=void 0)},r}(Ge.o),wo=new(function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,Ye.ZT)(r,n),r.prototype.flush=function(e){this._active=!0,this._scheduled=void 0;var o,i=this.actions,d=-1;e=e||i.shift();var u=i.length;do{if(o=e.execute(e.state,e.delay))break}while(++d<u&&(e=i.shift()));if(this._active=!1,o){for(;++d<u&&(e=i.shift());)e.unsubscribe();throw o}},r}(lr.v))(pd),hr=F(8853);var ko=F(8468);function ur(n,r){return void 0===r&&(r=Si.P),function(n){return(0,be.e)(function(r,e){var i=!1,o=null,d=null,u=!1,f=function(){if(null==d||d.unsubscribe(),d=null,i){i=!1;var b=o;o=null,e.next(b)}u&&e.complete()},_=function(){d=null,u&&e.complete()};r.subscribe(new Qe.Q(e,function(b){i=!0,o=b,d||(0,it.Xf)(n()).subscribe(d=new Qe.Q(e,f,_))},function(){u=!0,(!i||!d||d.closed)&&e.complete()}))})}(function(){return(0,ko.H)(n,r)})}var te=F(9978);var we=F(7540);F(7722);const pr=new t.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,t.f3M)(S.K0)}});let K=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new t.vpe,e){const o=e.documentElement?e.documentElement.dir:null,d=(e.body?e.body.dir:null)||o;this.value="ltr"===d||"rtl"===d?d:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(pr,8))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(pr,8))},token:n,providedIn:"root"}),n})(),Wt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();class Jt{constructor(r=!1,e,i=!0){this._multiple=r,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new k.x,e&&e.length&&(r?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...r){this._verifyValueAssignment(r),r.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...r){this._verifyValueAssignment(r),r.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(r){this.isSelected(r)?this.deselect(r):this.select(r)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(r){return this._selection.has(r)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(r){this._multiple&&this.selected&&this._selected.sort(r)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(r){this.isSelected(r)||(this._multiple||this._unmarkAll(),this._selection.add(r),this._emitChanges&&this._selectedToEmit.push(r))}_unmarkSelected(r){this.isSelected(r)&&(this._selection.delete(r),this._emitChanges&&this._deselectedToEmit.push(r))}_unmarkAll(){this.isEmpty()||this._selection.forEach(r=>this._unmarkSelected(r))}_verifyValueAssignment(r){}}let pt=(()=>{class n{constructor(e,i,o){this._ngZone=e,this._platform=i,this._scrolled=new k.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Q.y(i=>{this._globalSubscription||this._addGlobalListener();const o=e>0?this._scrolled.pipe(ur(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,oe.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const o=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe((0,re.h)(d=>!d||o.indexOf(d)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((o,d)=>{this._scrollableContainsElement(d,e)&&i.push(d)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let o=ue(i),d=e.getElementRef().nativeElement;do{if(o==d)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return(0,He.R)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.R0b),t.LFG(H),t.LFG(S.K0,8))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(t.R0b),t.LFG(H),t.LFG(S.K0,8))},token:n,providedIn:"root"}),n})(),Be=(()=>{class n{constructor(e,i,o){this._platform=e,this._change=new k.x,this._changeListener=d=>{this._change.next(d)},this._document=o,i.runOutsideAngular(()=>{if(e.isBrowser){const d=this._getWindow();d.addEventListener("resize",this._changeListener),d.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),o=e.documentElement,d=o.getBoundingClientRect();return{top:-d.top||e.body.scrollTop||i.scrollY||o.scrollTop||0,left:-d.left||e.body.scrollLeft||i.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(ur(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(H),t.LFG(t.R0b),t.LFG(S.K0,8))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(H),t.LFG(t.R0b),t.LFG(S.K0,8))},token:n,providedIn:"root"}),n})(),kt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),yn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Wt,Le,kt],Wt,kt]}),n})();function xo(n,r){return void 0===n&&(n=0),void 0===r&&(r=Si.z),n<0&&(n=0),(0,ko.H)(n,n,r)}var ie=F(3763);function _r(n,r,e){for(let i in r)if(r.hasOwnProperty(i)){const o=r[i];o?n.setProperty(i,o,(null==e?void 0:e.has(i))?"important":""):n.removeProperty(i)}return n}function Bt(n,r){const e=r?"":"none";_r(n.style,{"touch-action":r?"":"none","-webkit-user-drag":r?"":"none","-webkit-tap-highlight-color":r?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function To(n,r,e){_r(n.style,{position:r?"":"fixed",top:r?"":"0",opacity:r?"":"0",left:r?"":"-999em"},e)}function gr(n,r){return r&&"none"!=r?n+" "+r:n}function ma(n){const r=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*r}function Cn(n,r){return n.getPropertyValue(r).split(",").map(i=>i.trim())}function vr(n){const r=n.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}function Eo(n,r,e){const{top:i,bottom:o,left:d,right:u}=n;return e>=i&&e<=o&&r>=d&&r<=u}function Mn(n,r,e){n.top+=r,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function Ao(n,r,e,i){const{top:o,right:d,bottom:u,left:f,width:_,height:b}=n,w=_*r,x=b*r;return i>o-x&&i<u+x&&e>f-w&&e<d+w}class Nt{constructor(r,e){this._document=r,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(r){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),r.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:vr(e)})})}handleScroll(r){const e=rt(r),i=this.positions.get(e);if(!i)return null;const o=e===this._document?e.documentElement:e,d=i.scrollPosition;let u,f;if(e===this._document){const w=this._viewportRuler.getViewportScrollPosition();u=w.top,f=w.left}else u=e.scrollTop,f=e.scrollLeft;const _=d.top-u,b=d.left-f;return this.positions.forEach((w,x)=>{w.clientRect&&e!==x&&o.contains(x)&&Mn(w.clientRect,_,b)}),d.top=u,d.left=f,{top:_,left:b}}}function Ro(n){const r=n.cloneNode(!0),e=r.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();r.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===i?kn(n,r):("input"===i||"select"===i||"textarea"===i)&&wn(n,r),Io("canvas",n,r,kn),Io("input, textarea, select",n,r,wn),r}function Io(n,r,e,i){const o=r.querySelectorAll(n);if(o.length){const d=e.querySelectorAll(n);for(let u=0;u<o.length;u++)i(o[u],d[u])}}let Qt=0;function wn(n,r){"file"!==r.type&&(r.value=n.value),"radio"===r.type&&r.name&&(r.name=`mat-clone-${r.name}-${Qt++}`)}function kn(n,r){const e=r.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch(i){}}const _a=ut({passive:!0}),ga=ut({passive:!1}),br=new Set(["position"]);class Oo{constructor(r,e,i,o,d,u){this._config=e,this._document=i,this._ngZone=o,this._viewportRuler=d,this._dragDropRegistry=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new k.x,this._pointerMoveSubscription=U.w0.EMPTY,this._pointerUpSubscription=U.w0.EMPTY,this._scrollSubscription=U.w0.EMPTY,this._resizeSubscription=U.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new k.x,this.started=new k.x,this.released=new k.x,this.ended=new k.x,this.entered=new k.x,this.exited=new k.x,this.dropped=new k.x,this.moved=this._moveEvents,this._pointerDown=f=>{if(this.beforeStarted.next(),this._handles.length){const _=this._handles.find(b=>{const w=rt(f);return!!w&&(w===b||b.contains(w))});_&&!this._disabledHandles.has(_)&&!this.disabled&&this._initializeDragSequence(_,f)}else this.disabled||this._initializeDragSequence(this._rootElement,f)},this._pointerMove=f=>{const _=this._getPointerPositionOnPage(f);if(!this._hasStartedDragging){if(Math.abs(_.x-this._pickupPositionOnPage.x)+Math.abs(_.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const O=Date.now()>=this._dragStartTime+this._getDragStartDelay(f),B=this._dropContainer;if(!O)return void this._endDragSequence(f);(!B||!B.isDragging()&&!B.isReceiving())&&(f.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(f)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),f.preventDefault();const b=this._getConstrainedPointerPosition(_);if(this._hasMoved=!0,this._lastKnownPointerPosition=_,this._updatePointerDirectionDelta(b),this._dropContainer)this._updateActiveDropContainer(b,_);else{const w=this._activeTransform;w.x=b.x-this._pickupPositionOnPage.x+this._passiveTransform.x,w.y=b.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(w.x,w.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${w.x} ${w.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:b,event:f,distance:this._getDragDistance(b),delta:this._pointerDirectionDelta})})},this._pointerUp=f=>{this._endDragSequence(f)},this.withRootElement(r).withParent(e.parentDragRef||null),this._parentPositions=new Nt(i,d),u.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(r){const e=E(r);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Bt(i,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(r){this._handles=r.map(i=>ue(i)),this._handles.forEach(i=>Bt(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(r){return this._previewTemplate=r,this}withPlaceholderTemplate(r){return this._placeholderTemplate=r,this}withRootElement(r){const e=ue(r);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,ga),e.addEventListener("touchstart",this._pointerDown,_a)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(r){return this._boundaryElement=r?ue(r):null,this._resizeSubscription.unsubscribe(),r&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(r){return this._parentDragRef=r,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&$t(this._rootElement),$t(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(r){!this._disabledHandles.has(r)&&this._handles.indexOf(r)>-1&&(this._disabledHandles.add(r),Bt(r,!0))}enableHandle(r){this._disabledHandles.has(r)&&(this._disabledHandles.delete(r),Bt(r,this.disabled))}withDirection(r){return this._direction=r,this}_withDropContainer(r){this._dropContainer=r}getFreeDragPosition(){const r=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:r.x,y:r.y}}setFreeDragPosition(r){return this._activeTransform={x:0,y:0},this._passiveTransform.x=r.x,this._passiveTransform.y=r.y,this._dropContainer||this._applyRootElementTransform(r.x,r.y),this}withPreviewContainer(r){return this._previewContainer=r,this}_sortFromLastPointerPosition(){const r=this._lastKnownPointerPosition;r&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(r),r)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&$t(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&$t(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(r){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(r),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(r);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(r){Dn(r)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,o=i.parentNode,d=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment(""),f=this._getShadowRoot();o.insertBefore(u,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),To(i,!1,br),this._document.body.appendChild(o.replaceChild(d,i)),this._getPreviewInsertionPoint(o,f).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(r,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),o=Dn(e),d=!o&&0!==e.button,u=this._rootElement,f=rt(e),_=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),b=o?nr(e):Ii(e);if(f&&f.draggable&&"mousedown"===e.type&&e.preventDefault(),i||d||_||b)return;this._handles.length&&(this._rootElementTapHighlight=u.style.webkitTapHighlightColor||"",u.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(A=>this._updateOnScroll(A)),this._boundaryElement&&(this._boundaryRect=vr(this._boundaryElement));const w=this._previewTemplate;this._pickupPositionInElement=w&&w.template&&!w.matchSize?{x:0,y:0}:this._getPointerPositionInElement(r,e);const x=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:x.x,y:x.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(r){To(this._rootElement,!0,br),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),o=this._getPointerPositionOnPage(r),d=this._getDragDistance(o),u=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:d,dropPoint:o}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:u,distance:d,dropPoint:o}),e.drop(this,i,this._initialIndex,this._initialContainer,u,d,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:r,y:e},{x:i,y:o}){let d=this._initialContainer._getSiblingContainerFromPosition(this,r,e);!d&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(r,e)&&(d=this._initialContainer),d&&d!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=d,this._dropContainer.enter(this,r,e,d===this._initialContainer&&d.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:d,currentIndex:d.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,o),this._dropContainer._sortItem(this,r,e,this._pointerDirectionDelta),this._applyPreviewTransform(r-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const r=this._previewTemplate,e=this.previewClass,i=r?r.template:null;let o;if(i&&r){const d=r.matchSize?this._rootElement.getBoundingClientRect():null,u=r.viewContainer.createEmbeddedView(i,r.context);u.detectChanges(),o=va(u,this._document),this._previewRef=u,r.matchSize?ba(o,d):o.style.transform=yr(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const d=this._rootElement;o=Ro(d),ba(o,d.getBoundingClientRect()),this._initialTransform&&(o.style.transform=this._initialTransform)}return _r(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},br),Bt(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(d=>o.classList.add(d)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const r=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(r.left,r.top);const e=function(n){const r=getComputedStyle(n),e=Cn(r,"transition-property"),i=e.find(f=>"transform"===f||"all"===f);if(!i)return 0;const o=e.indexOf(i),d=Cn(r,"transition-duration"),u=Cn(r,"transition-delay");return ma(d[o])+ma(u[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const o=u=>{(!u||rt(u)===this._preview&&"transform"===u.propertyName)&&(this._preview.removeEventListener("transitionend",o),i(),clearTimeout(d))},d=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const r=this._placeholderTemplate,e=r?r.template:null;let i;return e?(this._placeholderRef=r.viewContainer.createEmbeddedView(e,r.context),this._placeholderRef.detectChanges(),i=va(this._placeholderRef,this._document)):i=Ro(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(r,e){const i=this._rootElement.getBoundingClientRect(),o=r===this._rootElement?null:r,d=o?o.getBoundingClientRect():i,u=Dn(e)?e.targetTouches[0]:e,f=this._getViewportScrollPosition();return{x:d.left-i.left+(u.pageX-d.left-f.left),y:d.top-i.top+(u.pageY-d.top-f.top)}}_getPointerPositionOnPage(r){const e=this._getViewportScrollPosition(),i=Dn(r)?r.touches[0]||r.changedTouches[0]||{pageX:0,pageY:0}:r,o=i.pageX-e.left,d=i.pageY-e.top;if(this._ownerSVGElement){const u=this._ownerSVGElement.getScreenCTM();if(u){const f=this._ownerSVGElement.createSVGPoint();return f.x=o,f.y=d,f.matrixTransform(u.inverse())}}return{x:o,y:d}}_getConstrainedPointerPosition(r){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:o}=this.constrainPosition?this.constrainPosition(r,this):r;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:d,y:u}=this._pickupPositionInElement,f=this._boundaryRect,_=this._previewRect,b=f.top+u,w=f.bottom-(_.height-u);i=Vt(i,f.left+d,f.right-(_.width-d)),o=Vt(o,b,w)}return{x:i,y:o}}_updatePointerDirectionDelta(r){const{x:e,y:i}=r,o=this._pointerDirectionDelta,d=this._pointerPositionAtLastDirectionChange,u=Math.abs(e-d.x),f=Math.abs(i-d.y);return u>this._config.pointerDirectionChangeThreshold&&(o.x=e>d.x?1:-1,d.x=e),f>this._config.pointerDirectionChangeThreshold&&(o.y=i>d.y?1:-1,d.y=i),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const r=this._handles.length>0||!this.isDragging();r!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=r,Bt(this._rootElement,r))}_removeRootElementListeners(r){r.removeEventListener("mousedown",this._pointerDown,ga),r.removeEventListener("touchstart",this._pointerDown,_a)}_applyRootElementTransform(r,e){const i=yr(r,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform&&"none"!=this._rootElement.style.transform?this._rootElement.style.transform:""),this._rootElement.style.transform=gr(i,this._initialTransform)}_applyPreviewTransform(r,e){var i;const o=(null===(i=this._previewTemplate)||void 0===i?void 0:i.template)?void 0:this._initialTransform,d=yr(r,e);this._preview.style.transform=gr(d,o)}_getDragDistance(r){const e=this._pickupPositionOnPage;return e?{x:r.x-e.x,y:r.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:r,y:e}=this._passiveTransform;if(0===r&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===o.width&&0===o.height)return;const d=i.left-o.left,u=o.right-i.right,f=i.top-o.top,_=o.bottom-i.bottom;i.width>o.width?(d>0&&(r+=d),u>0&&(r-=u)):r=0,i.height>o.height?(f>0&&(e+=f),_>0&&(e-=_)):e=0,(r!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:r})}_getDragStartDelay(r){const e=this.dragStartDelay;return"number"==typeof e?e:Dn(r)?e.touch:e?e.mouse:0}_updateOnScroll(r){const e=this._parentPositions.handleScroll(r);if(e){const i=rt(r);this._boundaryRect&&(i===this._document||i!==this._boundaryElement&&i.contains(this._boundaryElement))&&Mn(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const r=this._parentPositions.positions.get(this._document);return r?r.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Xn(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(r,e){const i=this._previewContainer||"global";if("parent"===i)return r;if("global"===i){const o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return ue(i)}}function yr(n,r){return`translate3d(${Math.round(n)}px, ${Math.round(r)}px, 0)`}function Vt(n,r,e){return Math.max(r,Math.min(e,n))}function $t(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Dn(n){return"t"===n.type[0]}function va(n,r){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===r.ELEMENT_NODE)return e[0];const i=r.createElement("div");return e.forEach(o=>i.appendChild(o)),i}function ba(n,r){n.style.width=`${r.width}px`,n.style.height=`${r.height}px`,n.style.transform=yr(r.left,r.top)}function Yi(n,r){return Math.max(0,Math.min(r,n))}class Gi{constructor(r,e,i,o,d){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=d,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new k.x,this.entered=new k.x,this.exited=new k.x,this.dropped=new k.x,this.sorted=new k.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=U.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new k.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),xo(0,dr).pipe(L(this._stopScrollTimers)).subscribe(()=>{const u=this._scrollNode,f=this.autoScrollStep;1===this._verticalScrollDirection?Po(u,-f):2===this._verticalScrollDirection&&Po(u,f),1===this._horizontalScrollDirection?Lo(u,-f):2===this._horizontalScrollDirection&&Lo(u,f)})},this.element=ue(r),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Nt(i,d)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(r,e,i,o){let d;this._draggingStarted(),null==o?(d=this.sortingDisabled?this._draggables.indexOf(r):-1,-1===d&&(d=this._getItemIndexFromPointerPosition(r,e,i))):d=o;const u=this._activeDraggables,f=u.indexOf(r),_=r.getPlaceholderElement();let b=u[d];if(b===r&&(b=u[d+1]),f>-1&&u.splice(f,1),b&&!this._dragDropRegistry.isDragging(b)){const w=b.getRootElement();w.parentElement.insertBefore(_,w),u.splice(d,0,r)}else if(this._shouldEnterAsFirstChild(e,i)){const w=u[0].getRootElement();w.parentNode.insertBefore(_,w),u.unshift(r)}else ue(this.element).appendChild(_),u.push(r);_.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:r,container:this,currentIndex:this.getItemIndex(r)})}exit(r){this._reset(),this.exited.next({item:r,container:this})}drop(r,e,i,o,d,u,f){this._reset(),this.dropped.next({item:r,currentIndex:e,previousIndex:i,container:this,previousContainer:o,isPointerOverContainer:d,distance:u,dropPoint:f})}withItems(r){const e=this._draggables;return this._draggables=r,r.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===r.indexOf(o))?this._reset():this._cacheItems()),this}withDirection(r){return this._direction=r,this}connectedTo(r){return this._siblings=r.slice(),this}withOrientation(r){return this._orientation=r,this}withScrollableParents(r){const e=ue(this.element);return this._scrollableElements=-1===r.indexOf(e)?[e,...r]:r.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(r){return this._isDragging?Cr("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,i=>i.drag===r):this._draggables.indexOf(r)}isReceiving(){return this._activeSiblings.size>0}_sortItem(r,e,i,o){if(this.sortingDisabled||!this._clientRect||!Ao(this._clientRect,.05,e,i))return;const d=this._itemPositions,u=this._getItemIndexFromPointerPosition(r,e,i,o);if(-1===u&&d.length>0)return;const f="horizontal"===this._orientation,_=Cr(d,G=>G.drag===r),b=d[u],x=b.clientRect,A=_>u?1:-1,O=this._getItemOffsetPx(d[_].clientRect,x,A),B=this._getSiblingOffsetPx(_,d,A),z=d.slice();(function(n,r,e){const i=Yi(r,n.length-1),o=Yi(e,n.length-1);if(i===o)return;const d=n[i],u=o<i?-1:1;for(let f=i;f!==o;f+=u)n[f]=n[f+u];n[o]=d})(d,_,u),this.sorted.next({previousIndex:_,currentIndex:u,container:this,item:r}),d.forEach((G,se)=>{if(z[se]===G)return;const Pe=G.drag===r,he=Pe?O:B,It=Pe?r.getPlaceholderElement():G.drag.getRootElement();G.offset+=he,f?(It.style.transform=gr(`translate3d(${Math.round(G.offset)}px, 0, 0)`,G.initialTransform),Mn(G.clientRect,0,he)):(It.style.transform=gr(`translate3d(0, ${Math.round(G.offset)}px, 0)`,G.initialTransform),Mn(G.clientRect,he,0))}),this._previousSwap.overlaps=Eo(x,e,i),this._previousSwap.drag=b.drag,this._previousSwap.delta=f?o.x:o.y}_startScrollingIfNecessary(r,e){if(this.autoScrollDisabled)return;let i,o=0,d=0;if(this._parentPositions.positions.forEach((u,f)=>{f===this._document||!u.clientRect||i||Ao(u.clientRect,.05,r,e)&&([o,d]=function(n,r,e,i){const o=xn(r,i),d=Tn(r,e);let u=0,f=0;if(o){const _=n.scrollTop;1===o?_>0&&(u=1):n.scrollHeight-_>n.clientHeight&&(u=2)}if(d){const _=n.scrollLeft;1===d?_>0&&(f=1):n.scrollWidth-_>n.clientWidth&&(f=2)}return[u,f]}(f,u.clientRect,r,e),(o||d)&&(i=f))}),!o&&!d){const{width:u,height:f}=this._viewportRuler.getViewportSize(),_={width:u,height:f,top:0,right:u,bottom:f,left:0};o=xn(_,e),d=Tn(_,r),i=window}i&&(o!==this._verticalScrollDirection||d!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=d,this._scrollNode=i,(o||d)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const r=ue(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=r.msScrollSnapType||r.scrollSnapType||"",r.scrollSnapType=r.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const r=ue(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(r).clientRect}_cacheItemPositions(){const r="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:vr(i)}}).sort((e,i)=>r?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const r=ue(this.element).style;r.scrollSnapType=r.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var i;const o=e.getRootElement();if(o){const d=null===(i=this._itemPositions.find(u=>u.drag===e))||void 0===i?void 0:i.initialTransform;o.style.transform=d||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(r,e,i){const o="horizontal"===this._orientation,d=e[r].clientRect,u=e[r+-1*i];let f=d[o?"width":"height"]*i;if(u){const _=o?"left":"top",b=o?"right":"bottom";-1===i?f-=u.clientRect[_]-d[b]:f+=d[_]-u.clientRect[b]}return f}_getItemOffsetPx(r,e,i){const o="horizontal"===this._orientation;let d=o?e.left-r.left:e.top-r.top;return-1===i&&(d+=o?e.width-r.width:e.height-r.height),d}_shouldEnterAsFirstChild(r,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,o="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const u=i[i.length-1].clientRect;return o?r>=u.right:e>=u.bottom}{const u=i[0].clientRect;return o?r<=u.left:e<=u.top}}_getItemIndexFromPointerPosition(r,e,i,o){const d="horizontal"===this._orientation,u=Cr(this._itemPositions,({drag:f,clientRect:_},b,w)=>{if(f===r)return w.length<2;if(o){const x=d?o.x:o.y;if(f===this._previousSwap.drag&&this._previousSwap.overlaps&&x===this._previousSwap.delta)return!1}return d?e>=Math.floor(_.left)&&e<Math.floor(_.right):i>=Math.floor(_.top)&&i<Math.floor(_.bottom)});return-1!==u&&this.sortPredicate(u,r,this)?u:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(r,e){return null!=this._clientRect&&Eo(this._clientRect,r,e)}_getSiblingContainerFromPosition(r,e,i){return this._siblings.find(o=>o._canReceive(r,e,i))}_canReceive(r,e,i){if(!this._clientRect||!Eo(this._clientRect,e,i)||!this.enterPredicate(r,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,i);if(!o)return!1;const d=ue(this.element);return o===d||d.contains(o)}_startReceiving(r,e){const i=this._activeSiblings;!i.has(r)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(i.add(r),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(r){this._activeSiblings.delete(r),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(r=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(r);e&&(this._itemPositions.forEach(({clientRect:i})=>{Mn(i,e.top,e.left)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const r=Xn(ue(this.element));this._cachedShadowRoot=r||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const r=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,r))}}function Cr(n,r){for(let e=0;e<n.length;e++)if(r(n[e],e,n))return e;return-1}function Po(n,r){n===window?n.scrollBy(0,r):n.scrollTop+=r}function Lo(n,r){n===window?n.scrollBy(r,0):n.scrollLeft+=r}function xn(n,r){const{top:e,bottom:i,height:o}=n,d=.05*o;return r>=e-d&&r<=e+d?1:r>=i-d&&r<=i+d?2:0}function Tn(n,r){const{left:e,right:i,width:o}=n,d=.05*o;return r>=e-d&&r<=e+d?1:r>=i-d&&r<=i+d?2:0}const zi=ut({passive:!1,capture:!0});let Mr=(()=>{class n{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new k.x,this.pointerUp=new k.x,this.scroll=new k.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,zi)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,zi)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=i.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:d=>this.pointerUp.next(d),options:!0}).set("scroll",{handler:d=>this.scroll.next(d),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:zi}),o||this._globalListeners.set("mousemove",{handler:d=>this.pointerMove.next(d),options:zi}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((d,u)=>{this._document.addEventListener(u,d.handler,d.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new Q.y(o=>this._ngZone.runOutsideAngular(()=>{const u=f=>{this._activeDragInstances.length&&o.next(f)};return e.addEventListener("scroll",u,!0),()=>{e.removeEventListener("scroll",u,!0)}}))),(0,ie.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.R0b),t.LFG(S.K0))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(t.R0b),t.LFG(S.K0))},token:n,providedIn:"root"}),n})();const Dd={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let pi=(()=>{class n{constructor(e,i,o,d){this._document=e,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=d}createDrag(e,i=Dd){return new Oo(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Gi(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.K0),t.LFG(t.R0b),t.LFG(Be),t.LFG(Mr))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(S.K0),t.LFG(t.R0b),t.LFG(Be),t.LFG(Mr))},token:n,providedIn:"root"}),n})(),Dr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[pi],imports:[kt]}),n})();class Go{attach(r){return this._attachedHost=r,r.attach(this)}detach(){let r=this._attachedHost;null!=r&&(this._attachedHost=null,r.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(r){this._attachedHost=r}}class Xt extends Go{constructor(r,e,i,o){super(),this.component=r,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=o}}class ze extends Go{constructor(r,e,i){super(),this.templateRef=r,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(r,e=this.context){return this.context=e,super.attach(r)}detach(){return this.context=void 0,super.detach()}}class Sa extends Go{constructor(r){super(),this.element=r instanceof t.SBq?r.nativeElement:r}}class An{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(r){return r instanceof Xt?(this._attachedPortal=r,this.attachComponentPortal(r)):r instanceof ze?(this._attachedPortal=r,this.attachTemplatePortal(r)):this.attachDomPortal&&r instanceof Sa?(this._attachedPortal=r,this.attachDomPortal(r)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(r){this._disposeFn=r}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ft extends An{constructor(r,e,i,o,d){super(),this.outletElement=r,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=o,this.attachDomPortal=u=>{const f=u.element,_=this._document.createComment("dom-portal");f.parentNode.insertBefore(_,f),this.outletElement.appendChild(f),this._attachedPortal=u,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(f,_)})},this._document=d}attachComponentPortal(r){const i=(r.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(r.component);let o;return r.viewContainerRef?(o=r.viewContainerRef.createComponent(i,r.viewContainerRef.length,r.injector||r.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=i.create(r.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=r,o}attachTemplatePortal(r){let e=r.viewContainerRef,i=e.createEmbeddedView(r.templateRef,r.context);return i.rootNodes.forEach(o=>this.outletElement.appendChild(o)),i.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(i);-1!==o&&e.remove(o)}),this._attachedPortal=r,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(r){return r.hostView.rootNodes[0]}}let Ie=(()=>{class n extends An{constructor(e,i,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new t.vpe,this.attachDomPortal=d=>{const u=d.element,f=this._document.createComment("dom-portal");d.setAttachedHost(this),u.parentNode.insertBefore(f,u),this._getRootNode().appendChild(u),this._attachedPortal=d,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(u,f)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,d=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),u=i.createComponent(d,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=e,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t._Vd),t.Y36(t.s_b),t.Y36(S.K0))},n.\u0275dir=t.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[t.qOj]}),n})(),Xe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),Ea=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Wt]]}),n})(),Lr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[yn]]}),n})();class Ud extends class{constructor(){this.expansionModel=new Jt(!0)}toggle(r){this.expansionModel.toggle(this._trackByValue(r))}expand(r){this.expansionModel.select(this._trackByValue(r))}collapse(r){this.expansionModel.deselect(this._trackByValue(r))}isExpanded(r){return this.expansionModel.isSelected(this._trackByValue(r))}toggleDescendants(r){this.expansionModel.isSelected(this._trackByValue(r))?this.collapseDescendants(r):this.expandDescendants(r)}collapseAll(){this.expansionModel.clear()}expandDescendants(r){let e=[r];e.push(...this.getDescendants(r)),this.expansionModel.select(...e.map(i=>this._trackByValue(i)))}collapseDescendants(r){let e=[r];e.push(...this.getDescendants(r)),this.expansionModel.deselect(...e.map(i=>this._trackByValue(i)))}_trackByValue(r){return this.trackBy?this.trackBy(r):r}}{constructor(r,e,i){super(),this.getLevel=r,this.isExpandable=e,this.options=i,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(r){const i=[];for(let o=this.dataNodes.indexOf(r)+1;o<this.dataNodes.length&&this.getLevel(r)<this.getLevel(this.dataNodes[o]);o++)i.push(this.dataNodes[o]);return i}expandAll(){this.expansionModel.select(...this.dataNodes.map(r=>this._trackByValue(r)))}}const Br=new t.OlP("CDK_TREE_NODE_OUTLET_NODE");let Zi=(()=>{class n{constructor(e,i){this.viewContainer=e,this._node=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.s_b),t.Y36(Br,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","cdkTreeNodeOutlet",""]]}),n})();class Ba{constructor(r){this.$implicit=r}}let ti=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),n})(),St=(()=>{class n{constructor(e,i){this._differs=e,this._changeDetectorRef=i,this._onDestroy=new k.x,this._levels=new Map,this.viewChange=new wi.X({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(i=>!i.when);this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;!function(n){return n&&"function"==typeof n.connect}(this._dataSource)?function(n){return!!n&&(n instanceof Q.y||(0,hr.m)(n.lift)&&(0,hr.m)(n.subscribe))}(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=(0,oe.of)(this._dataSource)):e=this._dataSource.connect(this),e&&(this._dataSubscription=e.pipe(L(this._onDestroy)).subscribe(i=>this.renderNodeChanges(i)))}renderNodeChanges(e,i=this._dataDiffer,o=this._nodeOutlet.viewContainer,d){const u=i.diff(e);!u||(u.forEachOperation((f,_,b)=>{if(null==f.previousIndex)this.insertNode(e[b],b,o,d);else if(null==b)o.remove(_),this._levels.delete(f.item);else{const w=o.get(_);o.move(w,b)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,i){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(d=>d.when&&d.when(i,e))||this._defaultNodeDef}insertNode(e,i,o,d){const u=this._getNodeDef(e,i),f=new Ba(e);f.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==d&&this._levels.has(d)?this._levels.get(d)+1:0,this._levels.set(e,f.level),(o||this._nodeOutlet.viewContainer).createEmbeddedView(u.template,f,i),ke.mostRecentTreeNode&&(ke.mostRecentTreeNode.data=e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.ZZ4),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cdk-tree"]],contentQueries:function(e,i,o){if(1&e&&t.Suo(o,ti,5),2&e){let d;t.iGM(d=t.CRH())&&(i._nodeDefs=d)}},viewQuery:function(e,i){if(1&e&&t.Gf(Zi,7),2&e){let o;t.iGM(o=t.CRH())&&(i._nodeOutlet=o.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,i){1&e&&t.GkF(0,0)},directives:[Zi],encapsulation:2}),n})(),ke=(()=>{class n{constructor(e,i){this._elementRef=e,this._tree=i,this._destroyed=new k.x,this._dataChanges=new k.x,n.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}_setExpanded(e){this._isAriaExpanded=e,this._elementRef.nativeElement.setAttribute("aria-expanded",`${e}`)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(n){let r=n.parentElement;for(;r&&!Jd(r);)r=r.parentElement;return r?r.classList.contains("cdk-nested-tree-node")?J(r.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngDoCheck(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}ngOnDestroy(){n.mostRecentTreeNode===this&&(n.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(St))},n.\u0275dir=t.lG2({type:n,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),n.mostRecentTreeNode=null,n})();function Jd(n){const r=n.classList;return!(!(null==r?void 0:r.contains("cdk-nested-tree-node"))&&!(null==r?void 0:r.contains("cdk-tree")))}const Qd=/([A-Za-z%]+)$/;let Nr=(()=>{class n{constructor(e,i,o,d){this._treeNode=e,this._tree=i,this._element=o,this._dir=d,this._destroyed=new k.x,this.indentUnits="px",this._indent=40,this._setPadding(),d&&d.change.pipe(L(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,i=null==this._level?e:this._level;return"number"==typeof i?`${i*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const i=this._paddingIndent();if(i!==this._currentPadding||e){const o=this._element.nativeElement,d=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",u="paddingLeft"===d?"paddingRight":"paddingLeft";o.style[d]=i||"",o.style[u]="",this._currentPadding=i}}_setLevelInput(e){this._level=J(e,null),this._setPadding()}_setIndentInput(e){let i=e,o="px";if("string"==typeof e){const d=e.split(Qd);i=d[0],o=d[1]||o}this.indentUnits=o,this._indent=J(i),this._setPadding()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ke),t.Y36(St),t.Y36(t.SBq),t.Y36(K,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),n})(),rs=(()=>{class n{constructor(e,i){this._tree=e,this._treeNode=i,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=E(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(St),t.Y36(ke))},n.\u0275dir=t.lG2({type:n,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,i){1&e&&t.NdJ("click",function(d){return i._toggle(d)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),n})(),Ha=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();const Ya=new t.GfV("12.2.1");var le=F(6237);const Ga=new t.GfV("12.2.1"),nc=new t.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let P=(()=>{class n{constructor(e,i,o){this._hasDoneGlobalChecks=!1,this._document=o,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=i,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const e=this._document.defaultView||window;return"object"==typeof e&&e?e:null}_checkIsEnabled(e){return!(!(0,t.X6Q)()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_isTestEnv(){const e=this._getWindow();return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const i=getComputedStyle(e);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Ga.full!==Ya.full&&console.warn("The Angular Material version ("+Ga.full+") does not match the Angular CDK version ("+Ya.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Fi),t.LFG(nc,8),t.LFG(S.K0))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Wt],Wt]}),n})();function ce(n){return class extends n{constructor(...r){super(...r),this._disabled=!1}get disabled(){return this._disabled}set disabled(r){this._disabled=E(r)}}}function tt(n,r){return class extends n{constructor(...e){super(...e),this.defaultColor=r,this.color=r}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Oe(n){return class extends n{constructor(...r){super(...r),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(r){this._disableRipple=E(r)}}}function xt(n,r=0){return class extends n{constructor(...e){super(...e),this._tabIndex=r,this.defaultTabIndex=r}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?J(e):this.defaultTabIndex}}}const rc=new t.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,t.f3M)(t.soG)}});class ye{constructor(){this._localeChanges=new k.x,this.localeChanges=this._localeChanges}getValidDateOrNull(r){return this.isDateInstance(r)&&this.isValid(r)?r:null}deserialize(r){return null==r||this.isDateInstance(r)&&this.isValid(r)?r:this.invalid()}setLocale(r){this.locale=r,this._localeChanges.next()}compareDate(r,e){return this.getYear(r)-this.getYear(e)||this.getMonth(r)-this.getMonth(e)||this.getDate(r)-this.getDate(e)}sameDate(r,e){if(r&&e){let i=this.isValid(r),o=this.isValid(e);return i&&o?!this.compareDate(r,e):i==o}return r==e}clampDate(r,e,i){return e&&this.compareDate(r,e)<0?e:i&&this.compareDate(r,i)>0?i:r}}const Tt=new t.OlP("mat-date-formats");let gi;try{gi="undefined"!=typeof Intl}catch(n){gi=!1}const sc={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},ac=Hr(31,n=>String(n+1)),lc={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},dc=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Hr(n,r){const e=Array(n);for(let i=0;i<n;i++)e[i]=r(i);return e}let cc=(()=>{class n extends ye{constructor(e,i){super(),this.useUtcForDisplay=!0,super.setLocale(e),this.useUtcForDisplay=!i.TRIDENT,this._clampDate=i.TRIDENT||i.EDGE}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){if(gi){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Hr(12,o=>this._stripDirectionalityCharacters(this._format(i,new Date(2017,o,1))))}return sc[e]}getDateNames(){if(gi){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Hr(31,i=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,i+1))))}return ac}getDayOfWeekNames(e){if(gi){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Hr(7,o=>this._stripDirectionalityCharacters(this._format(i,new Date(2017,0,o+1))))}return lc[e]}getYearName(e){if(gi){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(i,e))}return String(this.getYear(e))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,o){let d=this._createDateWithOverflow(e,i,o);return d.getMonth(),d}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");if(gi){this._clampDate&&(e.getFullYear()<1||e.getFullYear()>9999)&&(e=this.clone(e)).setFullYear(Math.max(1,Math.min(9999,e.getFullYear()))),i=Object.assign(Object.assign({},i),{timeZone:"utc"});const o=new Intl.DateTimeFormat(this.locale,i);return this._stripDirectionalityCharacters(this._format(o,e))}return this._stripDirectionalityCharacters(e.toDateString())}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let o=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(o)!=((this.getMonth(e)+i)%12+12)%12&&(o=this._createDateWithOverflow(this.getYear(o),this.getMonth(o),0)),o}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(dc.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,o){const d=new Date;return d.setFullYear(e,i,o),d.setHours(0,0,0,0),d}_2digit(e){return("00"+e).slice(-2)}_stripDirectionalityCharacters(e){return e.replace(/[\u200e\u200f]/g,"")}_format(e,i){const o=new Date;return o.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),o.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(o)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(rc,8),t.LFG(H))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),uc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:ye,useClass:cc}],imports:[[Le]]}),n})();const Ln={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let za=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:Tt,useValue:Ln}],imports:[[uc]]}),n})(),qe=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),Yr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P],P]}),n})();class pc{constructor(r,e,i){this._renderer=r,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ua={enterDuration:225,exitDuration:150},cs=ut({passive:!0}),qa=["mousedown","touchstart"],ja=["mouseup","mouseleave","touchend","touchcancel"];class hs{constructor(r,e,i,o){this._target=r,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=ue(i))}fadeInRipple(r,e,i={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),d=Object.assign(Object.assign({},Ua),i.animation);i.centered&&(r=o.left+o.width/2,e=o.top+o.height/2);const u=i.radius||function(n,r,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),o=Math.max(Math.abs(r-e.top),Math.abs(r-e.bottom));return Math.sqrt(i*i+o*o)}(r,e,o),f=r-o.left,_=e-o.top,b=d.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=f-u+"px",w.style.top=_-u+"px",w.style.height=2*u+"px",w.style.width=2*u+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(w),window.getComputedStyle(w).getPropertyValue("opacity"),w.style.transform="scale(1)";const x=new pc(this,w,i);return x.state=0,this._activeRipples.add(x),i.persistent||(this._mostRecentTransientRipple=x),this._runTimeoutOutsideZone(()=>{const A=x===this._mostRecentTransientRipple;x.state=1,!i.persistent&&(!A||!this._isPointerDown)&&x.fadeOut()},b),x}fadeOutRipple(r){const e=this._activeRipples.delete(r);if(r===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=r.element,o=Object.assign(Object.assign({},Ua),r.config.animation);i.style.transitionDuration=`${o.exitDuration}ms`,i.style.opacity="0",r.state=2,this._runTimeoutOutsideZone(()=>{r.state=3,i.parentNode.removeChild(i)},o.exitDuration)}fadeOutAll(){this._activeRipples.forEach(r=>r.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(r=>{r.config.persistent||r.fadeOut()})}setupTriggerEvents(r){const e=ue(r);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(qa))}handleEvent(r){"mousedown"===r.type?this._onMousedown(r):"touchstart"===r.type?this._onTouchStart(r):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ja),this._pointerUpEventsRegistered=!0)}_onMousedown(r){const e=Ii(r),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(r.clientX,r.clientY,this._target.rippleConfig))}_onTouchStart(r){if(!this._target.rippleDisabled&&!nr(r)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=r.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(r=>{!r.config.persistent&&(1===r.state||r.config.terminateOnPointerUp&&0===r.state)&&r.fadeOut()}))}_runTimeoutOutsideZone(r,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(r,e))}_registerEvents(r){this._ngZone.runOutsideAngular(()=>{r.forEach(e=>{this._triggerElement.addEventListener(e,this,cs)})})}_removeTriggerEvents(){this._triggerElement&&(qa.forEach(r=>{this._triggerElement.removeEventListener(r,this,cs)}),this._pointerUpEventsRegistered&&ja.forEach(r=>{this._triggerElement.removeEventListener(r,this,cs)}))}}const Gr=new t.OlP("mat-ripple-global-options");let Ne=(()=>{class n{constructor(e,i,o,d,u){this._elementRef=e,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=d||{},this._rippleRenderer=new hs(this,i,e,o)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,o){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(H),t.Y36(Gr,8),t.Y36(le.Qb,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P,Le],P]}),n})(),us=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P]]}),n})(),D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[gt,S.ez,P,us]]}),n})();var T=F(482);const I=oo();class V{constructor(r,e){this._viewportRuler=r,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const r=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=r.style.left||"",this._previousHTMLStyles.top=r.style.top||"",r.style.left=_e(-this._previousScrollPosition.left),r.style.top=_e(-this._previousScrollPosition.top),r.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const r=this._document.documentElement,i=r.style,o=this._document.body.style,d=i.scrollBehavior||"",u=o.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,r.classList.remove("cdk-global-scrollblock"),I&&(i.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),I&&(i.scrollBehavior=d,o.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class q{constructor(r,e,i,o){this._scrollDispatcher=r,this._ngZone=e,this._viewportRuler=i,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(r){this._overlayRef=r}enable(){if(this._scrollSubscription)return;const r=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class De{enable(){}disable(){}attach(){}}function ct(n,r){return r.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function Nn(n,r){return r.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class ps{constructor(r,e,i,o){this._scrollDispatcher=r,this._viewportRuler=e,this._ngZone=i,this._config=o,this._scrollSubscription=null}attach(r){this._overlayRef=r}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:o}=this._viewportRuler.getViewportSize();ct(e,[{width:i,height:o,bottom:o,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let fs=(()=>{class n{constructor(e,i,o,d){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=o,this.noop=()=>new De,this.close=u=>new q(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new V(this._viewportRuler,this._document),this.reposition=u=>new ps(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=d}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(pt),t.LFG(Be),t.LFG(t.R0b),t.LFG(S.K0))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(pt),t.LFG(Be),t.LFG(t.R0b),t.LFG(S.K0))},token:n,providedIn:"root"}),n})();class Ji{constructor(r){if(this.scrollStrategy=new De,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,r){const e=Object.keys(r);for(const i of e)void 0!==r[i]&&(this[i]=r[i])}}}class W_{constructor(r,e,i,o,d){this.offsetX=i,this.offsetY=o,this.panelClass=d,this.originX=r.originX,this.originY=r.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class J_{constructor(r,e){this.connectionPair=r,this.scrollableViewProperties=e}}let Iu=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.K0))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(S.K0))},token:n,providedIn:"root"}),n})(),Q_=(()=>{class n extends Iu{constructor(e){super(e),this._keydownListener=i=>{const o=this._attachedOverlays;for(let d=o.length-1;d>-1;d--)if(o[d]._keydownEvents.observers.length>0){o[d]._keydownEvents.next(i);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.K0))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(S.K0))},token:n,providedIn:"root"}),n})(),$_=(()=>{class n extends Iu{constructor(e,i){super(e),this._platform=i,this._cursorStyleIsSet=!1,this._clickListener=o=>{const d=rt(o),u=this._attachedOverlays.slice();for(let f=u.length-1;f>-1;f--){const _=u[f];if(!(_._outsidePointerEvents.observers.length<1)&&_.hasAttached()){if(_.overlayElement.contains(d))break;_._outsidePointerEvents.next(o)}}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.K0),t.LFG(H))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(S.K0),t.LFG(H))},token:n,providedIn:"root"}),n})();const Qi="undefined"!=typeof window?window:{},Ou=void 0!==Qi.__karma__&&!!Qi.__karma__||void 0!==Qi.jasmine&&!!Qi.jasmine||void 0!==Qi.jest&&!!Qi.jest||void 0!==Qi.Mocha&&!!Qi.Mocha;let ms=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ou){const o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let d=0;d<o.length;d++)o[d].parentNode.removeChild(o[d])}const i=this._document.createElement("div");i.classList.add(e),Ou?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.K0),t.LFG(H))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(S.K0),t.LFG(H))},token:n,providedIn:"root"}),n})();class X_{constructor(r,e,i,o,d,u,f,_,b){this._portalOutlet=r,this._host=e,this._pane=i,this._config=o,this._ngZone=d,this._keyboardDispatcher=u,this._document=f,this._location=_,this._outsideClickDispatcher=b,this._backdropElement=null,this._backdropClick=new k.x,this._attachments=new k.x,this._detachments=new k.x,this._locationChanges=U.w0.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._keydownEvents=new k.x,this._outsidePointerEvents=new k.x,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(r){let e=this._portalOutlet.attach(r);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ee.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const r=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),r}dispose(){const r=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,r&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(r){r!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=r,this.hasAttached()&&(r.attach(this),this.updatePosition()))}updateSize(r){this._config=Object.assign(Object.assign({},this._config),r),this._updateElementSize()}setDirection(r){this._config=Object.assign(Object.assign({},this._config),{direction:r}),this._updateElementDirection()}addPanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!0)}removePanelClass(r){this._pane&&this._toggleClasses(this._pane,r,!1)}getDirection(){const r=this._config.direction;return r?"string"==typeof r?r:r.value:"ltr"}updateScrollStrategy(r){r!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=r,this.hasAttached()&&(r.attach(this),r.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const r=this._pane.style;r.width=_e(this._config.width),r.height=_e(this._config.height),r.minWidth=_e(this._config.minWidth),r.minHeight=_e(this._config.minHeight),r.maxWidth=_e(this._config.maxWidth),r.maxHeight=_e(this._config.maxHeight)}_togglePointerEvents(r){this._pane.style.pointerEvents=r?"":"none"}_attachBackdrop(){const r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let r=this._backdropElement;if(!r)return;let e,i=()=>{r&&(r.removeEventListener("click",this._backdropClickHandler),r.removeEventListener("transitionend",i),r.parentNode&&r.parentNode.removeChild(r)),this._backdropElement==r&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(r,this._config.backdropClass,!1),clearTimeout(e)};r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{r.addEventListener("transitionend",i)}),r.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(r,e,i){const o=r.classList;j(e).forEach(d=>{d&&(i?o.add(d):o.remove(d))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const r=this._ngZone.onStable.pipe(L((0,ie.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),r.unsubscribe())})})}_disposeScrollStrategy(){const r=this._scrollStrategy;r&&(r.disable(),r.detach&&r.detach())}}const Fu="cdk-overlay-connected-position-bounding-box",K_=/([A-Za-z%]+)$/;class gc{constructor(r,e,i,o,d){this._viewportRuler=e,this._document=i,this._platform=o,this._overlayContainer=d,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new k.x,this._resizeSubscription=U.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(r)}get positions(){return this._preferredPositions}attach(r){this._validatePositions(),r.hostElement.classList.add(Fu),this._overlayRef=r,this._boundingBox=r.hostElement,this._pane=r.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const r=this._originRect,e=this._overlayRect,i=this._viewportRect,o=[];let d;for(let u of this._preferredPositions){let f=this._getOriginPoint(r,u),_=this._getOverlayPoint(f,e,u),b=this._getOverlayFit(_,e,i,u);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,f);this._canFitWithFlexibleDimensions(b,_,i)?o.push({position:u,origin:f,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(f,u)}):(!d||d.overlayFit.visibleArea<b.visibleArea)&&(d={overlayFit:b,overlayPoint:_,originPoint:f,position:u,overlayRect:e})}if(o.length){let u=null,f=-1;for(const _ of o){const b=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);b>f&&(f=b,u=_)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Vn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Fu),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const r=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,r);this._applyPosition(r,e)}}withScrollableContainers(r){return this._scrollables=r,this}withPositions(r){return this._preferredPositions=r,-1===r.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(r){return this._viewportMargin=r,this}withFlexibleDimensions(r=!0){return this._hasFlexibleDimensions=r,this}withGrowAfterOpen(r=!0){return this._growAfterOpen=r,this}withPush(r=!0){return this._canPush=r,this}withLockedPosition(r=!0){return this._positionLocked=r,this}setOrigin(r){return this._origin=r,this}withDefaultOffsetX(r){return this._offsetX=r,this}withDefaultOffsetY(r){return this._offsetY=r,this}withTransformOriginOn(r){return this._transformOriginSelector=r,this}_getOriginPoint(r,e){let i,o;if("center"==e.originX)i=r.left+r.width/2;else{const d=this._isRtl()?r.right:r.left,u=this._isRtl()?r.left:r.right;i="start"==e.originX?d:u}return o="center"==e.originY?r.top+r.height/2:"top"==e.originY?r.top:r.bottom,{x:i,y:o}}_getOverlayPoint(r,e,i){let o,d;return o="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,d="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:r.x+o,y:r.y+d}}_getOverlayFit(r,e,i,o){const d=Lu(e);let{x:u,y:f}=r,_=this._getOffset(o,"x"),b=this._getOffset(o,"y");_&&(u+=_),b&&(f+=b);let A=0-f,O=f+d.height-i.height,B=this._subtractOverflows(d.width,0-u,u+d.width-i.width),z=this._subtractOverflows(d.height,A,O),G=B*z;return{visibleArea:G,isCompletelyWithinViewport:d.width*d.height===G,fitsInViewportVertically:z===d.height,fitsInViewportHorizontally:B==d.width}}_canFitWithFlexibleDimensions(r,e,i){if(this._hasFlexibleDimensions){const o=i.bottom-e.y,d=i.right-e.x,u=Pu(this._overlayRef.getConfig().minHeight),f=Pu(this._overlayRef.getConfig().minWidth),b=r.fitsInViewportHorizontally||null!=f&&f<=d;return(r.fitsInViewportVertically||null!=u&&u<=o)&&b}return!1}_pushOverlayOnScreen(r,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:r.x+this._previousPushAmount.x,y:r.y+this._previousPushAmount.y};const o=Lu(e),d=this._viewportRect,u=Math.max(r.x+o.width-d.width,0),f=Math.max(r.y+o.height-d.height,0),_=Math.max(d.top-i.top-r.y,0),b=Math.max(d.left-i.left-r.x,0);let w=0,x=0;return w=o.width<=d.width?b||-u:r.x<this._viewportMargin?d.left-i.left-r.x:0,x=o.height<=d.height?_||-f:r.y<this._viewportMargin?d.top-i.top-r.y:0,this._previousPushAmount={x:w,y:x},{x:r.x+w,y:r.y+x}}_applyPosition(r,e){if(this._setTransformOrigin(r),this._setOverlayElementStyles(e,r),this._setBoundingBoxStyles(e,r),r.panelClass&&this._addPanelClasses(r.panelClass),this._lastPosition=r,this._positionChanges.observers.length){const i=this._getScrollVisibility(),o=new J_(r,i);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(r){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,o=r.overlayY;i="center"===r.overlayX?"center":this._isRtl()?"start"===r.overlayX?"right":"left":"start"===r.overlayX?"left":"right";for(let d=0;d<e.length;d++)e[d].style.transformOrigin=`${i} ${o}`}_calculateBoundingBoxRect(r,e){const i=this._viewportRect,o=this._isRtl();let d,u,f,w,x,A;if("top"===e.overlayY)u=r.y,d=i.height-u+this._viewportMargin;else if("bottom"===e.overlayY)f=i.height-r.y+2*this._viewportMargin,d=i.height-f+this._viewportMargin;else{const O=Math.min(i.bottom-r.y+i.top,r.y),B=this._lastBoundingBoxSize.height;d=2*O,u=r.y-O,d>B&&!this._isInitialRender&&!this._growAfterOpen&&(u=r.y-B/2)}if("end"===e.overlayX&&!o||"start"===e.overlayX&&o)A=i.width-r.x+this._viewportMargin,w=r.x-this._viewportMargin;else if("start"===e.overlayX&&!o||"end"===e.overlayX&&o)x=r.x,w=i.right-r.x;else{const O=Math.min(i.right-r.x+i.left,r.x),B=this._lastBoundingBoxSize.width;w=2*O,x=r.x-O,w>B&&!this._isInitialRender&&!this._growAfterOpen&&(x=r.x-B/2)}return{top:u,left:x,bottom:f,right:A,width:w,height:d}}_setBoundingBoxStyles(r,e){const i=this._calculateBoundingBoxRect(r,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const d=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;o.height=_e(i.height),o.top=_e(i.top),o.bottom=_e(i.bottom),o.width=_e(i.width),o.left=_e(i.left),o.right=_e(i.right),o.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",o.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",d&&(o.maxHeight=_e(d)),u&&(o.maxWidth=_e(u))}this._lastBoundingBoxSize=i,Vn(this._boundingBox.style,o)}_resetBoundingBoxStyles(){Vn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Vn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(r,e){const i={},o=this._hasExactPosition(),d=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(o){const w=this._viewportRuler.getViewportScrollPosition();Vn(i,this._getExactOverlayY(e,r,w)),Vn(i,this._getExactOverlayX(e,r,w))}else i.position="static";let f="",_=this._getOffset(e,"x"),b=this._getOffset(e,"y");_&&(f+=`translateX(${_}px) `),b&&(f+=`translateY(${b}px)`),i.transform=f.trim(),u.maxHeight&&(o?i.maxHeight=_e(u.maxHeight):d&&(i.maxHeight="")),u.maxWidth&&(o?i.maxWidth=_e(u.maxWidth):d&&(i.maxWidth="")),Vn(this._pane.style,i)}_getExactOverlayY(r,e,i){let o={top:"",bottom:""},d=this._getOverlayPoint(e,this._overlayRect,r);this._isPushed&&(d=this._pushOverlayOnScreen(d,this._overlayRect,i));let u=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return d.y-=u,"bottom"===r.overlayY?o.bottom=this._document.documentElement.clientHeight-(d.y+this._overlayRect.height)+"px":o.top=_e(d.y),o}_getExactOverlayX(r,e,i){let u,o={left:"",right:""},d=this._getOverlayPoint(e,this._overlayRect,r);return this._isPushed&&(d=this._pushOverlayOnScreen(d,this._overlayRect,i)),u=this._isRtl()?"end"===r.overlayX?"left":"right":"end"===r.overlayX?"right":"left","right"===u?o.right=this._document.documentElement.clientWidth-(d.x+this._overlayRect.width)+"px":o.left=_e(d.x),o}_getScrollVisibility(){const r=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Nn(r,i),isOriginOutsideView:ct(r,i),isOverlayClipped:Nn(e,i),isOverlayOutsideView:ct(e,i)}}_subtractOverflows(r,...e){return e.reduce((i,o)=>i-Math.max(o,0),r)}_getNarrowedViewportRect(){const r=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+r-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:r-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(r,e){return"x"===e?null==r.offsetX?this._offsetX:r.offsetX:null==r.offsetY?this._offsetY:r.offsetY}_validatePositions(){}_addPanelClasses(r){this._pane&&j(r).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(r=>{this._pane.classList.remove(r)}),this._appliedPanelClasses=[])}_getOriginRect(){const r=this._origin;if(r instanceof t.SBq)return r.nativeElement.getBoundingClientRect();if(r instanceof Element)return r.getBoundingClientRect();const e=r.width||0,i=r.height||0;return{top:r.y,bottom:r.y+i,left:r.x,right:r.x+e,height:i,width:e}}}function Vn(n,r){for(let e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n}function Pu(n){if("number"!=typeof n&&null!=n){const[r,e]=n.split(K_);return e&&"px"!==e?null:parseFloat(r)}return n||null}function Lu(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class eg{constructor(r,e,i,o,d,u,f){this._preferredPositions=[],this._positionStrategy=new gc(i,o,d,u,f).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(r,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(r){this._overlayRef=r,this._positionStrategy.attach(r),this._direction&&(r.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(r){this._positionStrategy.withScrollableContainers(r)}withFallbackPosition(r,e,i,o){const d=new W_(r,e,i,o);return this._preferredPositions.push(d),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(r){return this._overlayRef?this._overlayRef.setDirection(r):this._direction=r,this}withOffsetX(r){return this._positionStrategy.withDefaultOffsetX(r),this}withOffsetY(r){return this._positionStrategy.withDefaultOffsetY(r),this}withLockedPosition(r){return this._positionStrategy.withLockedPosition(r),this}withPositions(r){return this._preferredPositions=r.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(r){return this._positionStrategy.setOrigin(r),this}}const Bu="cdk-global-overlay-wrapper";class tg{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(r){const e=r.getConfig();this._overlayRef=r,this._width&&!e.width&&r.updateSize({width:this._width}),this._height&&!e.height&&r.updateSize({height:this._height}),r.hostElement.classList.add(Bu),this._isDisposed=!1}top(r=""){return this._bottomOffset="",this._topOffset=r,this._alignItems="flex-start",this}left(r=""){return this._rightOffset="",this._leftOffset=r,this._justifyContent="flex-start",this}bottom(r=""){return this._topOffset="",this._bottomOffset=r,this._alignItems="flex-end",this}right(r=""){return this._leftOffset="",this._rightOffset=r,this._justifyContent="flex-end",this}width(r=""){return this._overlayRef?this._overlayRef.updateSize({width:r}):this._width=r,this}height(r=""){return this._overlayRef?this._overlayRef.updateSize({height:r}):this._height=r,this}centerHorizontally(r=""){return this.left(r),this._justifyContent="center",this}centerVertically(r=""){return this.top(r),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const r=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:o,height:d,maxWidth:u,maxHeight:f}=i,_=!("100%"!==o&&"100vw"!==o||u&&"100%"!==u&&"100vw"!==u),b=!("100%"!==d&&"100vh"!==d||f&&"100%"!==f&&"100vh"!==f);r.position=this._cssPosition,r.marginLeft=_?"0":this._leftOffset,r.marginTop=b?"0":this._topOffset,r.marginBottom=this._bottomOffset,r.marginRight=this._rightOffset,_?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=b?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const r=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Bu),i.justifyContent=i.alignItems=r.marginTop=r.marginBottom=r.marginLeft=r.marginRight=r.position="",this._overlayRef=null,this._isDisposed=!0}}let ig=(()=>{class n{constructor(e,i,o,d){this._viewportRuler=e,this._document=i,this._platform=o,this._overlayContainer=d}global(){return new tg}connectedTo(e,i,o){return new eg(i,o,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new gc(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Be),t.LFG(S.K0),t.LFG(H),t.LFG(ms))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(Be),t.LFG(S.K0),t.LFG(H),t.LFG(ms))},token:n,providedIn:"root"}),n})(),ng=0,je=(()=>{class n{constructor(e,i,o,d,u,f,_,b,w,x,A){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=o,this._positionBuilder=d,this._keyboardDispatcher=u,this._injector=f,this._ngZone=_,this._document=b,this._directionality=w,this._location=x,this._outsideClickDispatcher=A}create(e){const i=this._createHostElement(),o=this._createPaneElement(i),d=this._createPortalOutlet(o),u=new Ji(e);return u.direction=u.direction||this._directionality.value,new X_(d,i,o,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+ng++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(t.z2F)),new ft(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(fs),t.LFG(ms),t.LFG(t._Vd),t.LFG(ig),t.LFG(Q_),t.LFG(t.zs3),t.LFG(t.R0b),t.LFG(S.K0),t.LFG(K),t.LFG(S.Ye),t.LFG($_))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const ag={provide:new t.OlP("cdk-connected-overlay-scroll-strategy"),deps:[je],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let vi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[je,ag],imports:[[Wt,Xe,yn],yn]}),n})();var lg=F(1260),Hu=F(3856),dg=F(9607),cg=F(5526);var M=F(7238);let Bc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[S.ez,P,li],P]}),n})();var Nc=F(1403);const Bv={provide:new t.OlP("mat-autocomplete-scroll-strategy"),deps:[je],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Yv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Bv],imports:[[vi,D,P,S.ez],kt,D,P]}),n})(),Uv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[gn,P],P]}),n})();F(1598),F(9044);let Xv=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[vi,P,Xe],P]}),n})();const Kp=["mat-button",""],ef=["*"],eb=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],tb=tt(ce(Oe(class{constructor(n){this._elementRef=n}})));let en=(()=>{class n extends tb{constructor(e,i,o){super(e),this._focusMonitor=i,this._animationMode=o,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const d of eb)this._hasHostAttributes(d)&&this._getHostElement().classList.add(d);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(fe),t.Y36(le.Qb,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&t.Gf(Ne,5),2&e){let o;t.iGM(o=t.CRH())&&(i.ripple=o.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(t.uIk("disabled",i.disabled||null),t.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[t.qOj],attrs:Kp,ngContentSelectors:ef,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"span",0),t.Hsn(1),t.qZA(),t._UZ(2,"span",1),t._UZ(3,"span",2)),2&e&&(t.xp6(2),t.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),t.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[Ne],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),ys=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[gt,P],P]}),n})(),lb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P,gt],P]}),n})(),mb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P],P]}),n})(),cf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),xb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[gt,P,li,cf],P,cf]}),n})();const ff=new t.OlP("mat-chips-default-options"),Hb={separatorKeyCodes:[13]};let Yb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[qe,{provide:ff,useValue:Hb}],imports:[[P]]}),n})();var Gb=F(8567),zb=F(5894),Hc=F(3050),mf=F(8047),_f=F(3766);class gf{}class Ci{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?this.lazyInit="string"==typeof r?()=>{this.headers=new Map,r.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const o=e.slice(0,i),d=o.toLowerCase(),u=e.slice(i+1).trim();this.maybeSetNormalizedName(o,d),this.headers.has(d)?this.headers.get(d).push(u):this.headers.set(d,[u])}})}:()=>{this.headers=new Map,Object.keys(r).forEach(e=>{let i=r[e];const o=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(o,i),this.maybeSetNormalizedName(e,o))})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();const e=this.headers.get(r.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,e){return this.clone({name:r,value:e,op:"a"})}set(r,e){return this.clone({name:r,value:e,op:"s"})}delete(r,e){return this.clone({name:r,value:e,op:"d"})}maybeSetNormalizedName(r,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,r)}init(){this.lazyInit&&(this.lazyInit instanceof Ci?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(e=>{this.headers.set(e,r.headers.get(e)),this.normalizedNames.set(e,r.normalizedNames.get(e))})}clone(r){const e=new Ci;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ci?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([r]),e}applyUpdate(r){const e=r.name.toLowerCase();switch(r.op){case"a":case"s":let i=r.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(r.name,e);const o=("a"===r.op?this.headers.get(e):void 0)||[];o.push(...i),this.headers.set(e,o);break;case"d":const d=r.value;if(d){let u=this.headers.get(e);if(!u)return;u=u.filter(f=>-1===d.indexOf(f)),0===u.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>r(this.normalizedNames.get(e),this.headers.get(e)))}}class Ub{encodeKey(r){return bf(r)}encodeValue(r){return bf(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}}function bf(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function yf(n){return`${n}`}class tn{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new Ub,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,r){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const d=o.indexOf("="),[u,f]=-1==d?[r.decodeKey(o),""]:[r.decodeKey(o.slice(0,d)),r.decodeValue(o.slice(d+1))],_=e.get(u)||[];_.push(f),e.set(u,_)}),e}(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(e=>{const i=r.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();const e=this.map.get(r);return e?e[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,e){return this.clone({param:r,value:e,op:"a"})}appendAll(r){const e=[];return Object.keys(r).forEach(i=>{const o=r[i];Array.isArray(o)?o.forEach(d=>{e.push({param:i,value:d,op:"a"})}):e.push({param:i,value:o,op:"a"})}),this.clone(e)}set(r,e){return this.clone({param:r,value:e,op:"s"})}delete(r,e){return this.clone({param:r,value:e,op:"d"})}toString(){return this.init(),this.keys().map(r=>{const e=this.encoder.encodeKey(r);return this.map.get(r).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(r=>""!==r).join("&")}clone(r){const e=new tn({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(r),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":const e=("a"===r.op?this.map.get(r.param):void 0)||[];e.push(yf(r.value)),this.map.set(r.param,e);break;case"d":if(void 0===r.value){this.map.delete(r.param);break}{let i=this.map.get(r.param)||[];const o=i.indexOf(yf(r.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(r.param,i):this.map.delete(r.param)}}}),this.cloneFrom=this.updates=null)}}class jb{constructor(){this.map=new Map}set(r,e){return this.map.set(r,e),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}keys(){return this.map.keys()}}function Cf(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Mf(n){return"undefined"!=typeof Blob&&n instanceof Blob}function wf(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Cs{constructor(r,e,i,o){let d;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,d=o):d=i,d&&(this.reportProgress=!!d.reportProgress,this.withCredentials=!!d.withCredentials,d.responseType&&(this.responseType=d.responseType),d.headers&&(this.headers=d.headers),d.context&&(this.context=d.context),d.params&&(this.params=d.params)),this.headers||(this.headers=new Ci),this.context||(this.context=new jb),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+u}}else this.params=new tn,this.urlWithParams=e}serializeBody(){return null===this.body?null:Cf(this.body)||Mf(this.body)||wf(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof tn?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wf(this.body)?null:Mf(this.body)?this.body.type||null:Cf(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof tn?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(r={}){var e;const i=r.method||this.method,o=r.url||this.url,d=r.responseType||this.responseType,u=void 0!==r.body?r.body:this.body,f=void 0!==r.withCredentials?r.withCredentials:this.withCredentials,_=void 0!==r.reportProgress?r.reportProgress:this.reportProgress;let b=r.headers||this.headers,w=r.params||this.params;const x=null!==(e=r.context)&&void 0!==e?e:this.context;return void 0!==r.setHeaders&&(b=Object.keys(r.setHeaders).reduce((A,O)=>A.set(O,r.setHeaders[O]),b)),r.setParams&&(w=Object.keys(r.setParams).reduce((A,O)=>A.set(O,r.setParams[O]),w)),new Cs(i,o,u,{params:w,headers:b,context:x,reportProgress:_,responseType:d,withCredentials:f})}}var Ae=(()=>((Ae=Ae||{})[Ae.Sent=0]="Sent",Ae[Ae.UploadProgress=1]="UploadProgress",Ae[Ae.ResponseHeader=2]="ResponseHeader",Ae[Ae.DownloadProgress=3]="DownloadProgress",Ae[Ae.Response=4]="Response",Ae[Ae.User=5]="User",Ae))();class nl extends class{constructor(r,e=200,i="OK"){this.headers=r.headers||new Ci,this.status=void 0!==r.status?r.status:e,this.statusText=r.statusText||i,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(r={}){super(r),this.type=Ae.Response,this.body=void 0!==r.body?r.body:null}clone(r={}){return new nl({body:void 0!==r.body?r.body:this.body,headers:r.headers||this.headers,status:void 0!==r.status?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}}function zc(n,r){return{body:r,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let rl=(()=>{class n{constructor(e){this.handler=e}request(e,i,o={}){let d;if(e instanceof Cs)d=e;else{let _,b;_=o.headers instanceof Ci?o.headers:new Ci(o.headers),o.params&&(b=o.params instanceof tn?o.params:new tn({fromObject:o.params})),d=new Cs(e,i,void 0!==o.body?o.body:null,{headers:_,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const u=(0,oe.of)(d).pipe((0,_f.b)(_=>this.handler.handle(_)));if(e instanceof Cs||"events"===o.observe)return u;const f=u.pipe((0,re.h)(_=>_ instanceof nl));switch(o.observe||"body"){case"body":switch(d.responseType){case"arraybuffer":return f.pipe((0,X.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return f.pipe((0,X.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return f.pipe((0,X.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));case"json":default:return f.pipe((0,X.U)(_=>_.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new tn).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,o={}){return this.request("PATCH",e,zc(o,i))}post(e,i,o={}){return this.request("POST",e,zc(o,i))}put(e,i,o={}){return this.request("PUT",e,zc(o,i))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(gf))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var Zc=F(9075);const ty=["*"];function Ef(n){return Error(`Unable to find icon with the name "${n}"`)}function Af(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Rf(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Gn{constructor(r,e,i){this.url=r,this.svgText=e,this.options=i}}let ol=(()=>{class n{constructor(e,i,o,d){this._httpClient=e,this._sanitizer=i,this._errorHandler=d,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=o}addSvgIcon(e,i,o){return this.addSvgIconInNamespace("",e,i,o)}addSvgIconLiteral(e,i,o){return this.addSvgIconLiteralInNamespace("",e,i,o)}addSvgIconInNamespace(e,i,o,d){return this._addSvgIconConfig(e,i,new Gn(o,null,d))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,o,d){const u=this._sanitizer.sanitize(t.q3G.HTML,o);if(!u)throw Rf(o);return this._addSvgIconConfig(e,i,new Gn("",u,d))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,o){return this._addSvgIconSetConfig(e,new Gn(i,null,o))}addSvgIconSetLiteralInNamespace(e,i,o){const d=this._sanitizer.sanitize(t.q3G.HTML,i);if(!d)throw Rf(i);return this._addSvgIconSetConfig(e,new Gn("",d,o))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(t.q3G.RESOURCE_URL,e);if(!i)throw Af(e);const o=this._cachedIconsByUrl.get(i);return o?(0,oe.of)(sl(o)):this._loadSvgIconFromConfig(new Gn(e,null)).pipe((0,Ut.b)(d=>this._cachedIconsByUrl.set(i,d)),(0,X.U)(d=>sl(d)))}getNamedSvgIcon(e,i=""){const o=If(i,e);let d=this._svgIconConfigs.get(o);if(d)return this._getSvgFromConfig(d);if(d=this._getIconConfigFromResolvers(i,e),d)return this._svgIconConfigs.set(o,d),this._getSvgFromConfig(d);const u=this._iconSetConfigs.get(i);return u?this._getSvgFromIconSetConfigs(e,u):(0,Gb._)(Ef(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,oe.of)(sl(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,X.U)(i=>sl(i)))}_getSvgFromIconSetConfigs(e,i){const o=this._extractIconWithNameFromAnySet(e,i);return o?(0,oe.of)(o):function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=(0,Hu.jO)(n),i=(0,lg.D)(n),o=i.args,d=i.keys,u=new Q.y(function(f){var _=o.length;if(_)for(var b=new Array(_),w=_,x=_,A=function(B){var z=!1;(0,it.Xf)(o[B]).subscribe(new Qe.Q(f,function(G){z||(z=!0,x--),b[B]=G},function(){(!--w||!z)&&(x||f.next(d?(0,cg.n)(d,b):b),f.complete())}))},O=0;O<_;O++)A(O);else f.complete()});return e?u.pipe((0,dg.Z)(e)):u}(i.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe((0,zb.K)(f=>{const b=`Loading icon set URL: ${this._sanitizer.sanitize(t.q3G.RESOURCE_URL,u.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(b)),(0,oe.of)(null)})))).pipe((0,X.U)(()=>{const u=this._extractIconWithNameFromAnySet(e,i);if(!u)throw Ef(e);return u}))}_extractIconWithNameFromAnySet(e,i){for(let o=i.length-1;o>=0;o--){const d=i[o];if(d.svgText&&d.svgText.indexOf(e)>-1){const u=this._svgElementFromConfig(d),f=this._extractSvgIconFromSet(u,e,d.options);if(f)return f}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Ut.b)(i=>e.svgText=i),(0,X.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,oe.of)(null):this._fetchIcon(e).pipe((0,Ut.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,o){const d=e.querySelector(`[id="${i}"]`);if(!d)return null;const u=d.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,o);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),o);const f=this._svgElementFromString("<svg></svg>");return f.appendChild(u),this._setSvgAttributes(f,o)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const o=i.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){const i=this._svgElementFromString("<svg></svg>"),o=e.attributes;for(let d=0;d<o.length;d++){const{name:u,value:f}=o[d];"id"!==u&&i.setAttribute(u,f)}for(let d=0;d<e.childNodes.length;d++)e.childNodes[d].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[d].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:o,options:d}=e,u=null!==(i=null==d?void 0:d.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const f=this._sanitizer.sanitize(t.q3G.RESOURCE_URL,o);if(!f)throw Af(o);const _=this._inProgressUrlFetches.get(f);if(_)return _;const b=this._httpClient.get(f,{responseType:"text",withCredentials:u}).pipe((0,Hc.x)(()=>this._inProgressUrlFetches.delete(f)),(0,mf.B)());return this._inProgressUrlFetches.set(f,b),b}_addSvgIconConfig(e,i,o){return this._svgIconConfigs.set(If(e,i),o),this}_addSvgIconSetConfig(e,i){const o=this._iconSetConfigs.get(e);return o?o.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let o=0;o<this._resolvers.length;o++){const d=this._resolvers[o](i,e);if(d)return ry(d)?new Gn(d.url,null,d.options):new Gn(d,null)}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(rl,8),t.LFG(Zc.H7),t.LFG(S.K0,8),t.LFG(t.qLn))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(rl,8),t.LFG(Zc.H7),t.LFG(S.K0,8),t.LFG(t.qLn))},token:n,providedIn:"root"}),n})();function sl(n){return n.cloneNode(!0)}function If(n,r){return n+":"+r}function ry(n){return!(!n.url||!n.options)}const oy=tt(class{constructor(n){this._elementRef=n}}),sy=new t.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,t.f3M)(S.K0),r=n?n.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}}),Of=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],dy=Of.map(n=>`[${n}]`).join(", "),cy=/^url\(['"]?#(.*?)['"]?\)$/;let al=(()=>{class n extends oy{constructor(e,i,o,d,u){super(e),this._iconRegistry=i,this._location=d,this._errorHandler=u,this._inline=!1,this._currentIconFetch=U.w0.EMPTY,o||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=E(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=e.querySelectorAll("style");for(let d=0;d<i.length;d++)i[d].textContent+=" ";const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const o=e.childNodes[i];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&e.removeChild(o)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((o,d)=>{o.forEach(u=>{d.setAttribute(u.name,`url('${e}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(dy),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let d=0;d<i.length;d++)Of.forEach(u=>{const f=i[d],_=f.getAttribute(u),b=_?_.match(cy):null;if(b){let w=o.get(f);w||(w=[],o.set(f,w)),w.push({name:u,value:b[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,o]=this._splitIconName(e);i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe((0,ee.q)(1)).subscribe(d=>this._setSvgElement(d),d=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${o}! ${d.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(ol),t.$8M("aria-hidden"),t.Y36(sy),t.Y36(t.qLn))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(t.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),t.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[t.qOj],ngContentSelectors:ty,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Ff=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P],P]}),n})(),ll=(()=>{class n{constructor(){this.changes=new k.x,this.optionalLabel="Optional"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Ay={provide:ll,deps:[[new t.FiY,new t.tp0,ll]],useFactory:function(n){return n||new ll}};let Ny=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Ay,qe],imports:[[P,S.ez,Xe,ys,Ea,Ff,gt],P]}),n})();var Jc=F(6149);let Yf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Le]]}),n})(),zy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[qe],imports:[[Yf,Bc,P],Yf,Bc]}),n})(),Ms=(()=>{class n{constructor(){this.changes=new k.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,i){return`${e} \u2013 ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const CC={provide:new t.OlP("mat-datepicker-scroll-strategy"),deps:[je],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let AC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Ms,CC],imports:[[S.ez,ys,vi,gn,Xe,P],kt]}),n})();function RC(n,r){}class rh{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const IC={dialogContainer:(0,M.X$)("dialogContainer",[(0,M.SB)("void, exit",(0,M.oB)({opacity:0,transform:"scale(0.7)"})),(0,M.SB)("enter",(0,M.oB)({transform:"none"})),(0,M.eR)("* => enter",(0,M.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,M.oB)({transform:"none",opacity:1}))),(0,M.eR)("* => void, * => exit",(0,M.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,M.oB)({opacity:0})))])};let OC=(()=>{class n extends An{constructor(e,i,o,d,u,f){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=o,this._config=u,this._focusMonitor=f,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=_=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(_)),this._ariaLabelledBy=u.ariaLabelledBy||null,this._document=d}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=Pt(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=Pt())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=Pt();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(ir),t.Y36(t.sBO),t.Y36(S.K0,8),t.Y36(rh),t.Y36(fe))},n.\u0275dir=t.lG2({type:n,viewQuery:function(e,i){if(1&e&&t.Gf(Ie,7),2&e){let o;t.iGM(o=t.CRH())&&(i._portalOutlet=o.first)}},features:[t.qOj]}),n})(),FC=(()=>{class n extends OC{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let r;return function(i){return(r||(r=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&t.WFA("@dialogContainer.start",function(d){return i._onAnimationStart(d)})("@dialogContainer.done",function(d){return i._onAnimationDone(d)}),2&e&&(t.Ikx("id",i._id),t.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),t.d8E("@dialogContainer",i._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&t.YNc(0,RC,0,0,"ng-template",0)},directives:[Ie],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[IC.dialogContainer]}}),n})(),PC=0;class oh{constructor(r,e,i="mat-dialog-"+PC++){this._overlayRef=r,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new k.x,this._afterClosed=new k.x,this._beforeClosed=new k.x,this._state=0,e._id=i,e._animationStateChanged.pipe((0,re.h)(o=>"opened"===o.state),(0,ee.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,re.h)(o=>"closed"===o.state),(0,ee.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),r.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),r.keydownEvents().pipe((0,re.h)(o=>27===o.keyCode&&!this.disableClose&&!$(o))).subscribe(o=>{o.preventDefault(),sh(this,"keyboard")}),r.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():sh(this,"mouse")})}close(r){this._result=r,this._containerInstance._animationStateChanged.pipe((0,re.h)(e=>"closing"===e.state),(0,ee.q)(1)).subscribe(e=>{this._beforeClosed.next(r),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(r){let e=this._getPositionStrategy();return r&&(r.left||r.right)?r.left?e.left(r.left):e.right(r.right):e.centerHorizontally(),r&&(r.top||r.bottom)?r.top?e.top(r.top):e.bottom(r.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(r="",e=""){return this._overlayRef.updateSize({width:r,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(r){return this._overlayRef.addPanelClass(r),this}removePanelClass(r){return this._overlayRef.removePanelClass(r),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function sh(n,r,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=r),n.close(e)}const LC=new t.OlP("MatDialogData"),BC=new t.OlP("mat-dialog-default-options"),im=new t.OlP("mat-dialog-scroll-strategy"),VC={provide:im,deps:[je],useFactory:function(n){return()=>n.scrollStrategies.block()}};let HC=(()=>{class n{constructor(e,i,o,d,u,f,_,b,w){this._overlay=e,this._injector=i,this._defaultOptions=o,this._parentDialog=d,this._overlayContainer=u,this._dialogRefConstructor=_,this._dialogContainerType=b,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new k.x,this._afterOpenedAtThisLevel=new k.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,T.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,te.O)(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){(i=function(n,r){return Object.assign(Object.assign({},r),n)}(i,this._defaultOptions||new rh)).id&&this.getDialogById(i.id);const o=this._createOverlay(i),d=this._attachDialogContainer(o,i),u=this._attachDialogContent(e,d,o,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(u),u.afterClosed().subscribe(()=>this._removeOpenDialog(u)),this.afterOpened.next(u),d._initializeWithAttachedContent(),u}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new Ji({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const d=t.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:rh,useValue:i}]}),u=new Xt(this._dialogContainerType,i.viewContainerRef,d,i.componentFactoryResolver);return e.attach(u).instance}_attachDialogContent(e,i,o,d){const u=new this._dialogRefConstructor(o,i,d.id);if(e instanceof t.Rgc)i.attachTemplatePortal(new ze(e,null,{$implicit:d.data,dialogRef:u}));else{const f=this._createInjector(d,u,i),_=i.attachComponentPortal(new Xt(e,d.viewContainerRef,f));u.componentInstance=_.instance}return u.updateSize(d.width,d.height).updatePosition(d.position),u}_createInjector(e,i,o){const d=e&&e.viewContainerRef&&e.viewContainerRef.injector,u=[{provide:this._dialogContainerType,useValue:o},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!d||!d.get(K,null,t.XFs.Optional))&&u.push({provide:K,useValue:{value:e.direction,change:(0,oe.of)()}}),t.zs3.create({parent:d||this._injector,providers:u})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,d)=>{o?d.setAttribute("aria-hidden",o):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let o=i.length-1;o>-1;o--){let d=i[o];d!==e&&"SCRIPT"!==d.nodeName&&"STYLE"!==d.nodeName&&!d.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(d,d.getAttribute("aria-hidden")),d.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(je),t.Y36(t.zs3),t.Y36(void 0),t.Y36(void 0),t.Y36(ms),t.Y36(void 0),t.Y36(t.DyG),t.Y36(t.DyG),t.Y36(t.OlP))},n.\u0275dir=t.lG2({type:n}),n})(),ah=(()=>{class n extends HC{constructor(e,i,o,d,u,f,_){super(e,i,d,f,_,u,oh,FC,LC)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(je),t.LFG(t.zs3),t.LFG(S.Ye,8),t.LFG(BC,8),t.LFG(im),t.LFG(n,12),t.LFG(ms))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),zC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ah,VC],imports:[[vi,Xe,P],P]}),n})(),rm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P],P]}),n})(),JC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),cM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[S.ez,P,JC,Xe]]}),n})(),CM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Yr,P],Yr,P]}),n})(),FM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Yr,gt,P,us,S.ez],Yr,P,us,rm]}),n})();const PM=["mat-menu-item",""];function LM(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const vm=["*"];function BM(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(o){return t.CHM(e),t.oxw()._handleKeydown(o)})("click",function(){return t.CHM(e),t.oxw().closed.emit("click")})("@transformMenu.start",function(o){return t.CHM(e),t.oxw()._onAnimationStart(o)})("@transformMenu.done",function(o){return t.CHM(e),t.oxw()._onAnimationDone(o)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),t.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const ul={transformMenu:(0,M.X$)("transformMenu",[(0,M.SB)("void",(0,M.oB)({opacity:0,transform:"scale(0.8)"})),(0,M.eR)("void => enter",(0,M.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,M.oB)({opacity:1,transform:"scale(1)"}))),(0,M.eR)("* => void",(0,M.jt)("100ms 25ms linear",(0,M.oB)({opacity:0})))]),fadeInItems:(0,M.X$)("fadeInItems",[(0,M.SB)("showing",(0,M.oB)({opacity:1})),(0,M.eR)("void => *",[(0,M.oB)({opacity:0}),(0,M.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},bm=new t.OlP("MatMenuContent"),ph=new t.OlP("MAT_MENU_PANEL"),NM=Oe(ce(class{}));let pl=(()=>{class n extends NM{constructor(e,i,o,d,u){super(),this._elementRef=e,this._focusMonitor=o,this._parentMenu=d,this._changeDetectorRef=u,this.role="menuitem",this._hovered=new k.x,this._focused=new k.x,this._highlighted=!1,this._triggersSubmenu=!1,d&&d.addItem&&d.addItem(this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,i;const o=this._elementRef.nativeElement.cloneNode(!0),d=o.querySelectorAll("mat-icon, .material-icons");for(let u=0;u<d.length;u++){const f=d[u];null===(e=f.parentNode)||void 0===e||e.removeChild(f)}return(null===(i=o.textContent)||void 0===i?void 0:i.trim())||""}_setHighlighted(e){var i;this._highlighted=e,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(S.K0),t.Y36(fe),t.Y36(ph,8),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,i){1&e&&t.NdJ("click",function(d){return i._checkDisabled(d)})("mouseenter",function(){return i._handleMouseEnter()}),2&e&&(t.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:PM,ngContentSelectors:vm,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,i){1&e&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,LM,2,0,"svg",1)),2&e&&(t.xp6(1),t.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),t.xp6(1),t.Q6J("ngIf",i._triggersSubmenu))},directives:[Ne,S.O5],encapsulation:2,changeDetection:0}),n})();const ym=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let HM=0,ks=(()=>{class n{constructor(e,i,o){this._elementRef=e,this._ngZone=i,this._defaultOptions=o,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=U.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new k.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+HM++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=E(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=E(e)}set panelClass(e){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(o=>{this._classList[o]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(o=>{this._classList[o]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Ai(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,te.O)(this._directDescendantItems),(0,we.w)(e=>(0,ie.T)(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,te.O)(this._directDescendantItems),(0,we.w)(i=>(0,ie.T)(...i.map(o=>o._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,o=this._keyManager;switch(i){case 27:$(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===i||40===i)&&o.setFocusOrigin("keyboard"),o.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe((0,ee.q)(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const i=this._keyManager;if(i.setFocusOrigin(e).setFirstItemActive(),!i.activeItem&&this._directDescendantItems.length){let o=this._directDescendantItems.first._getHostElement().parentElement;for(;o;){if("menu"===o.getAttribute("role")){o.focus();break}o=o.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const i=Math.min(this._baseElevation+e,24),o=`${this._elevationPrefix}${i}`,d=Object.keys(this._classList).find(u=>u.startsWith(this._elevationPrefix));(!d||d===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[o]=!0,this._previousElevation=o)}setPositionClasses(e=this.xPosition,i=this.yPosition){const o=this._classList;o["mat-menu-before"]="before"===e,o["mat-menu-after"]="after"===e,o["mat-menu-above"]="above"===i,o["mat-menu-below"]="below"===i}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,te.O)(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(ym))},n.\u0275dir=t.lG2({type:n,contentQueries:function(e,i,o){if(1&e&&(t.Suo(o,bm,5),t.Suo(o,pl,5),t.Suo(o,pl,4)),2&e){let d;t.iGM(d=t.CRH())&&(i.lazyContent=d.first),t.iGM(d=t.CRH())&&(i._allItems=d),t.iGM(d=t.CRH())&&(i.items=d)}},viewQuery:function(e,i){if(1&e&&t.Gf(t.Rgc,5),2&e){let o;t.iGM(o=t.CRH())&&(i.templateRef=o.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),n})(),YM=(()=>{class n extends ks{constructor(e,i,o){super(e,i,o),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(ym))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,i){2&e&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:ph,useExisting:n}]),t.qOj],ngContentSelectors:vm,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,i){1&e&&(t.F$t(),t.YNc(0,BM,3,6,"ng-template"))},directives:[S.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[ul.transformMenu,ul.fadeInItems]},changeDetection:0}),n})();const Cm=new t.OlP("mat-menu-scroll-strategy"),Mm={provide:Cm,deps:[je],useFactory:function(n){return()=>n.scrollStrategies.reposition()}},km=ut({passive:!0});let zM=(()=>{class n{constructor(e,i,o,d,u,f,_,b){this._overlay=e,this._element=i,this._viewContainerRef=o,this._menuItemInstance=f,this._dir=_,this._focusMonitor=b,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=U.w0.EMPTY,this._hoverSubscription=U.w0.EMPTY,this._menuCloseSubscription=U.w0.EMPTY,this._handleTouchStart=w=>{nr(w)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=d,this._parentMaterialMenu=u instanceof ks?u:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,km),f&&(f._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,km),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),i=e.getConfig();this._setPosition(i.positionStrategy),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof ks&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof ks?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe((0,re.h)(o=>"void"===o.toState),(0,ee.q)(1),L(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,i=this.menu.parentMenu;for(;i;)e++,i=i.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Ji({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(i=>{this.menu.setPositionClasses("start"===i.connectionPair.overlayX?"after":"before","top"===i.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[i,o]="before"===this.menu.xPosition?["end","start"]:["start","end"],[d,u]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[f,_]=[d,u],[b,w]=[i,o],x=0;this.triggersSubmenu()?(w=i="before"===this.menu.xPosition?"start":"end",o=b="end"===i?"start":"end",x="bottom"===d?8:-8):this.menu.overlapTrigger||(f="top"===d?"bottom":"top",_="top"===u?"bottom":"top"),e.withPositions([{originX:i,originY:f,overlayX:b,overlayY:d,offsetY:x},{originX:o,originY:f,overlayX:w,overlayY:d,offsetY:x},{originX:i,originY:_,overlayX:b,overlayY:u,offsetY:-x},{originX:o,originY:_,overlayX:w,overlayY:u,offsetY:-x}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),o=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,oe.of)(),d=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,re.h)(u=>u!==this._menuItemInstance),(0,re.h)(()=>this._menuOpen)):(0,oe.of)();return(0,ie.T)(e,o,d,i)}_handleMousedown(e){Ii(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,re.h)(e=>e===this._menuItemInstance&&!e.disabled),(0,Nc.g)(0,wo)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof ks&&this.menu._isAnimating?this.menu._animationDone.pipe((0,ee.q)(1),(0,Nc.g)(0,wo),L(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new ze(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(je),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Cm),t.Y36(ph,8),t.Y36(pl,10),t.Y36(K,8),t.Y36(fe))},n.\u0275dir=t.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("mousedown",function(d){return i._handleMousedown(d)})("keydown",function(d){return i._handleKeydown(d)})("click",function(d){return i._handleClick(d)}),2&e&&t.uIk("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),n})(),Dm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Mm],imports:[P]}),n})(),UM=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Mm],imports:[[S.ez,P,gt,vi,Dm],kt,P,Dm]}),n})();const o0={provide:new t.OlP("mat-select-scroll-strategy"),deps:[je],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Rm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[o0],imports:[[S.ez,vi,D,P],kt,Bc,D,P]}),n})();const f0={provide:new t.OlP("mat-tooltip-scroll-strategy"),deps:[je],useFactory:function(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let Pm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[f0],imports:[[gn,S.ez,vi,P],P,kt]}),n})(),Ss=(()=>{class n{constructor(){this.changes=new k.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,o)=>{if(0==o||0==i)return`0 of ${o}`;const d=e*i;return`${d+1} \u2013 ${d<(o=Math.max(o,0))?Math.min(d+i,o):d+i} of ${o}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const T0={provide:Ss,deps:[[new t.FiY,new t.tp0,Ss]],useFactory:function(n){return n||new Ss}};let O0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[T0],imports:[[S.ez,ys,Rm,Pm,P]]}),n})();const F0=["primaryValueBar"],P0=tt(class{constructor(n){this._elementRef=n}},"primary"),L0=new t.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const n=(0,t.f3M)(S.K0),r=n?n.location:null;return{getPathname:()=>r?r.pathname+r.search:""}}});let N0=0,Lm=(()=>{class n extends P0{constructor(e,i,o,d){super(e),this._ngZone=i,this._animationMode=o,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new t.vpe,this._animationEndSubscription=U.w0.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+N0++;const u=d?d.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${u}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===o}get value(){return this._value}set value(e){this._value=Bm(J(e)||0)}get bufferValue(){return this._bufferValue}set bufferValue(e){this._bufferValue=Bm(e||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=(0,He.R)(e,"transitionend").pipe((0,re.h)(i=>i.target===e)).subscribe(()=>{("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(le.Qb,8),t.Y36(L0,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(e,i){if(1&e&&t.Gf(F0,5),2&e){let o;t.iGM(o=t.CRH())&&(i._primaryValueBar=o.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,i){2&e&&(t.uIk("aria-valuenow","indeterminate"===i.mode||"query"===i.mode?null:i.value)("mode",i.mode),t.ekj("_mat-animation-noopable",i._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[t.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t.TgZ(2,"defs"),t.TgZ(3,"pattern",2),t._UZ(4,"circle",3),t.qZA(),t.qZA(),t._UZ(5,"rect",4),t.qZA(),t.kcU(),t._UZ(6,"div",5),t._UZ(7,"div",6,7),t._UZ(9,"div",8),t.qZA()),2&e&&(t.xp6(3),t.Q6J("id",i.progressbarId),t.xp6(2),t.uIk("fill",i._rectangleFillValue),t.xp6(1),t.Q6J("ngStyle",i._bufferTransform()),t.xp6(1),t.Q6J("ngStyle",i._primaryTransform()))},directives:[S.PC],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),n})();function Bm(n,r=0,e=100){return Math.max(r,Math.min(e,n))}let V0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[S.ez,P],P]}),n})();function H0(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",3)),2&n){const e=t.oxw();t.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),t.uIk("r",e._getCircleRadius())}}function Y0(n,r){if(1&n&&(t.O4$(),t._UZ(0,"circle",3)),2&n){const e=t.oxw();t.Udp("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),t.uIk("r",e._getCircleRadius())}}const q0=tt(class{constructor(n){this._elementRef=n}},"primary"),Vm=new t.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Mi extends q0{constructor(r,e,i,o,d){super(r),this._document=i,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const u=Mi._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),u.has(i.head)||u.set(i.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===o&&!!d&&!d._forceAnimations,d&&(d.diameter&&(this.diameter=d.diameter),d.strokeWidth&&(this.strokeWidth=d.strokeWidth))}get diameter(){return this._diameter}set diameter(r){this._diameter=J(r),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(r){this._strokeWidth=J(r)}get value(){return"determinate"===this.mode?this._value:0}set value(r){this._value=Math.max(0,Math.min(100,J(r)))}ngOnInit(){const r=this._elementRef.nativeElement;this._styleRoot=Xn(r)||this._document.head,this._attachStyleNode(),r.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const r=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${r} ${r}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const r=this._styleRoot,e=this._diameter,i=Mi._diameters;let o=i.get(r);if(!o||!o.has(e)){const d=this._document.createElement("style");d.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),d.textContent=this._getAnimationText(),r.appendChild(d),o||(o=new Set,i.set(r,o)),o.add(e)}}_getAnimationText(){const r=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*r).replace(/END_VALUE/g,""+.2*r).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Mi.\u0275fac=function(r){return new(r||Mi)(t.Y36(t.SBq),t.Y36(H),t.Y36(S.K0,8),t.Y36(le.Qb,8),t.Y36(Vm))},Mi.\u0275cmp=t.Xpm({type:Mi,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(r,e){2&r&&(t.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),t.Udp("width",e.diameter,"px")("height",e.diameter,"px"),t.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[t.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(r,e){1&r&&(t.O4$(),t.TgZ(0,"svg",0),t.YNc(1,H0,1,9,"circle",1),t.YNc(2,Y0,1,7,"circle",2),t.qZA()),2&r&&(t.Udp("width",e.diameter,"px")("height",e.diameter,"px"),t.Q6J("ngSwitch","indeterminate"===e.mode),t.uIk("viewBox",e._getViewBox()),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1))},directives:[S.RF,S.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),Mi._diameters=new WeakMap;let W0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P,S.ez],P]}),n})(),sw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[gt,P],P]}),n})();F(7100);let bw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[S.ez,P,Le,kt],kt,P]}),n})(),Aw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[S.ez,P],P]}),n})(),$m=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),Uw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[$m,gt,P,li],$m,P]}),n})(),$w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[vi,Xe,S.ez,ys,P],P]}),n})(),gl=(()=>{class n{constructor(){this.changes=new k.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const ak={provide:gl,deps:[[new t.FiY,new t.tp0,gl]],useFactory:function(n){return n||new gl}};let dk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ak],imports:[[S.ez,P]]}),n})(),Sk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Lr,P],P]}),n})(),sD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[S.ez,P,Xe,gt,li,gn],P]}),n})();const aD=["*",[["mat-toolbar-row"]]],lD=["*","mat-toolbar-row"],dD=tt(class{constructor(n){this._elementRef=n}});let cD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),v_=(()=>{class n extends dD{constructor(e,i,o){super(e),this._platform=i,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(H),t.Y36(S.K0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,o){if(1&e&&t.Suo(o,cD,5),2&e){let d;t.iGM(d=t.CRH())&&(i._toolbarRows=d)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&t.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[t.qOj],ngContentSelectors:lD,decls:2,vars:0,template:function(e,i){1&e&&(t.F$t(aD),t.Hsn(0),t.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),hD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[P],P]}),n})();const uD=xt(ce(ke));let b_=(()=>{class n extends uD{constructor(e,i,o){super(e,i),this.tabIndex=Number(o)||0,e.nativeElement.classList.add("mat-tree-node")}ngOnInit(){super.ngOnInit()}ngDoCheck(){super.ngDoCheck()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(St),t.$8M("tabindex"))},n.\u0275dir=t.lG2({type:n,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[t._Bn([{provide:ke,useExisting:n}]),t.qOj]}),n})(),y_=(()=>{class n extends ti{}return n.\u0275fac=function(){let r;return function(i){return(r||(r=t.n5z(n)))(i||n)}}(),n.\u0275dir=t.lG2({type:n,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[t._Bn([{provide:ti,useExisting:n}]),t.qOj]}),n})(),C_=(()=>{class n extends Nr{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}}return n.\u0275fac=function(){let r;return function(i){return(r||(r=t.n5z(n)))(i||n)}}(),n.\u0275dir=t.lG2({type:n,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[t._Bn([{provide:Nr,useExisting:n}]),t.qOj]}),n})(),vh=(()=>{class n{constructor(e,i){this.viewContainer=e,this._node=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.s_b),t.Y36(Br,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","matTreeNodeOutlet",""]],features:[t._Bn([{provide:Zi,useExisting:n}])]}),n})(),M_=(()=>{class n extends St{}return n.\u0275fac=function(){let r;return function(i){return(r||(r=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-tree"]],viewQuery:function(e,i){if(1&e&&t.Gf(vh,7),2&e){let o;t.iGM(o=t.CRH())&&(i._nodeOutlet=o.first)}},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[t._Bn([{provide:St,useExisting:n}]),t.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,i){1&e&&t.GkF(0,0)},directives:[vh],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),n})(),w_=(()=>{class n extends rs{get recursive(){return this._recursive}set recursive(e){this._recursive=E(e)}}return n.\u0275fac=function(){let r;return function(i){return(r||(r=t.n5z(n)))(i||n)}}(),n.\u0275dir=t.lG2({type:n,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[t._Bn([{provide:rs,useExisting:n}]),t.qOj]}),n})(),fD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Ha,P],P]}),n})();class mD{constructor(r,e,i,o){this.transformFunction=r,this.getLevel=e,this.isExpandable=i,this.getChildren=o}_flattenNode(r,e,i,o){const d=this.transformFunction(r,e);if(i.push(d),this.isExpandable(d)){const u=this.getChildren(r);u&&(Array.isArray(u)?this._flattenChildren(u,e,i,o):u.pipe((0,ee.q)(1)).subscribe(f=>{this._flattenChildren(f,e,i,o)}))}return i}_flattenChildren(r,e,i,o){r.forEach((d,u)=>{let f=o.slice();f.push(u!=r.length-1),this._flattenNode(d,e+1,i,f)})}flattenNodes(r){let e=[];return r.forEach(i=>this._flattenNode(i,0,e,[])),e}expandFlattenedNodes(r,e){let i=[],o=[];return o[0]=!0,r.forEach(d=>{let u=!0;for(let f=0;f<=this.getLevel(d);f++)u=u&&o[f];u&&i.push(d),this.isExpandable(d)&&(o[this.getLevel(d)+1]=e.isExpanded(d))}),i}}class _D extends class{}{constructor(r,e,i){super(),this._treeControl=r,this._treeFlattener=e,this._flattenedData=new wi.X([]),this._expandedData=new wi.X([]),this._data=new wi.X([]),i&&(this.data=i)}get data(){return this._data.value}set data(r){this._data.next(r),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(r){return(0,ie.T)(r.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,X.U)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}let gD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[gn,ci,Ea,Lr,Ha,Dr,Yv,Uv,Xv,ys,lb,mb,xb,Yb,Ny,AC,zC,rm,cM,CM,Ff,zy,FM,UM,za,O0,V0,W0,sw,gt,Rm,bw,Aw,Uw,$w,dk,Sk,sD,hD,Pm,fD,vi,Xe,yn]}),n})(),vD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var bh=F(8863),on=F(5741);const k_=(0,M.X$)("showItem",[(0,M.eR)(":enter",[(0,M.oB)({opacity:"0"}),(0,M.jt)("200ms",(0,M.oB)({opacity:"1"}))]),(0,M.eR)(":leave",[(0,M.oB)({opacity:"1"}),(0,M.jt)("200ms",(0,M.oB)({opacity:"0"}))])]);var yh=F(346),bD=F(1211);function Ch(n,r){return(0,be.e)((0,bD.U)(n,r,arguments.length>=2,!1,!0))}var Mh=F(7920),yD=F(161),MD=F(3301),wD=F(2340),Fe=F(2607);F(9192),F(1992),F(873);const yl=new t.OlP("angularfire2.auth.use-emulator");var TD=F(2329);function R_(n){return null==n}function I_(n){return"function"==typeof n.set}function O_(n,r){return I_(r)?r:n.ref(r)}function F_(n,r){if(function(n){return"string"==typeof n}(n))return r.stringCase();if(I_(n))return r.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return r.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Ts(n,r,e="on",i=Si.z){return new Q.y(o=>{let d=null;return d=n[e](r,(u,f)=>{i.schedule(()=>{o.next({snapshot:u,prevKey:f})}),"once"===e&&i.schedule(()=>o.complete())},u=>{i.schedule(()=>o.error(u))}),"on"===e?{unsubscribe(){null!=d&&n.off(r,d)}}:{unsubscribe(){}}}).pipe((0,X.U)(o=>{const{snapshot:d,prevKey:u}=o;let f=null;return d.exists()&&(f=d.key),{type:r,payload:d,prevKey:u,key:f}}),(0,mf.B)())}function P_(n,r){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===r)return i;return-1}function OD(n,r){const{payload:e,prevKey:i,key:o}=r,d=P_(n,o),u=function(n,r){if(R_(r))return 0;{const e=P_(n,r);return-1===e?n.length:e+1}}(n,i);switch(r.type){case"value":if(r.payload&&r.payload.exists()){let f=null;r.payload.forEach(_=>{const b={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,b],!1})}return n;case"child_added":if(d>-1){const f=n[d-1];(f&&f.key||null)!==i&&(n=n.filter(_=>_.payload.key!==e.key)).splice(u,0,r)}else{if(null==i)return[r,...n];(n=n.slice()).splice(u,0,r)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===o?r:f);case"child_moved":if(d>-1){const f=n.splice(d,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function L_(n){return(R_(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function B_(n,r,e){return function(n,r,e){return Ts(n,"value","once",e).pipe((0,we.w)(i=>{const o=[(0,oe.of)(i)];return r.forEach(d=>o.push(Ts(n,d,"on",e))),(0,ie.T)(...o).pipe((0,bh.R)(OD,[]))}),Ft())}(n,r=L_(r),e)}function N_(n,r,e){const i=(r=L_(r)).map(o=>Ts(n,o,"on",e));return(0,ie.T)(...i)}function V_(n,r){return function(i,o){return F_(i,{stringCase:()=>n.child(i)[r](o),firebaseCase:()=>i[r](o),snapshotCase:()=>i.ref[r](o)})}}function BD(n){return function(e){return e?F_(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function H_(n,r){return function(){return Ts(n,"value","on",r)}}const Y_=new t.OlP("angularfire2.realtimeDatabaseURL"),G_=new t.OlP("angularfire2.database.use-emulator");let HD=(()=>{class n{constructor(e,i,o,d,u,f,_){this.schedulers=new Fe.HU(u),this.keepUnstableUntilFirst=(0,Fe.ss)(this.schedulers);const b=f,w=(0,Fe.on)(e,u,i);!TD.Z.auth&&_&&(0,Fe.yq)(),this.database=(0,Fe.sI)(`${w.name}.database.${o}`,"AngularFireDatabase",w,()=>{const x=u.runOutsideAngular(()=>w.database(o||void 0));return b&&x.useEmulator(...b),x},[b])}list(e,i){const o=this.schedulers.ngZone.runOutsideAngular(()=>O_(this.database,e));let d=o;return i&&(d=i(o)),function(n,r){const e=r.schedulers.outsideAngular,i=r.schedulers.ngZone.run(()=>n.ref);return{query:n,update:V_(i,"update"),set:V_(i,"set"),push:o=>i.push(o),remove:BD(i),snapshotChanges:o=>B_(n,o,e).pipe(r.keepUnstableUntilFirst),stateChanges:o=>N_(n,o,e).pipe(r.keepUnstableUntilFirst),auditTrail:o=>function(n,r,e){return function(n,r,e){return function(n,r){return Ts(n,"value","on",r).pipe((0,X.U)(e=>{let i;return e.payload.forEach(o=>(i=o.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e=(0,Hu.jO)(n);return(0,be.e)(function(i,o){for(var d=n.length,u=new Array(d),f=n.map(function(){return!1}),_=!1,b=function(x){(0,it.Xf)(n[x]).subscribe(new Qe.Q(o,function(A){u[x]=A,!_&&!f[x]&&(f[x]=!0,(_=f.every(xi.y))&&(f=null))},io.Z))},w=0;w<d;w++)b(w);i.subscribe(new Qe.Q(o,function(x){if(_){var A=(0,Ye.ev)([x],(0,Ye.CR)(u));o.next(e?e.apply(void 0,(0,Ye.ev)([],(0,Ye.CR)(A))):A)}}))})}(r),(0,X.U)(([o,d])=>{const u=o.lastKeyToLoad,f=d.map(_=>_.key);return{actions:d,lastKeyToLoad:u,loadedKeys:f}}),(0,be.e)(function(r,e){var i=!1;r.subscribe(new Qe.Q(e,function(d){return(i||(i=!(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad))(d)))&&e.next(d)}))}),(0,X.U)(o=>o.actions))}(n,N_(n,r).pipe((0,bh.R)((o,d)=>[...o,d],[])),e)}(n,o,e).pipe(r.keepUnstableUntilFirst),valueChanges:(o,d)=>B_(n,o,e).pipe((0,X.U)(f=>f.map(_=>d&&d.idField?Object.assign(Object.assign({},_.payload.val()),{[d.idField]:_.key}):_.payload.val())),r.keepUnstableUntilFirst)}}(d,this)}object(e){return function(n,r){return{query:n,snapshotChanges:()=>H_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>H_(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,(0,X.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>O_(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Fe.Dh),t.LFG(Fe.xv,8),t.LFG(Y_,8),t.LFG(t.Lbi),t.LFG(t.R0b),t.LFG(G_,8),t.LFG(yl,8))},n.\u0275prov=t.Yz7({factory:function(){return new n(t.LFG(Fe.Dh),t.LFG(Fe.xv,8),t.LFG(Y_,8),t.LFG(t.Lbi),t.LFG(t.R0b),t.LFG(G_,8),t.LFG(yl,8))},token:n,providedIn:"any"}),n})(),kh=(()=>{class n{constructor(e){this.db=e,this.DEBUG=wD.N.printDebug,this.VERSION="/v0"}getItemsContent(e){return(0,it.Dp)(e).pipe((0,yh.z)(i=>this.getItem(i)),Ch((i,o)=>i.push(o)&&i,[]))}getStoryIDs(e){return this.db.list(this.VERSION,i=>i.child(e)).valueChanges().pipe((0,Mh.P)(),(0,Ut.b)(i=>this.DEBUG&&console.debug("GET Story ids",i)))}getRecursiveReplies(e){return this.getItem(e).pipe((0,X.U)(i=>({node:i})),function(n,r,e){return void 0===r&&(r=1/0),r=(r||0)<1?1/0:r,(0,be.e)(function(i,o){return(0,yD.p)(i,o,n,r,void 0,!0,undefined)})}(({node:i})=>i?(0,it.Dp)(i.kids).pipe((0,yh.z)(o=>this.getItem(o).pipe((0,X.U)(d=>({node:d,parent:i}))))):Jc.E),Ch((i,{node:o,parent:d})=>d?d.replies.push(o)&&i:o),(0,MD.j)("node"))}getStoryComments(e){return(0,oe.of)(e).pipe((0,_f.b)(i=>i.kids),(0,yh.z)(i=>this.getRecursiveReplies(i)),Ch((i,o)=>i.push(o)&&i,[]))}getItem(e){return this.db.object(this.VERSION+"/item/"+e).valueChanges().pipe((0,Mh.P)(),(0,re.h)(i=>null!==i&&!i.deleted),(0,X.U)(i=>(!("kids"in i)&&(i.kids=[]),i.type===on.qG.comment&&(i.replies=[]),i)),(0,Ut.b)(i=>this.DEBUG&&console.debug("GET Item",i)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(HD))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var Dh=F(7420);let z_=(()=>{class n{constructor(e){this.el=e,this.subscription=new U.w0}ngOnInit(){this.el.nativeElement.style.setProperty("transition","margin-top 0.3s"),this.subscription.add((0,He.R)(this.scrollElement,"scroll").pipe((0,te.O)(this.scrollElement.scrollTop),function(n){return(0,be.e)(function(r,e){var i=!1,o=new Qe.Q(e,function(){null==o||o.unsubscribe(),i=!0},io.Z);(0,it.Xf)(n).subscribe(o),r.subscribe(new Qe.Q(e,function(d){return i&&e.next(d)}))})}(xo(1e3)),(0,X.U)(()=>this.scrollElement.scrollTop),(0,be.e)(function(n,r){var e,i=!1;n.subscribe(new Qe.Q(r,function(o){var d=e;e=o,i&&r.next([d,o]),i=!0}))}),(0,X.U)(([e,i])=>e<i),Ft()).subscribe(e=>{this.el.nativeElement.style.setProperty("margin-top",e?"-60px":"0")}))}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","autoHide",""]],inputs:{scrollElement:"scrollElement"}}),n})(),GD=(()=>{class n{transform(e){const i=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!==i&&i.length>2&&"string"==typeof i[2]&&i[2].length>0?i[2]:null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"domain",type:n,pure:!0}),n})(),zD=(()=>{class n{transform(e){return 0===e?"":1===e?"1 reply hidden":e+" replies hidden"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"replies",type:n,pure:!0}),n})(),U_=(()=>{class n{transform(e){const i=Math.abs(Date.now()-1e3*e)/36e5,o=Math.trunc(60*i),d=Math.floor(i),u=Math.floor(d/24);return u>1?u+" days ago":1===u?u+" day ago":d>1?d+" hours ago":1===d?d+" hour ago":o+" minutes ago"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"postFrom",type:n,pure:!0}),n})(),UD=(()=>{class n{transform(e){const i=e.split("stories");return i[0].charAt(0).toLocaleUpperCase()+i[0].slice(1)+" Stories"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"formatTitle",type:n,pure:!0}),n})(),qD=(()=>{class n{transform(e,i){return 0!==e&&e%i==0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"firstOfPage",type:n,pure:!0}),n})(),q_=(()=>{class n{transform(e){return e?"indeterminate":"determinate"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"progressMode",type:n,pure:!0}),n})(),jD=(()=>{class n{transform(e){return e?on.kS.DARK:on.kS.LIGHT}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"themeName",type:n,pure:!0}),n})(),ZD=(()=>{class n{transform(e){return e?10:30}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"commentPadding",type:n,pure:!0}),n})();function WD(n,r){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"a",4),t._uU(2),t.ALo(3,"domain"),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("href",e.item.url,t.LSH),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.item.url)," ")}}const JD=function(n){return[n]};function QD(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.shareStory(o.item)}),t._uU(2),t.qZA(),t.YNc(3,WD,4,4,"div",0),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"mat-icon"),t._uU(7,"favorite"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"mat-icon"),t._uU(12,"forum"),t.qZA(),t.TgZ(13,"div"),t._uU(14),t.qZA(),t.qZA(),t.TgZ(15,"div",3),t.TgZ(16,"mat-icon"),t._uU(17,"face"),t.qZA(),t.TgZ(18,"div"),t._uU(19),t.qZA(),t.qZA(),t.TgZ(20,"div",3),t.TgZ(21,"mat-icon"),t._uU(22,"schedule"),t.qZA(),t.TgZ(23,"div"),t._uU(24),t.ALo(25,"postFrom"),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(10,JD,e.item.id))("ngClass",1==e.commentsStyle?"mat-h1 m0":"mat-h2 m0"),t.xp6(1),t.hij(" ",e.item.title," "),t.xp6(1),t.Q6J("ngIf",e.item.url),t.xp6(6),t.Oqu(e.item.score),t.xp6(5),t.Oqu(e.item.descendants),t.xp6(5),t.Oqu(e.item.by),t.xp6(5),t.Oqu(t.lcZ(25,8,e.item.time))}}let j_=(()=>{class n{constructor(e){this.shared=e,this.item=null,this.commentsStyle=!1}shareStory(e){this.shared.lastItem=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Dh.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["hn-item"]],inputs:{item:"item",commentsStyle:"commentsStyle"},decls:1,vars:1,consts:[[4,"ngIf"],["tabindex","0",1,"title",3,"routerLink","ngClass","click"],[1,"details"],[1,"chip"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(e,i){1&e&&t.YNc(0,QD,26,12,"ng-container",0),2&e&&t.Q6J("ngIf",i.item)},directives:[S.O5,ii.rH,S.mk,al],pipes:[U_,GD],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;margin:8px 0;grid-gap:10px;gap:10px}.title[_ngcontent-%COMP%]{margin:0 auto 0 0}.title[_ngcontent-%COMP%]:hover{cursor:pointer}.details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;opacity:.75}.chip[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:6px;gap:6px}.chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(.65)}.chip[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin:0 6px}']}),n})();const $D=["scrollElement"];function XD(n,r){1&n&&t.GkF(0)}function KD(n,r){1&n&&t._UZ(0,"hr")}function eS(n,r){if(1&n&&(t.ynx(0),t.YNc(1,KD,1,0,"hr",15),t.ALo(2,"firstOfPage"),t._UZ(3,"hn-item",16),t.BQk()),2&n){const e=r.$implicit,i=r.index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.xi3(2,3,i,o.ITEMS_PER_PAGE)),t.xp6(2),t.Q6J("item",e)("@showItem",void 0)}}function tS(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",18),t.NdJ("click",function(){const d=t.CHM(e).index,u=t.oxw(2);return u.getFeedContent(u.TYPES[d])}),t.TgZ(2,"span",19),t._uU(3),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=r.$implicit;t.xp6(3),t.hij(" ",e," ")}}function iS(n,r){if(1&n&&t.YNc(0,tS,4,1,"ng-container",17),2&n){const e=t.oxw();t.Q6J("ngForOf",e.TYPE_LABELS)}}function nS(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){const d=t.CHM(e).index,u=t.oxw(2);return u.getFeedContent(u.TYPES[d])}),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=r.$implicit,i=r.index,o=t.oxw(2);t.xp6(3),t.hij(" ",o.TYPE_ICONS[i]," "),t.xp6(2),t.hij(" ",e," ")}}function rS(n,r){if(1&n&&(t.TgZ(0,"button",20),t.TgZ(1,"mat-icon"),t._uU(2,"tune"),t.qZA(),t.qZA(),t.TgZ(3,"mat-menu",null,21),t.YNc(5,nS,6,2,"ng-container",17),t.qZA()),2&n){const e=t.MAs(4),i=t.oxw();t.Q6J("matMenuTriggerFor",e),t.xp6(5),t.Q6J("ngForOf",i.TYPE_LABELS)}}const aS=["scrollElement"],Z_=function(n){return{"border-color":n}};function lS(n,r){if(1&n&&(t.TgZ(0,"mat-tree-node",13),t.ALo(1,"commentPadding"),t.ALo(2,"async"),t.TgZ(3,"div",14),t.TgZ(4,"div",15),t.TgZ(5,"div"),t._uU(6,"By "),t.TgZ(7,"b"),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"postFrom"),t.qZA(),t.qZA(),t._UZ(12,"div",16),t.qZA(),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.Q6J("matTreeNodePaddingIndent",t.lcZ(1,7,t.lcZ(2,9,i.shared.isMobile$))),t.xp6(3),t.Q6J("ngStyle",t.VKq(13,Z_,e.color)),t.xp6(1),t.Q6J("@showItem",void 0),t.xp6(4),t.Oqu(e.by),t.xp6(2),t.hij("From ",t.lcZ(11,11,e.time),""),t.xp6(2),t.Q6J("innerHTML",e.text,t.oJD)("@showItem",void 0)}}function dS(n,r){if(1&n&&(t.TgZ(0,"mat-tree-node",13),t.ALo(1,"commentPadding"),t.ALo(2,"async"),t.TgZ(3,"div",17),t.TgZ(4,"div",15),t.TgZ(5,"div"),t._uU(6,"By "),t.TgZ(7,"a",18),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"postFrom"),t.qZA(),t.qZA(),t._UZ(12,"div",16),t.TgZ(13,"div",19),t._uU(14),t.ALo(15,"replies"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=r.$implicit,i=t.oxw();t.Q6J("matTreeNodePaddingIndent",t.lcZ(1,9,t.lcZ(2,11,i.shared.isMobile$))),t.xp6(3),t.Q6J("ngStyle",t.VKq(17,Z_,e.color)),t.xp6(1),t.Q6J("@showItem",void 0),t.xp6(4),t.Oqu(e.by),t.xp6(2),t.hij("From ",t.lcZ(11,13,e.time),""),t.xp6(2),t.Q6J("innerHTML",e.text,t.oJD)("@showItem",void 0),t.xp6(1),t.Q6J("hidden",i.treeControl.isExpanded(e)),t.xp6(1),t.hij(" ",t.lcZ(15,15,e.kids.length)," ")}}function cS(n,r){1&n&&t.GkF(0)}function hS(n,r){1&n&&(t.TgZ(0,"div",20),t._uU(1," \u{1f3dc}\ufe0f There's nothing to read here \u{1f3dc}\ufe0f "),t.qZA()),2&n&&t.Q6J("@showItem",void 0)}const uS=function(){return["../"]},pS=[{path:"",component:(()=>{class n{constructor(e,i){this.hn=e,this.shared=i,this.ITEMS_PER_PAGE=30,this.isLoading=!1,this.TYPES=on.vK,this.TYPE_LABELS=on.km,this.TYPE_ICONS=on.bb,this.idTracker=(o,d)=>d.id}ngOnInit(){-1===this.shared.feedPage&&this.getFeedContent(on.vK[0])}ngAfterViewInit(){const e=this.scrollElement.nativeElement;e.style.setProperty("scroll-behavior","initial"),e.scrollTop=this.shared.feedScrollPosition,e.style.setProperty("scroll-behavior","smooth")}ngOnDestroy(){this.shared.feedScrollPosition=this.scrollElement.nativeElement.scrollTop}switchTheme(){this.shared.switchDark$.next(null)}getFeedContent(e){this.shared.feedType=e,this.shared.feedPage=0,this.shared.feedIds=[],this.shared.feedStories.next([]),this.isLoading=!0,this.hn.getStoryIDs(this.shared.feedType).subscribe(i=>{this.shared.feedIds=i,this.getStories()})}getStories(e=0){const i=this.shared.feedIds.slice(e,e+30);this.hn.getItemsContent(i).pipe((0,bh.R)((o,d)=>[...o,...d],this.shared.feedStories.value),(0,Hc.x)(()=>this.isLoading=!1)).subscribe(o=>this.shared.feedStories.next(o))}infiniteLoad(){this.shared.feedPage++,this.getStories(this.shared.feedPage*this.ITEMS_PER_PAGE)}scrollToTheTop(){this.scrollElement.nativeElement.scrollTop=0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(kh),t.Y36(Dh.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-feed"]],viewQuery:function(e,i){if(1&e&&t.Gf($D,7),2&e){let o;t.iGM(o=t.CRH())&&(i.scrollElement=o.first)}},decls:29,vars:21,consts:[["autoHide","","color","primary",2,"gap","8px",3,"scrollElement"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"top-bar-spacer"],["mat-icon-button","","aria-label","Switch between Light/Dark theme",3,"click"],["color","primary","value","0",3,"mode"],[1,"scroll-element"],["scrollElement",""],[1,"centered-container"],[1,"mat-h1","m0"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"load-more"],["mat-flat-button","","color","primary",1,"mat-h3",3,"click"],["mat-mini-fab","","aria-label","Scroll up to the top",1,"arrow-upward",3,"click"],["desktopContent",""],["mobileContent",""],[4,"ngIf"],[3,"item"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],[1,"mat-h4","m0"],["mat-icon-button","","aria-label","Show Stories section",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-toolbar",0),t.YNc(1,XD,1,0,"ng-container",1),t.ALo(2,"async"),t._UZ(3,"span",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return i.switchTheme()}),t.TgZ(5,"mat-icon"),t._uU(6),t.ALo(7,"themeName"),t.ALo(8,"async"),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"mat-progress-bar",4),t.ALo(10,"progressMode"),t.TgZ(11,"div",5,6),t.TgZ(13,"div",7),t.TgZ(14,"div",8),t._uU(15),t.ALo(16,"formatTitle"),t.qZA(),t.YNc(17,eS,4,6,"ng-container",9),t.ALo(18,"async"),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"button",11),t.NdJ("click",function(){return i.infiniteLoad()}),t._uU(21," Load next page "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"button",12),t.NdJ("click",function(){return i.scrollToTheTop()}),t.TgZ(23,"mat-icon"),t._uU(24,"arrow_upward"),t.qZA(),t.qZA(),t.YNc(25,iS,1,1,"ng-template",null,13,t.W1O),t.YNc(27,rS,6,2,"ng-template",null,14,t.W1O)),2&e){const o=t.MAs(12),d=t.MAs(26),u=t.MAs(28);t.Q6J("scrollElement",o),t.xp6(1),t.Q6J("ngIf",t.lcZ(2,9,i.shared.isMobile$))("ngIfThen",u)("ngIfElse",d),t.xp6(5),t.Oqu(t.lcZ(7,11,t.lcZ(8,13,i.shared.isDark$))),t.xp6(3),t.Q6J("mode",t.lcZ(10,15,i.isLoading)),t.xp6(6),t.Oqu(t.lcZ(16,17,i.shared.feedType)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(18,19,i.shared.feedStories))("ngForTrackBy",i.idTracker)}},directives:[v_,z_,S.O5,en,al,Lm,S.sg,j_,zM,YM,pl],pipes:[S.Ov,jD,q_,UD,qD],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;height:100%;background-color:var(--background-color)}hr[_ngcontent-%COMP%]{margin:36px 0}.load-more[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:80px}.arrow-upward[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1.75rem}"],data:{animation:[k_]}}),n})()},{path:":id",component:(()=>{class n{constructor(e,i,o){this.route=e,this.hn=i,this.shared=o,this.transformer=(d,u)=>Object.assign(Object.assign({},d),{level:u,color:on.YI[u%7],expandable:!!d.kids&&d.kids.length>0}),this.treeControl=new Ud(d=>d.level,d=>d.expandable),this.treeFlattener=new mD(this.transformer,d=>d.level,d=>d.expandable,d=>d.replies),this.dataSource=new _D(this.treeControl,this.treeFlattener),this.isLoading=!1,this.noComments=!1,this.hasChild=(d,u)=>u.expandable}ngOnInit(){this.requestStoryData()}requestStoryData(){const e=this.route.snapshot.params.id;this.isLoading=!0,(0,oe.of)(this.shared.lastItem).pipe((0,we.w)(i=>function(n,r,e){return(0,T.P)(function(){return i?r:e})}(0,(0,oe.of)(i),this.hn.getItem(+e))),(0,X.U)(i=>this.item=i),(0,we.w)(i=>this.hn.getStoryComments(i)),(0,X.U)(i=>{i.length>0?(this.dataSource.data=i,this.treeControl.expandAll()):this.noComments=!0}),(0,Hc.x)(()=>this.isLoading=!1)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ii.gz),t.Y36(kh),t.Y36(Dh.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-comments"]],viewQuery:function(e,i){if(1&e&&t.Gf(aS,7),2&e){let o;t.iGM(o=t.CRH())&&(i.scrollEl=o.first)}},decls:19,vars:14,consts:[["autoHide","","color","primary",2,"gap","8px",3,"scrollElement"],["mat-icon-button","",3,"routerLink"],["color","primary","value","0",3,"mode"],[1,"scroll-element"],["scrollElement",""],[1,"centered-container"],[3,"item","commentsStyle"],[3,"dataSource","treeControl"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent",4,"matTreeNodeDef"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent",4,"matTreeNodeDef","matTreeNodeDefWhen"],[4,"ngIf","ngIfThen"],["emptyComments",""],["mat-mini-fab","","aria-label","Scroll up to the top",1,"arrow-upward",3,"click"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent"],[1,"comment",3,"ngStyle"],[1,"post-details"],[1,"mat-body",3,"innerHTML"],["matTreeNodeToggle","",1,"comment",3,"ngStyle"],[1,"mat-body-strong"],[3,"hidden"],[1,"mat-body",2,"text-align","center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-toolbar",0),t.TgZ(1,"button",1),t.TgZ(2,"mat-icon"),t._uU(3,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t._UZ(4,"mat-progress-bar",2),t.ALo(5,"progressMode"),t.TgZ(6,"div",3,4),t.TgZ(8,"div",5),t._UZ(9,"hn-item",6),t.TgZ(10,"mat-tree",7),t.YNc(11,lS,13,15,"mat-tree-node",8),t.YNc(12,dS,16,19,"mat-tree-node",9),t.qZA(),t.YNc(13,cS,1,0,"ng-container",10),t.qZA(),t.qZA(),t.YNc(14,hS,2,1,"ng-template",null,11,t.W1O),t.TgZ(16,"button",12),t.NdJ("click",function(){return i.scrollEl.nativeElement.scrollTop=0}),t.TgZ(17,"mat-icon"),t._uU(18,"arrow_upward"),t.qZA(),t.qZA()),2&e){const o=t.MAs(7),d=t.MAs(15);t.Q6J("scrollElement",o),t.xp6(1),t.Q6J("routerLink",t.DdM(13,uS)),t.xp6(3),t.Q6J("mode",t.lcZ(5,11,i.isLoading)),t.xp6(5),t.Q6J("item",i.item)("commentsStyle",!0)("@showItem",void 0),t.xp6(1),t.Q6J("dataSource",i.dataSource)("treeControl",i.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",i.hasChild),t.xp6(1),t.Q6J("ngIf",i.noComments)("ngIfThen",d)}},directives:[v_,z_,en,ii.rH,al,Lm,j_,M_,y_,S.O5,b_,C_,S.PC,w_],pipes:[q_,ZD,S.Ov,U_,zD],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;height:100%;background-color:var(--background-color)}.comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;margin:.6rem;padding:0 12px;border-left:4px solid}.arrow-upward[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1.75rem}.post-details[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;grid-gap:8px;gap:8px;align-items:baseline}"],data:{animation:[k_]}}),n})()}];let fS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[kh],imports:[[S.ez,ii.Bz.forChild(pS),gD,vD]]}),n})()}}]);