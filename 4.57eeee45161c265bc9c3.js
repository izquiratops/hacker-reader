(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"6Uf2":function(t,e,n){"use strict";(function(t){var e,i=n("zIRd"),r=n("mAIw"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),c=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.A)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.u)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),h=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c(e)}}catch(n){}return new l},u=h("localStorage"),d=h("sessionStorage"),p=new s.b("@firebase/database"),f=(e=1,function(){return e++}),_=function(t){var e=Object(o.z)(t),n=new o.c;n.update(e);var i=n.digest();return o.f.encodeByteArray(i)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=m.apply(null,r):n+="object"==typeof r?Object(o.A)(r):r,n+=" "}return n},g=null,y=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=s.a.VERBOSE,g=p.log.bind(p),e&&d.set("logging_enabled",!0)):"function"==typeof t?g=t:(g=null,d.remove("logging_enabled"))},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===y&&(y=!1,null===g&&!0===d.get("logging_enabled")&&b(!0)),g){var n=m.apply(null,t);g(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];v.apply(void 0,Object(r.f)([t],e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(r.f)(t));p.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(r.f)(t));throw p.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,Object(r.f)(t));p.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",T="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===I||e===T)return-1;if(e===I||t===T)return 1;var n=H(t),i=H(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.A)(e))},P=function(t){if("object"!=typeof t||null===t)return Object(o.A)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i="{",r=0;r<e.length;r++)0!==r&&(i+=","),i+=Object(o.A)(e[r]),i+=":",i+=P(t[e[r]]);return i+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],r=0;r<n;r+=e)i.push(t.substring(r,r+e>n?n:r+e));return i};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var A,D,F,M,L,W,B,V,q,z=function(t){var e,n,i,r,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var c=a.join(""),l="";for(s=0;s<64;s+=8){var h=parseInt(c.substr(s,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()},U=new RegExp("^-?(0*)\\d{1,10}$"),H=function(t){if(U.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Q=function(t){try{t()}catch(e){setTimeout(function(){throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},K=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Y=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=x(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),G=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.y)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.y)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.y)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),X=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$="websocket",Z="long_polling",J=function(){function t(t,e,n,i,r,o,s){void 0===r&&(r=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=u.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&u.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),t===$)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return j(e,function(t,e){i.push(t+"="+e)}),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),tt=function(t,e){var n=et(t),i=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new J(n.host,n.secure,i,e,"ws"===n.scheme||"wss"===n.scheme,"",i!==n.subdomain),path:new Y(n.pathString)}},et=function(t){var e="",n="",i="",o="",s="",a=!0,c="https",l=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(c=t.substring(0,h-1),t=t.substring(h+2));var u=t.indexOf("/");-1===u&&(u=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(o=function(t){for(var e="",n=t.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(o){}e+="/"+r}return e}(t.substring(u,d)));var p=function(t){var e,n,i={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(r.g)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var c=a.split("=");2===c.length?i[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}(t.substring(Math.min(t.length,d)));(h=e.indexOf(":"))>=0?(a="https"===c||"wss"===c,l=parseInt(e.substring(h+1),10)):h=e.length;var f=e.slice(0,h);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var _=e.indexOf(".");i=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=i}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:a,scheme:c,pathString:o,namespace:s}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,rt=10485760,ot=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},st=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},ct=function(t,e,n,i,r){r&&void 0===n||lt(Object(o.l)(t,e,r),n,i)},lt=function(t,e,n){var i=n instanceof Y?new G(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+i.toErrorString());if("string"==typeof e&&e.length>rt/3&&Object(o.y)(e)>rt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var r=!1,s=!1;if(j(e,function(e,n){if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!ot(e)))throw new Error(t+" contains an invalid key ("+e+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(e),lt(t,n,i),i.pop()}),r&&s)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,i,r){if(!r||void 0!==n){var s=Object(o.l)(t,e,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];j(n,function(t,e){var n=new Y(t);if(lt(s,e,i.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!ot(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Y.comparePaths);var s=null;for(n=0;n<e.length;n++){if(i=e[n],null!==s&&s.contains(i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}}(s,a)}},ut=function(t,e,n,i){if(!i||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(Object(o.l)(t,e,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,i){if(!(i&&void 0===n||ot(n)))throw new Error(Object(o.l)(t,e,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ft=function(t,e,n,i){if(!(i&&void 0===n||st(n)))throw new Error(Object(o.l)(t,e,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_t=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ft(t,e,n,i)},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},gt=function(t,e,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),st(t)}(i))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},yt=function(t,e,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,i)+"must be a boolean.")},bt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.B)("OnDisconnect.cancel",0,1,arguments.length),Object(o.C)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.B)("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),Object(o.C)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.B)("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.C)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.B)("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ut("OnDisconnect.setWithPriority",2,e,!1),Object(o.C)("OnDisconnect.setWithPriority",3,n,!0);var i=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(Object(o.B)("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.C)("OnDisconnect.update",2,e,!0);var r=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),vt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.B)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ct=(A=0,D=[],function(t){var e,n=t===A;A=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=wt.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var r=i.join("");if(n){for(e=11;e>=0&&63===D[e];e--)D[e]=0;D[e]++}else for(e=0;e<12;e++)D[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)r+=wt.charAt(D[e]);return Object(o.d)(20===r.length,"nextPushId: Length should be 20."),r}),Et=function(t){if("2147483647"===t)return"-";var e=H(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),i=0;i<n.length;i++)n[i]=t.charAt(i);if(n.length<786)return n.push("-"),n.join("");for(var r=n.length-1;r>=0&&"z"===n[r];)r--;if(-1===r)return T;var o=wt.charAt(wt.indexOf(n[r])+1);return n[r]=o,n.slice(0,r+1).join("")},Ot=function(t){if("-2147483648"===t)return I;var e=H(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),i=0;i<n.length;i++)n[i]=t.charAt(i);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=wt.charAt(wt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},St=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),It=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new St(I,t),i=new St(I,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return St.MIN},t}(),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(T,F)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new St(t,F)},e.prototype.toString=function(){return".key"},e}(It),xt=new Tt,Rt=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},kt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===M||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===M||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Pt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),kt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(Object(o.d)(".priority"!==i||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Rt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=_(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(i);return Object(o.d)(r>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+i),r===s?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Nt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?x(t.name,e.name):r},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(T,new Pt("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=W(t);return new St(e,new Pt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(It)),jt=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:Ft.EMPTY_NODE,this.right=null!=o?o:Ft.EMPTY_NODE}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ft.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ft.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new At(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ft=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}(),Mt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Mt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Wt=function(t,e,n,i){t.sort(e);var r=function(e,i){var o,s,a=i-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new At(s,o.node,At.BLACK,null,null);var c=parseInt(a/2,10)+e,l=r(e,c),h=r(c+1,i);return o=t[c],s=n?n(o):o,new At(s,o.node,At.BLACK,l,h)},o=function(e){for(var i=null,o=null,s=t.length,a=function(e,i){var o=s-e,a=s;s-=e;var l=r(o+1,a),h=t[o],u=n?n(h):h;c(new At(u,h.node,i,null,l))},c=function(t){i?(i.left=t,i=t):(o=t,i=t)},l=0;l<e.count;++l){var h=e.nextBitIsOne(),u=Math.pow(2,e.count-(l+1));h?a(u,At.BLACK):(a(u,At.BLACK),a(u,At.RED))}return o}(new Lt(t.length));return new Ft(i||e,o)},Bt={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Bt&&Nt,"ChildrenNode.ts has not been loaded"),V=V||new t({".priority":Bt},{".priority":Nt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.x)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ft?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==xt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,s=[],a=!1,c=n.getIterator(St.Wrap),l=c.getNext();l;)a=a||e.isDefinedOn(l.node),s.push(l),l=c.getNext();i=a?Wt(s,e.getCompare()):Bt;var h=e.toString(),u=Object(r.a)({},this.indexSet_);u[h]=e;var d=Object(r.a)({},this.indexes_);return d[h]=i,new t(d,u)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(Object(o.v)(this.indexes_,function(t,r){var s=Object(o.x)(i.indexSet_,r);if(Object(o.d)(s,"Missing index implementation for "+r),t===Bt){if(s.isDefinedOn(e.node)){for(var a=[],c=n.getIterator(St.Wrap),l=c.getNext();l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Wt(a,s.getCompare())}return Bt}var h=n.get(e.name),u=t;return h&&(u=u.remove(new St(e.name,h))),u.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.v)(this.indexes_,function(t){if(t===Bt)return t;var i=n.get(e.name);return i?t.remove(new St(e.name,i)):t}),this.indexSet_)},t}();function qt(t,e){return x(t.name,e.name)}function zt(t,e){return x(t,e)}var Ut=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&kt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return q||(q=new t(new Ft(zt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||q},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?q:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i=new St(e,n),r=void 0,s=void 0;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));var a=r.isEmpty()?q:this.priorityNode_;return new t(r,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.d)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(Nt,function(s,a){n[s]=a.val(e),i++,o&&t.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):o=!1}),!e&&o&&r<2*i){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Rt(this.getPriority().val())+":"),this.forEachChild(Nt,function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)}),this.lazyHash_=""===t?"":_(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new St(t,e));return r?r.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var i=this.children_.getIteratorFrom(t.name,St.Wrap),r=i.peek();null!=r&&e.compare(r,t)<0;)i.getNext(),r=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var i=this.children_.getReverseIteratorFrom(t.name,St.Wrap),r=i.peek();null!=r&&e.compare(r,t)>0;)i.getNext(),r=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ht?-1:0},t.prototype.withIndex=function(e){if(e===xt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===xt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Nt),i=e.getIterator(Nt),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===xt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ht=new(function(t){function e(){return t.call(this,new Ft(zt),Ut.EMPTY_NODE,Vt.Default)||this}return Object(r.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ut.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ut));function Qt(t,e){if(void 0===e&&(e=null),null===t)return Ut.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Pt(t,Qt(e));if(t instanceof Array){var n=Ut.EMPTY_NODE;return j(t,function(e,i){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var r=Qt(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r))}}),n.updatePriority(Qt(e))}var i=[],r=!1;if(j(t,function(t,e){if("."!==t.substring(0,1)){var n=Qt(e);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new St(t,n)))}}),0===i.length)return Ut.EMPTY_NODE;var s=Wt(i,qt,function(t){return t.name},zt);if(r){var a=Wt(i,Nt.getCompare());return new Ut(s,Qt(e),new Vt({".priority":a},{".priority":Nt}))}return new Ut(s,Qt(e),Vt.Default)}Object.defineProperties(St,{MIN:{value:new St(I,Ut.EMPTY_NODE)},MAX:{value:new St(T,Ht)}}),Tt.__EMPTY_NODE=Ut.EMPTY_NODE,Pt.__childrenNodeConstructor=Ut,M=Ht,B=Ht,W=Qt;var Kt,Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return St.MAX},e.prototype.makePost=function(t,e){var n=Qt(t);return new St(e,n)},e.prototype.toString=function(){return".value"},e}(It)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(r.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?x(t.name,e.name):r},e.prototype.makePost=function(t,e){var n=Qt(t),i=Ut.EMPTY_NODE.updateChild(this.indexPath_,n);return new St(e,i)},e.prototype.maxPost=function(){var t=Ut.EMPTY_NODE.updateChild(this.indexPath_,Ht);return new St(T,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(It),Xt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.B)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.B)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.B)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.B)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.B)("DataSnapshot.child",0,1,arguments.length),e=String(e),ft("DataSnapshot.child",1,e,!1);var n=new Y(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,Nt)},t.prototype.hasChild=function(t){Object(o.B)("DataSnapshot.hasChild",1,1,arguments.length),ft("DataSnapshot.hasChild",1,t,!1);var e=new Y(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.B)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.B)("DataSnapshot.forEach",1,1,arguments.length),Object(o.C)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,function(i,r){return e(new t(r,n.ref_.child(i),Nt))})},t.prototype.hasChildren=function(){return Object(o.B)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.B)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.B)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$t=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.A)(this.snapshot.exportVal())},t}(),Zt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new $t("value",this,new Xt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),te=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new $t(t.type,this,new Xt(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var i=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),o=i.length;if(o===r.length){if(1===o){var s=i[0],a=r[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ee=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Kt,"Reference.ts has not been loaded"),Kt},set:function(t){Kt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===xt){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==T)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===Nt){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof Gt||t.getIndex()===Yt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.B)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,r){Object(o.B)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.C)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",i,r);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new te(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){Object(o.B)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.C)("Query.off",2,e,!0),Object(o.D)("Query.off",3,n,!0);var i=null,r=null;if("value"===t){var s=e||null;i=new Jt(s,null,n||null)}else t&&(e&&((r={})[t]=e),i=new te(r,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,i,r){var s=this;Object(o.B)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.C)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",i,r),c=!0,l=new o.a;l.promise.catch(function(){});var h=function(t){c&&(c=!1,s.off(e,h),n&&n.bind(a.context)(t),l.resolve(t))};return this.on(e,h,function(t){s.off(e,h),a.cancel&&a.cancel.bind(a.context)(t),l.reject(t)}),l.promise},t.prototype.limitToFirst=function(e){if(Object(o.B)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.B)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.B)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ft("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Y(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new Gt(n),r=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){Object(o.B)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(xt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.B)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Nt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.B)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Yt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.B)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.B)("Query.startAfter",0,2,arguments.length),ct("Query.startAfter",1,e,this.path,!1),pt("Query.startAfter",2,n,!0);var i=this.queryParams_.startAfter(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.B)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.B)("Query.endBefore",0,2,arguments.length),ct("Query.endBefore",1,e,this.path,!1),pt("Query.endBefore",2,n,!0);var i=this.queryParams_.endBefore(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.B)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.B)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.B)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=P(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.B)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var i=this.repo===e.repo,r=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return i&&r&&s},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,Object(o.C)(t,3,i.cancel,!0),i.context=n,Object(o.D)(t,4,i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ne=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ie=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),re=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?oe(t[".sv"],e,n):"object"==typeof t[".sv"]?se(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},oe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},se=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var i=t.increment;"number"!=typeof i&&Object(o.d)(!1,"Unexpected increment value: "+i);var r=e.node();if(Object(o.d)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;var s=r.getValue();return"number"!=typeof s?i:s+i},ae=function(t,e,n,i){return le(e,new ie(n,t),i)},ce=function(t,e,n){return le(t,new ne(e),n)};function le(t,e,n){var i,r=t.getPriority().val(),o=re(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=re(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Pt(a,Qt(o)):t}var c=t;return i=c,o!==c.getPriority().val()&&(i=i.updatePriority(new Pt(o))),c.forEachChild(Nt,function(t,r){var o=le(r,e.getImmediateChild(t),n);o!==r&&(i=i.updateImmediateChild(t,o))}),i}var he,ue,de=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var i=e.getFront();this.children.has(i)||this.children.set(i,new t);var r=this.children.get(i);e=e.popFront(),r.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nt,function(t,e){n.remember(new Y(t),e)}),this.forget(t)}if(this.children.size>0){var i=t.getFront();return t=t.popFront(),this.children.has(i)&&this.children.get(i).forget(t)&&this.children.delete(i),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,i){var r=new Y(t.toString()+"/"+n);i.forEachTree(r,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),pe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,Object(o.d)(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),_e=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=pe.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Y(e));return new t(Y.Empty,n,this.revert)}return Object(o.d)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),me=function(){function t(t,e){void 0===e&&(he||(he=new Ft(R)),e=he),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return j(e,function(t,e){n=n.set(new Y(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Y.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=r?{path:new Y(n).child(r.path),value:r.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),r=(this.children.get(i)||t.Empty).set(e.popFront(),n),o=this.children.insert(i,r);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var r=i.remove(e.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i,r=e.getFront(),o=(this.children.get(r)||t.Empty).setTree(e.popFront(),n);return i=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,i)},t.prototype.fold=function(t){return this.fold_(Y.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(i,r){n[i]=r.fold_(t.child(i),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Y.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var r=t.getFront(),o=this.children.get(r);return o?o.findOnPath_(t.popFront(),e.child(r),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Y.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),n.child(r),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(Y.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,i){i.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=pe.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Y.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=pe.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Y(e));return n.isEmpty()?null:n.value?new ye(this.source,Y.Empty,n.value):new t(this.source,Y.Empty,n)}return Object(o.d)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),we=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new ve(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new ve(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ve(Ut.EMPTY_NODE,!1,!1),new ve(Ut.EMPTY_NODE,!1,!1)),t}(),Ce=function(){function t(t,e,n,i,r){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=r}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Ee=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,r,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Ce.childRemovedChange(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ce.childAddedChange(e,n)):s.trackChildChange(Ce.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Nt,function(t,i){e.hasChild(t)||n.trackChildChange(Ce.childRemovedChange(t,i))}),e.isLeafNode()||e.forEachChild(Nt,function(e,i){if(t.hasChild(e)){var r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(Ce.childChangedChange(e,i,r))}else n.trackChildChange(Ce.childAddedChange(e,i))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ut.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Oe=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)(e===Ce.CHILD_ADDED||e===Ce.CHILD_CHANGED||e===Ce.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if(e===Ce.CHILD_ADDED&&r===Ce.CHILD_REMOVED)this.changeMap.set(n,Ce.childChangedChange(n,t.snapshotNode,i.snapshotNode));else if(e===Ce.CHILD_REMOVED&&r===Ce.CHILD_ADDED)this.changeMap.delete(n);else if(e===Ce.CHILD_REMOVED&&r===Ce.CHILD_CHANGED)this.changeMap.set(n,Ce.childRemovedChange(n,i.oldSnap));else if(e===Ce.CHILD_CHANGED&&r===Ce.CHILD_ADDED)this.changeMap.set(n,Ce.childAddedChange(n,t.snapshotNode));else{if(e!==Ce.CHILD_CHANGED||r!==Ce.CHILD_CHANGED)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,Ce.childChangedChange(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Se=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ie=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===r.length?null:r[0]},t}(),Te=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),xe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,i,r){var s,a,c=new Oe;if(n.type===pe.OVERWRITE){var l=n;l.source.fromUser?s=this.applyUserOverwrite_(e,l.path,l.snap,i,r,c):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered()&&!l.path.isEmpty(),s=this.applyServerOverwrite_(e,l.path,l.snap,i,r,a,c))}else if(n.type===pe.MERGE){var h=n;h.source.fromUser?s=this.applyUserMerge_(e,h.path,h.children,i,r,c):(Object(o.d)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,h.path,h.children,i,r,a,c))}else if(n.type===pe.ACK_USER_WRITE){var u=n;s=u.revert?this.revertUserWrite_(e,u.path,i,r,c):this.ackUserWrite_(e,u.path,u.affectedTree,i,r,c)}else{if(n.type!==pe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,i,c)}var d=c.getChanges();return t.maybeAddValueEvent_(e,s,d),new Te(s,d)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(Ce.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,r){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,c=void 0;if(e.isEmpty())if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var l=t.getCompleteServerSnap(),h=n.calcCompleteEventChildren(l instanceof Ut?l:Ut.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,r)}else{var u=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),u,r)}else{var d=e.getFront();if(".priority"===d){Object(o.d)(1===e.getLength(),"Can't have a priority with additional path components");var p=s.getNode();c=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,p,c);a=null!=f?this.filter_.updatePriority(p,f):s.getNode()}else{var _=e.popFront(),m=void 0;if(s.isCompleteForChild(d)){c=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),c);m=null!=g?s.getNode().getImmediateChild(d).updateChild(_,g):s.getNode().getImmediateChild(d)}else m=n.calcCompleteChild(d,t.getServerCache());a=null!=m?this.filter_.updateChild(s.getNode(),d,m,_,i,r):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,r,o,s){var a,c=t.getServerCache(),l=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=l.updateFullNode(c.getNode(),n,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(e,n);a=l.updateFullNode(c.getNode(),h,null)}else{var u=e.getFront();if(!c.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),p=c.getNode().getImmediateChild(u).updateChild(d,n);a=".priority"===u?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),u,p,d,Se,null)}var f=t.updateServerSnap(a,c.isFullyInitialized()||e.isEmpty(),l.filtersNodes()),_=new Ie(i,f,r);return this.generateEventCacheAfterServerEvent_(f,e,i,_,s)},t.prototype.applyUserOverwrite_=function(t,e,n,i,r,o){var s,a,c=t.getEventCache(),l=new Ie(i,t,r);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,c.isFullyInitialized(),c.isFiltered());else{var u=e.popFront(),d=c.getNode().getImmediateChild(h),p=void 0;if(u.isEmpty())p=n;else{var f=l.getCompleteChild(h);p=null!=f?".priority"===u.getBack()&&f.getChild(u.parent()).isEmpty()?f:f.updateChild(u,n):Ut.EMPTY_NODE}if(d.equals(p))s=t;else{var _=this.filter_.updateChild(c.getNode(),h,p,u,l,o);s=t.updateEventSnap(_,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,r,o,s){var a=this,c=e;return i.foreach(function(i,l){var h=n.child(i);t.cacheHasChild_(e,h.getFront())&&(c=a.applyUserOverwrite_(c,h,l,r,o,s))}),i.foreach(function(i,l){var h=n.child(i);t.cacheHasChild_(e,h.getFront())||(c=a.applyUserOverwrite_(c,h,l,r,o,s))}),c},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,i,r,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var c,l=t;c=e.isEmpty()?n:me.Empty.setTree(e,n);var h=t.getServerCache().getNode();return c.children.inorderTraversal(function(e,n){if(h.hasChild(e)){var c=t.getServerCache().getNode().getImmediateChild(e),u=a.applyMerge_(c,n);l=a.applyServerOverwrite_(l,new Y(e),u,i,r,o,s)}}),c.children.inorderTraversal(function(e,n){var c=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!c){var u=t.getServerCache().getNode().getImmediateChild(e),d=a.applyMerge_(u,n);l=a.applyServerOverwrite_(l,new Y(e),d,i,r,o,s)}}),l},t.prototype.ackUserWrite_=function(t,e,n,i,r,o){if(null!=i.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),i,r,s,o);if(e.isEmpty()){var c=me.Empty;return a.getNode().forEachChild(xt,function(t,e){c=c.set(new Y(t),e)}),this.applyServerMerge_(t,e,c,i,r,s,o)}return t}var l=me.Empty;return n.foreach(function(t,n){var i=e.child(t);a.isCompleteForPath(i)&&(l=l.set(t,a.getNode().getChild(i)))}),this.applyServerMerge_(t,e,l,i,r,s,o)},t.prototype.listenComplete_=function(t,e,n,i){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||e.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Se,i)},t.prototype.revertUserWrite_=function(t,e,n,i,r){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ie(n,t,i),c=t.getEventCache().getNode(),l=void 0;if(e.isEmpty()||".priority"===e.getFront()){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var u=t.getServerCache().getNode();Object(o.d)(u instanceof Ut,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(u)}l=this.filter_.updateFullNode(c,h=h,r)}else{var d=e.getFront(),p=n.calcCompleteChild(d,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?this.filter_.updateChild(c,d,p,e.popFront(),a,r):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(c,d,Ut.EMPTY_NODE,e.popFront(),a,r):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(l=this.filter_.updateFullNode(l,s,r))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Y.Empty),t.updateEventSnap(l,s,this.filter_.filtersNodes())},t}(),Re=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,r=[],o=[];return t.forEach(function(t){t.type===Ce.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Ce.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(r,Ce.CHILD_REMOVED,t,n,e),this.generateEventsForType_(r,Ce.CHILD_ADDED,t,n,e),this.generateEventsForType_(r,Ce.CHILD_MOVED,o,n,e),this.generateEventsForType_(r,Ce.CHILD_CHANGED,t,n,e),this.generateEventsForType_(r,Ce.VALUE,t,n,e),r},t.prototype.generateEventsForType_=function(t,e,n,i,r){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,r);i.forEach(function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.e)("Should only compare child_ events.");var n=new St(t.childName,t.snapshotNode),i=new St(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),ke=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new Ee(n.getIndex()),r=n.getNodeFilter();this.processor_=new xe(r);var o=e.getServerCache(),s=e.getEventCache(),a=i.updateFullNode(Ut.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(Ut.EMPTY_NODE,s.getNode(),null),l=new ve(a,o.isFullyInitialized(),i.filtersNodes()),h=new ve(c,s.isFullyInitialized(),r.filtersNodes());this.viewCache_=new we(h,l),this.eventGenerator_=new Re(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){var r=t.createCancelEvent(e=e,i);r&&n.push(r)})}if(t){for(var r=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(s+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===pe.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,r=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(r.viewCache),Object(o.d)(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nt,function(t,e){n.push(Ce.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Ce.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Pe=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ue,"Reference.ts has not been loaded"),ue},set:function(t){Object(o.d)(!ue,"__referenceConstructor has already been defined"),ue=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var i,s,a=t.source.queryId;if(null!==a){var c=this.views.get(a);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),c.applyOperation(t,e,n)}var l=[];try{for(var h=Object(r.g)(this.views.values()),u=h.next();!u.done;u=h.next())l=l.concat((c=u.value).applyOperation(t,e,n))}catch(d){i={error:d}}finally{try{u&&!u.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l},t.prototype.addEventRegistration=function(t,e,n,i,r){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(r?i:null),c=!1;a?c=!0:i instanceof Ut?(a=n.calcCompleteEventChildren(i),c=!1):(a=Ut.EMPTY_NODE,c=!1);var l=new we(new ve(a,c,!1),new ve(i,r,!1));s=new ke(t,l),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var o,s,a=e.queryIdentifier(),c=[],l=[],h=this.hasCompleteView();if("default"===a)try{for(var u=Object(r.g)(this.views.entries()),d=u.next();!d.done;d=u.next()){var p,f=Object(r.e)(d.value,2),_=f[0];l=l.concat((p=f[1]).removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(_),p.getQuery().getQueryParams().loadsAllData()||c.push(p.getQuery()))}}catch(m){o={error:m}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}else(p=this.views.get(a))&&(l=l.concat(p.removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||c.push(p.getQuery())));return h&&!this.hasCompleteView()&&c.push(new t.__referenceConstructor(e.repo,e.path)),{removed:c,events:l}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var i=Object(r.g)(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,i=null;try{for(var o=Object(r.g)(this.views.values()),s=o.next();!s.done;s=o.next())i=i||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(r.g)(this.views.values()),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ne=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new me(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var r=i.path,o=i.value,s=Y.relativePath(r,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(r,o))}var a=new me(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return j(e,function(e,i){n=n.addWrite(t.child(e),i)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,me.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Y.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Nt,function(e,n){t.push(new St(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new St(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new me(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return je(Y.Empty,this.writeTree_,t)},t.Empty=new t(new me(null)),t}();function je(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var i=null;return e.children.inorderTraversal(function(e,r){".priority"===e?(Object(o.d)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=je(t.child(e),r,n)}),n.getChild(t).isEmpty()||null===i||(n=n.updateChild(t.child(".priority"),i)),n}var Ae=function(){function t(){this.visibleWrites_=Ne.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new De(t,this)},t.prototype.addOverwrite=function(t,e,n,i){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,s=!1,a=this.allWrites_.length-1;r&&a>=0;){var c=this.allWrites_[a];c.visible&&(a>=n&&this.recordContainsPath_(c,i.path)?r=!1:i.path.contains(c.path)&&(s=!0)),a--}return!!r&&(s?(this.resetTree_(),!0):(i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):j(i.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(e);return!r&&o.isEmpty()?n:r||null!=n||o.hasCompleteWrite(Y.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||Ut.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(Y.Empty)?a.apply(n||Ut.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ut.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(Nt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var r=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nt,function(t,e){var i=r.childCompoundWrite(new Y(t)).apply(e);n=n.updateImmediateChild(t,i)}),r.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){Object(o.d)(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=t.child(e);if(this.visibleWrites_.hasCompleteWrite(r))return null;var s=this.visibleWrites_.childCompoundWrite(r);return s.isEmpty()?i.getChild(e):s.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,r,o){var s,a=this.visibleWrites_.childCompoundWrite(t),c=a.getCompleteNode(Y.Empty);if(null!=c)s=c;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),u=r?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=u.getNext();d&&l.length<i;)0!==h(d,n)&&l.push(d),d=u.getNext();return l},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Y.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=Ne.Empty,r=0;r<t.length;++r){var s=t[r];if(e(s)){var a=s.path,c=void 0;if(s.snap)n.contains(a)?(c=Y.relativePath(n,a),i=i.addWrite(c,s.snap)):a.contains(n)&&(c=Y.relativePath(a,n),i=i.addWrite(Y.Empty,s.snap.getChild(c)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(n.contains(a))c=Y.relativePath(n,a),i=i.addWrites(c,s.children);else if(a.contains(n))if((c=Y.relativePath(a,n)).isEmpty())i=i.addWrites(Y.Empty,s.children);else{var l=Object(o.x)(s.children,c.getFront());if(l){var h=l.getChild(c.popFront());i=i.addWrite(Y.Empty,h)}}}}}return i},t}(),De=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,r)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Fe=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=me.Empty,this.pendingWriteTree_=new Ae,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new ye(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=me.fromObject(e);return this.applyOperationToSyncPoints_(new be(fe.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=me.Empty;return null!=n.snap?i=i.set(Y.Empty,!0):j(n.children,function(t,e){i=i.set(new Y(t),e)}),this.applyOperationToSyncPoints_(new _e(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=me.fromObject(e);return this.applyOperationToSyncPoints_(new be(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var o=t.parseQueryKey_(r),s=o.path,a=o.queryId,c=Y.relativePath(s,e),l=new ye(fe.forServerTaggedQuery(a),c,n);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var r=this.queryKeyForTag_(i);if(r){var o=t.parseQueryKey_(r),s=o.path,a=o.queryId,c=Y.relativePath(s,e),l=me.fromObject(n),h=new be(fe.forServerTaggedQuery(a),c,l);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var r=t.parseQueryKey_(i),o=r.path,s=r.queryId,a=Y.relativePath(o,e),c=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,c)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,r=null,s=!1;this.syncPointTree_.foreachOnPath(i,function(t,e){var n=Y.relativePath(t,i);r=r||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,c=this.syncPointTree_.get(i);c?(s=s||c.hasCompleteView(),r=r||c.getCompleteServerCache(Y.Empty)):(c=new Pe,this.syncPointTree_=this.syncPointTree_.set(i,c)),null!=r?a=!0:(a=!1,r=Ut.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild(function(t,e){var n=e.getCompleteServerCache(Y.Empty);n&&(r=r.updateImmediateChild(t,n))}));var l=c.viewExistsForQuery(e);if(!l&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var u=t.getNextQueryTag_();this.queryToTagMap.set(h,u),this.tagToQueryMap.set(u,h)}var d=this.pendingWriteTree_.childWrites(i),p=c.addEventRegistration(e,n,d,r,a);if(!l&&!s){var f=c.viewForQuery(e);p=p.concat(this.setupListener_(e,f))}return p},t.prototype.removeEventRegistration=function(e,n,i){var r=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var c=s.removeEventRegistration(e,n,i);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var l=c.removed;a=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),u=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(h&&!u){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var _=p[f],m=_.getQuery(),g=this.createListenerForView_(_);this.listenProvider_.startListening(t.queryForListening_(m),this.tagForQuery_(m),g.hashFn,g.onComplete)}}!u&&l.length>0&&!i&&(h?this.listenProvider_.stopListening(t.queryForListening_(e),null):l.forEach(function(e){var n=r.queryToTagMap.get(t.makeQueryKey_(e));r.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(l)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,function(e,n){var i=Y.relativePath(e,t),r=n.getCompleteServerCache(i);if(r)return r});return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),j(n,function(t,e){i=i.concat(e)}),i})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var r=t.makeQueryKey_(i),o=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,r=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),r,s.hashFn,s.onComplete),c=this.syncPointTree_.subtree(i);if(r)Object(o.d)(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),j(n,function(t,e){i=i.concat(e)}),i}),h=0;h<l.length;++h){var u=l[h];this.listenProvider_.stopListening(t.queryForListening_(u),this.tagForQuery_(u))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ut.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var r=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var i=new Error(t+" at "+e.path.toString()+": "+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,r)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Y(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Y.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var r=e.get(Y.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(Y.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){var l=n?n.getImmediateChild(s):null,h=i.child(s);o=o.concat(this.applyOperationHelper_(a,c,l,h))}return r&&(o=o.concat(r.applyOperation(t,i,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var r=this,o=e.get(Y.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Y.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,c=i.child(e),l=t.operationForChild(e);l&&(s=s.concat(r.applyOperationDescendantsHelper_(l,o,a,c)))}),o&&(s=s.concat(o.applyOperation(t,i,n))),s},t.nextQueryTag_=1,t}(),Me=function(){function t(){this.rootNode_=Ut.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),We=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Be=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(r.a)({},t);return this.last_&&j(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ve=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Be(t);var n=1e4+2e4*Math.random();K(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;j(e,function(e,r){r>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=r,i=!0)}),i&&this.server_.reportStats(n),K(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),qe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new ze(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];i&&(t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),ze=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();g&&v("event: "+e.toString()),Q(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Ue=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=Object(r.f)(this.listeners_[t]),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),He=function(t){function e(){var e,n,i=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))},!1),i}return Object(r.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ue),Qe=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.p)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(r.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ue),Ke=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=function(e){t[e]&&Q(function(){n.onMessage_(t[e])})},i=0;i<t.length;++i)e(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},t}(),Ye="start",Ge="close",Xe=function(){function t(t,e,n,i,r){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=i,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=We.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ke(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.r)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new $e(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Object(r.e)(t,5),o=i[0],s=i[1],a=i[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ye)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Object(r.e)(t,2),o=i[0],s=i[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&X.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.r)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.A)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),i=N(n,1840),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.r)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.A)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$e=function(){function t(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.r)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=f(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){v("frame writing exception"),c.stack&&v(c.stack),v(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||v("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var i=function(){n.outstandingRequests.delete(e),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,function(){clearTimeout(r),i()})},t.prototype.addTag=function(t,e){var n=this;Object(o.r)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){v("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(r){}},Math.floor(1))},t}(),Ze="";function Je(t){Ze=t}var tn=null;"undefined"!=typeof MozWebSocket?tn=MozWebSocket:"undefined"!=typeof WebSocket&&(tn=WebSocket);var en=function(){function t(e,n,i,r,o){this.connId=e,this.applicationId=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=We.getCollection(n),this.connURL=t.connectionURL_(n,r,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var i={v:"5"};return!Object(o.r)()&&"undefined"!=typeof location&&location.hostname&&X.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL($,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,u.set("previous_websocket_failure",!0);try{if(Object(o.r)()){var i={headers:{"User-Agent":"Firebase/5/"+Ze+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},r=process.env,s=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new tn(this.connURL,[],i)}else this.mySock=new tn(this.connURL,[],i={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==tn&&!t.forceDisallow_},t.previouslyFailed=function(){return u.isInMemoryStorage||!0===u.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){u.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.u)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.A)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),nn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Xe,en]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,i,o=en&&en.isAvailable(),s=o&&!en.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[en];else{var a=this.transports_=[];try{for(var c=Object(r.g)(t.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),rn=function(){function t(t,e,n,i,r,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=i,this.onReady_=r,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new nn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,i)},Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=K(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(r)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),K(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(u.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),on=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),sn=1e3,an=function(t){function e(n,i,r,s,a,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=i,h.onDataUpdate_=r,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=w("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=sn,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(o.r)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),He.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&Qe.getInstance().on("online",h.onOnline_,h),h}return Object(r.c)(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(Object(o.A)(r)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},e.prototype.get=function(t){var e=this,n=new o.a,i={p:t.path.toString(),q:t.queryObject()},r={action:"g",request:i,onComplete:function(t){var r=t.d;"ok"===t.s?(e.onDataUpdate_(i.p,r,!1,null),n.resolve(r)):n.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&r===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,i){var r=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(s).set(r,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(i){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})},e.prototype.sendListen_=function(t){var n=this,i=t.query,r=i.path.toString(),o=i.queryIdentifier();this.log_("Listen on "+r+" for "+o);var s={p:r};t.tag&&(s.q=i.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,c=s.s;e.warnOnListenWarnings_(a,i),(n.listens.get(r)&&n.listens.get(r).get(o))===t&&(n.log_("listen response",s),"ok"!==c&&n.removeListen_(r,o),t.onComplete&&t.onComplete(c,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.x)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',r=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+r+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.m)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.t)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,function(n){var i=n.s,r=n.d||"error";t.authToken_===e&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,r))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,r){var o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),r&&r(i.s,i.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.A)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.A)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,c=this.lastSessionId,l=!1,h=null,u=function(){h?h.close():(l=!0,r())};this.realtime_={close:u,sendRequest:function(t){Object(o.d)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){l?v("getToken() completed but was canceled"):(v("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,h=new rn(s,a.repoInfo_,a.applicationId_,n,i,r,function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},c))}).then(null,function(e){a.log_("Failed to get token: "+e),l||(t.repoInfo_.nodeAdmin&&O(e),u())})}},e.prototype.interrupt=function(t){v("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){v("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.o)(this.interruptReasons_)&&(this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return P(t)}).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,i=new Y(t).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(e),r.delete(e),0===r.size&&this.listens.delete(i)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){v("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,i;this.tryAuth();try{for(var o=Object(r.g)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var c=(n=void 0,Object(r.g)(a.values())),l=c.next();!l.done;l=c.next())this.sendListen_(l.value)}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.r)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ze.replace(/\./g,"-")]=1,Object(o.p)()?t["framework.cordova"]=1:Object(o.s)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Qe.getInstance().currentlyOnline();return Object(o.o)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(on),cn=function(t){function e(e,n,i){var r=t.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=w("p:rest:"),r.listens_={},r}return Object(r.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,i,r){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var c=e.getListenId_(t,i),l={};this.listens_[c]=l;var h=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",h,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,i),Object(o.x)(s.listens_,c)===l&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var i=e.getListenId_(t,n);delete this.listens_[i]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),i=t.path.toString(),r=new o.a;return this.restRequest_(i+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(i,o,!1,null),r.resolve(o)):r.reject(new Error(o))}),r.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(r){var s=r&&r.accessToken;s&&(e.auth=s);var a=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?ns="+i.repoInfo_.namespace+Object(o.w)(e);i.log_("Sending REST request for "+a);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){i.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=Object(o.u)(c.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&O("Got unsuccessful REST response for "+a+" Status: "+c.status),n(c.status);n=null}},c.open("GET",a,!0),c.send()})},e}(on),ln=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),hn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new ln),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Y?e:new Y(e),i=this,r=n.getFront();null!==r;)i=new t(r,i,Object(o.x)(i.node_.children,r)||new ln),r=(n=n.popFront()).getFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;j(this.node_.children,function(i,r){e(new t(i,n,r))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new Y(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=Object(o.h)(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),un="repo_interrupt",dn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),pn=function(){function t(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new de,this.transactionQueueTree_=new hn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=We.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new cn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.A)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new an(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=We.getOrCreateReporter(this.repoInfo_,function(){return new Ve(t.stats_,t.server_)}),this.infoData_=new Me,this.infoSyncTree_=new Fe({startListening:function(e,n,i,r){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Fe({startListening:function(e,n,i,r){return t.server_.listen(e,i,n,function(n,i){var o=r(n,i);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var r=new Y(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(i)if(n){var a=Object(o.v)(e,function(t){return Qt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var c=Qt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(r,c,i)}else if(n){var l=Object(o.v)(e,function(t){return Qt(t)});s=this.serverSyncTree_.applyServerMerge(r,l)}else{var h=Qt(e);s=this.serverSyncTree_.applyServerOverwrite(r,h)}var u=r;s.length>0&&(u=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(u,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;j(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new Y("/.info/"+t),i=Qt(e);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.calcCompleteEventCache(t.path);return n.isEmpty()?this.server_.get(t).then(function(n){var i=Qt(n),r=e.serverSyncTree_.applyServerOverwrite(t.path,i);return e.eventQueue_.raiseEventsAtPath(t.path,r),Promise.resolve(new Xt(i,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.A)(t)+" failed: "+n),Promise.reject(new Error(n))}):Promise.resolve(new Xt(n,t.getRef(),t.getQueryParams().getIndex()))},t.prototype.setWithPriority=function(t,e,n,i){var r=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Qt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),c=ce(s,a,o),l=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,c,l,!0);this.eventQueue_.queueEvents(h),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(l,!o);r.eventQueue_.raiseEventsForChangedPath(t,s),r.callOnCompleteCallback(i,e,n)});var u=this.abortTransactions_(t);this.rerunTransactions_(u),this.eventQueue_.raiseEventsForChangedPath(u,[])},t.prototype.update=function(t,e,n){var i=this;this.log_("update",{path:t.toString(),value:e});var r=!0,o=this.generateServerValues(),s={};if(j(e,function(e,n){r=!1,s[e]=ae(t.child(e),Qt(n),i.serverSyncTree_,o)}),r)v("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(c),this.server_.merge(t.toString(),e,function(e,r){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(a,!o),c=s.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(c,s),i.callOnCompleteCallback(n,e,r)}),j(e,function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new de;this.onDisconnect_.forEachTree(Y.Empty,function(i,r){var o=ae(i,r,t.serverSyncTree_,e);n.remember(i,o)});var i=[];n.forEachTree(Y.Empty,function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)}),this.onDisconnect_=new de,this.eventQueue_.raiseEventsForChangedPath(Y.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(i,r){"ok"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,r)})},t.prototype.onDisconnectSet=function(t,e,n){var i=this,r=Qt(e);this.server_.onDisconnectPut(t.toString(),r.val(!0),function(e,o){"ok"===e&&i.onDisconnect_.remember(t,r),i.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var r=this,o=Qt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(i,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(Object(o.o)(e))return v("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(r,o){"ok"===r&&j(e,function(e,n){var r=Qt(n);i.onDisconnect_.remember(t.child(e),r)}),i.callOnCompleteCallback(n,r,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(un)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(un)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Be(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);j(e,function(t,e){for(var i=t,r=t.length;r<n+2;r++)i+=" ";console.log(i+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),v.apply(void 0,Object(r.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Q(function(){if("ok"===e)t(null);else{var i=(e||"error").toUpperCase(),r=i;n&&(r+=": "+n);var o=new Error(r);o.code=i,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Cn(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var r=function(){},s=new gn(this,t);s.on("value",r);var a={path:t,update:e,onComplete:n,status:null,order:f(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(t);a.currentInputSnapshot=c;var l=a.update(c.val());if(void 0===l){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var h=new Xt(a.currentInputSnapshot,new gn(this,a.path),Nt);a.onComplete(null,!1,h)}}else{lt("transaction failed: Data returned ",l,a.path),a.status=dn.RUN;var u=this.transactionQueueTree_.subTree(t),d=u.getValue()||[];d.push(a),u.setValue(d);var p=void 0;"object"==typeof l&&null!==l&&Object(o.h)(l,".priority")?(p=Object(o.x)(l,".priority"),Object(o.d)(at(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ut.EMPTY_NODE).getPriority().val();var _=this.generateServerValues(),m=Qt(l,p),g=ce(m,c,_);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ut.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===dn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map(function(t){return t.currentWriteId}),r=this.getLatestState_(t,i),s=r,a=r.hash(),c=0;c<e.length;c++){var l=e[c];Object(o.d)(l.status===dn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=dn.SENT,l.retryCount++;var h=Y.relativePath(t,l.path);s=s.updateChild(h,l.currentOutputSnapshotRaw)}var u=s.val(!0),d=t;this.server_.put(d.toString(),u,function(i){n.log_("transaction put response",{path:d.toString(),status:i});var r=[];if("ok"===i){for(var o=[],s=0;s<e.length;s++){if(e[s].status=dn.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,c=new gn(n,e[s].path),l=new Xt(a,c,Nt);o.push(e[s].onComplete.bind(null,null,!0,l))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,r),s=0;s<o.length;s++)Q(o[s])}else{if("datastale"===i)for(s=0;s<e.length;s++)e[s].status=e[s].status===dn.SENT_NEEDS_ABORT?dn.NEEDS_ABORT:dn.RUN;else for(O("transaction at "+d.toString()+" failed: "+i),s=0;s<e.length;s++)e[s].status=dn.NEEDS_ABORT,e[s].abortReason=i;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],i=[],r=t.filter(function(t){return t.status===dn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],c=Y.relativePath(e,a.path),l=!1,h=void 0;if(Object(o.d)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===dn.NEEDS_ABORT)l=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===dn.RUN)if(a.retryCount>=25)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var u=this.getLatestState_(a.path,r);a.currentInputSnapshot=u;var d=t[s].update(u.val());if(void 0!==d){lt("transaction failed: Data returned ",d,a.path);var p=Qt(d);"object"==typeof d&&null!=d&&Object(o.h)(d,".priority")||(p=p.updatePriority(u.getPriority()));var f=a.currentWriteId,_=this.generateServerValues(),m=ce(p,u,_);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_(),r.splice(r.indexOf(f),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,m,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[s].status=dn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new gn(this,t[s].path),y=new Xt(t[s].currentInputSnapshot,g,Nt);n.push(t[s].onComplete.bind(null,null,!1,y))}else n.push(t[s].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)Q(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var r=0;r<i.length;r++)e.push(i[r]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==dn.COMPLETED&&(n[i]=n[r],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(i),i.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],r=-1,s=0;s<e.length;s++)e[s].status===dn.SENT_NEEDS_ABORT||(e[s].status===dn.SENT?(Object(o.d)(r===s-1,"All SENT items should be at beginning of queue."),r=s,e[s].status=dn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===dn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===r?t.setValue(null):e.length=r+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i),s=0;s<n.length;s++)Q(n[s])}},t}(),fn=function(){function t(e){this.indexedFilter_=new Ee(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,r,o){return this.matches(new St(e,n))||(n=Ut.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ut.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(Ut.EMPTY_NODE);var r=this;return e.forEachChild(Nt,function(t,e){r.matches(new St(t,e))||(i=i.updateImmediateChild(t,Ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_n=function(){function t(t){this.rangedFilter_=new fn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,r,o){return this.rangedFilter_.matches(new St(e,n))||(n=Ut.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=Ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=Ut.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var s=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(s.name,s.node),o++}}else{i=(i=e.withIndex(this.index_)).updatePriority(Ut.EMPTY_NODE);var a=void 0,c=void 0,l=void 0;if(r=void 0,this.reverse_){r=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else r=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;for(var u=!1;r.hasNext();)s=r.getNext(),!u&&l(a,s)<=0&&(u=!0),u&&o<this.limit_&&l(s,c)<=0?o++:i=i.updateImmediateChild(s.name,Ut.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,r){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var c=t;Object(o.d)(c.numChildren()===this.limit_,"");var l=new St(e,n),h=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(c.hasChild(e)){for(var d=c.getImmediateChild(e),p=i.getChildAfterChild(this.index_,h,this.reverse_);null!=p&&(p.name===e||c.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:s(p,l);if(u&&!n.isEmpty()&&f>=0)return null!=r&&r.trackChildChange(Ce.childChangedChange(e,n,d)),c.updateImmediateChild(e,n);null!=r&&r.trackChildChange(Ce.childRemovedChange(e,d));var _=c.updateImmediateChild(e,Ut.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=r&&r.trackChildChange(Ce.childAddedChange(p.name,p.node)),_.updateImmediateChild(p.name,p.node)):_}return n.isEmpty()?t:u&&s(h,l)>=0?(null!=r&&(r.trackChildChange(Ce.childRemovedChange(h.name,h.node)),r.trackChildChange(Ce.childAddedChange(e,n))),c.updateImmediateChild(e,n).updateImmediateChild(h.name,Ut.EMPTY_NODE)):t},t}(),mn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.startAfter=function(t,e){var n,i;this.index_===xt?("string"==typeof t&&(t=Et(t)),n=this.startAt(t,e)):(i=null==e?T:Et(e),n=this.startAt(t,i));return n.startAfterSet_=!0,n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.endBefore=function(t,e){var n,i;return this.index_===xt?("string"==typeof t&&(t=Ot(t)),i=this.endAt(t,e)):(n=null==e?I:Ot(e),i=this.endAt(t,n)),i.endBeforeSet_=!0,i},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==Nt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ee(this.getIndex()):this.hasLimit()?new _n(this):new fn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===Nt?e=n.PRIORITY_INDEX:this.index_===Yt?e=n.VALUE_INDEX:this.index_===xt?e=n.KEY_INDEX:(Object(o.d)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=Object(o.A)(e),this.startSet_&&(i[n.START_AT]=Object(o.A)(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+Object(o.A)(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=Object(o.A)(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+Object(o.A)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),gn=function(t){function e(e,n){if(!(e instanceof pn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,mn.DEFAULT,!1)||this}return Object(r.c)(e,t),e.prototype.getKey=function(){return Object(o.B)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.B)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Y||(null===this.path.getFront()?_t("Reference.child",1,t,!1):ft("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.B)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.B)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.B)("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.C)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.B)("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.C)("Reference.update",2,e,!0);var r=new o.a;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.B)("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ut("Reference.setWithPriority",2,e,!1),Object(o.C)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new o.a;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return Object(o.B)("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),Object(o.C)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.B)("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),Object(o.C)("Reference.transaction",1,t,!1),Object(o.C)("Reference.transaction",2,e,!0),yt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new o.a;"function"==typeof e&&i.promise.catch(function(){});var r=function(t,n,r){t?i.reject(t):i.resolve(new vt(n,r)),"function"==typeof e&&e(t,n,r)};return this.repo.startTransaction(this.path,t,r,n),i.promise},e.prototype.setPriority=function(t,e){Object(o.B)("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),ut("Reference.setPriority",1,t,!1),Object(o.C)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.B)("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.C)("Reference.push",2,e,!0);var n,i=this.repo.serverTime(),r=Ct(i),s=this.child(r),a=this.child(r);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new bt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ee);ee.__referenceConstructor=gn,Pe.__referenceConstructor=gn;var yn,bn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(v("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),vn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),wn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return yn||(yn=new t),yn},t.prototype.interrupt=function(){var t,e,n,i;try{for(var o=Object(r.g)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var c=(n=void 0,Object(r.g)(Object.keys(this.repos_[a]))),l=c.next();!l.done;l=c.next())this.repos_[a][l.value].interrupt()}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,i;try{for(var o=Object(r.g)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var c=(n=void 0,Object(r.g)(Object.keys(this.repos_[a]))),l=c.next();!l.done;l=c.next())this.repos_[a][l.value].resume()}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new J(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new vn)},t.prototype.databaseFromApp=function(t,e,n,i){var r=n||t.options.databaseURL;void 0===r&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),v("Using default host for project ",t.options.projectId),r=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=tt(r,i),a=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a=(s=tt(r="http://"+c+"?ns="+a.namespace,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new vn:new bn(t,e);return gt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||E("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,l).database},t.prototype.deleteRepo=function(t){var e=Object(o.x)(this.repos_,t.app.name);e&&Object(o.x)(e,t.key)===t||E("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var i=Object(o.x)(this.repos_,e.name);i||(this.repos_[e.name]=i={});var r=Object(o.x)(i,t.toURLString());return r&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new pn(t,this.useRestClient_,e,n),i[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Cn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(r.b)(e,void 0,void 0,function(){return Object(r.d)(this,function(t){return this.checkDeleted_("delete"),wn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof pn||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new gn(this.repo_,Y.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):wn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.B)("database.ref",0,1,arguments.length),t instanceof gn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.B)(e,1,1,arguments.length);var n=tt(t,this.repo_.repoInfo_.nodeAdmin);gt(e,1,n);var i=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||i.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.B)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.B)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),En=Object.freeze({__proto__:null,forceLongPolling:function(){en.forceDisallow(),Xe.forceAllow()},forceWebSockets:function(){Xe.forceDisallow()},isWebSocketsAvailable:function(){return en.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,r=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Je(t.version);var c=new a.c("auth-internal",new a.b("database-standalone"));return c.setComponent(new a.a("auth-internal",function(){return i},"PRIVATE")),{instance:wn.getInstance().databaseFromApp(e,c,n,s),namespace:r}}}),On=an;an.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},an.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Sn=Object.freeze({__proto__:null,DataConnection:On,RealTimeConnection:rn,hijackHash:function(t){var e=an.prototype.put;return an.prototype.put=function(n,i,r,o){void 0!==o&&(o=t()),e.call(this,n,i,r,o)},function(){an.prototype.put=e}},ConnectionTarget:J,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){wn.getInstance().forceRestClient(t)}}),In=Cn.ServerValue;!function(e){Je(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return wn.getInstance().databaseFromApp(n,i,e)},"PUBLIC").setServiceProps({Reference:gn,Query:ee,Database:Cn,DataSnapshot:Xt,enableLogging:b,INTERNAL:En,ServerValue:In,TEST_ACCESS:Sn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.2"),Object(o.r)()&&(t.exports=n)}(i.a)}).call(this,n("3UD+")(t))},xQww:function(t,e,n){"use strict";n.r(e),n.d(e,"FeedModule",function(){return yo});var i=n("ofXK"),r=n("tyNb"),o=n("fXoL"),s=n("XNiG"),a=n("quSY"),c=n("LRne");function l(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var h=n("vkgz"),u=n("7o/Q"),d=n("D0XW");class p{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new f(t,this.dueTime,this.scheduler))}}class f extends u.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function _(t){t.debouncedNext()}var m=n("pLZG"),g=n("lJxs"),y=n("IzEk");function b(t){return null!=t&&""+t!="false"}function v(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function w(t){return Array.isArray(t)?t:[t]}function C(t){return null==t?"":"string"==typeof t?t:t+"px"}function E(t){return t instanceof o.l?t.nativeElement:t}let O;try{O="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(bo){O=!1}let S,I,T,x=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Object(i.t)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!O)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(o.B))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(o.B))},token:t,providedIn:"root"}),t})(),R=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)}}),t})();function k(t){return function(){if(null==S&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>S=!0}))}finally{S=S||!1}return S}()?t:!!t.capture}function P(){if(null==I){if("object"!=typeof document||!document)return I=!1,I;if("scrollBehavior"in document.documentElement.style)I=!0;else{const t=Element.prototype.scrollTo;I=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return I}var N=n("HDdC");let j=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),A=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[j]}),t})();class D extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new s.a,this._typeaheadSubscription=a.a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new s.a,this.change=new s.a,t instanceof o.D&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Object(h.a)(t=>this._pressedLetters.push(t)),function(t,e=d.a){return n=>n.lift(new p(t,e))}(t),Object(m.a)(()=>this._pressedLetters.length>0),Object(g.a)(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const i=(this._activeItemIndex+n)%e.length,r=e[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||l(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),i=e[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const i=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof o.D?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function F(t){return 0===t.buttons}"undefined"!=typeof Element&&Element;const M=new o.q("cdk-focus-monitor-default-options"),L=k({passive:!0,capture:!0});let W=(()=>{class t{constructor(t,e,n,i){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=F(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=B(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=B(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let i=e;i;i=i.parentElement)n.call(this,t,i)},this._document=n,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){const n=E(t);if(!this._platform.isBrowser||1!==n.nodeType)return Object(c.a)(null);const i=function(t){if(function(){if(null==T){const t="undefined"!=typeof document?document.head:null;T=!(!t||!t.createShadowRoot&&!t.attachShadow)}return T}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return e&&(r.checkChildren=!0),r.subject;const o={checkChildren:e,subject:new s.a,rootNode:i};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=E(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const i=E(t);i===this._getDocument().activeElement?this._getClosestElementsInfo(i).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOriginForCurrentEventQueue(e),"function"==typeof i.focus&&i.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=B(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===B(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,L),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,L)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,L),t.addEventListener("mousedown",this._documentMousedownListener,L),t.addEventListener("touchstart",this._documentTouchstartListener,L),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,L),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,L),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,L),t.removeEventListener("mousedown",this._documentMousedownListener,L),t.removeEventListener("touchstart",this._documentTouchstartListener,L),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,i)=>{(i===t||n.checkChildren&&i.contains(t))&&e.push([i,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(o.z),o.Wb(x),o.Wb(i.d,8),o.Wb(M,8))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(o.z),Object(o.Wb)(x),Object(o.Wb)(i.d,8),Object(o.Wb)(M,8))},token:t,providedIn:"root"}),t})();function B(t){return t.composedPath?t.composedPath()[0]:t.target}const V="cdk-high-contrast-black-on-white",q="cdk-high-contrast-white-on-black",z="cdk-high-contrast-active";let U=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(z),t.remove(V),t.remove(q);const e=this.getHighContrastMode();1===e?(t.add(z),t.add(V)):2===e&&(t.add(z),t.add(q))}}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(x),o.Wb(i.d))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(x),Object(o.Wb)(i.d))},token:t,providedIn:"root"}),t})(),H=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)(o.Wb(U))},imports:[[R,A]]}),t})();const Q=new o.q("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(o.V)(i.d)}});let K=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new o.n,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Q,8))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(Q,8))},token:t,providedIn:"root"}),t})(),Y=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)}}),t})();const G=new o.P("11.1.2");var X=n("JX91"),$=n("R1ws");const Z=new o.P("11.1.2"),J=new o.q("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let tt,et=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Object(o.W)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Z.full!==G.full&&console.warn("The Angular Material version ("+Z.full+") does not match the Angular CDK version ("+G.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)(o.Wb(U),o.Wb(J,8),o.Wb(i.d))},imports:[[Y],Y]}),t})();function nt(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=b(t)}}}function it(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)}}}function rt(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=b(t)}}}function ot(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?v(t):this.defaultTabIndex}}}try{tt="undefined"!=typeof Intl}catch(bo){tt=!1}let st=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[et],et]}),t})();class at{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ct={enterDuration:450,exitDuration:400},lt=k({passive:!0}),ht=["mousedown","touchstart"],ut=["mouseup","mouseleave","touchend","touchcancel"];class dt{constructor(t,e,n,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=E(n))}fadeInRipple(t,e,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},ct),n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const o=n.radius||function(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,i),s=t-i.left,a=e-i.top,c=r.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left=s-o+"px",l.style.top=a-o+"px",l.style.height=2*o+"px",l.style.width=2*o+"px",null!=n.color&&(l.style.backgroundColor=n.color),l.style.transitionDuration=c+"ms",this._containerElement.appendChild(l),window.getComputedStyle(l).getPropertyValue("opacity"),l.style.transform="scale(1)";const h=new at(this,l,n);return h.state=0,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const t=h===this._mostRecentTransientRipple;h.state=1,n.persistent||t&&this._isPointerDown||h.fadeOut()},c),h}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,i=Object.assign(Object.assign({},ct),t.config.animation);n.style.transitionDuration=i.exitDuration+"ms",n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=E(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(ht))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ut),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=F(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,lt)})})}_removeTriggerEvents(){this._triggerElement&&(ht.forEach(t=>{this._triggerElement.removeEventListener(t,this,lt)}),this._pointerUpEventsRegistered&&ut.forEach(t=>{this._triggerElement.removeEventListener(t,this,lt)}))}}const pt=new o.q("mat-ripple-global-options");let ft=(()=>{class t{constructor(t,e,n,i,r){this._elementRef=t,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new dt(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.z),o.Mb(x),o.Mb(pt,8),o.Mb($.a,8))},t.\u0275dir=o.Hb({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&o.Eb("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),_t=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[et,R],et]}),t})(),mt=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[et]]}),t})(),gt=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[_t,i.c,et,mt]]}),t})();const yt=["mat-button",""],bt=["*"],vt=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class wt{constructor(t){this._elementRef=t}}const Ct=it(nt(rt(wt)));let Et=(()=>{class t extends Ct{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of vt)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(W),o.Mb($.a,8))},t.\u0275cmp=o.Gb({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&o.Bc(ft,!0),2&t){let t;o.lc(t=o.ac())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(o.Bb("disabled",e.disabled||null),o.Eb("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o.xb],attrs:yt,ngContentSelectors:bt,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(o.hc(),o.Sb(0,"span",0),o.gc(1),o.Rb(),o.Nb(2,"span",1),o.Nb(3,"span",2)),2&t&&(o.Ab(2),o.Eb("mat-button-ripple-round",e.isRoundButton||e.isIconButton),o.ic("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[ft],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),Ot=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[_t,et],et]}),t})(),St=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=b(t)}get inset(){return this._inset}set inset(t){this._inset=b(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,e){2&t&&(o.Bb("aria-orientation",e.vertical?"vertical":"horizontal"),o.Eb("mat-divider-vertical",e.vertical)("mat-divider-horizontal",!e.vertical)("mat-divider-inset",e.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,e){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),t})(),It=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[et],et]}),t})();var Tt=n("z6cu"),xt=n("DH7j"),Rt=n("XoHu"),kt=n("Cfvw");function Pt(t,e){return new N.a(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let o=0,s=0;for(let a=0;a<i;a++){const c=Object(kt.a)(t[a]);let l=!1;n.add(c.subscribe({next:t=>{l||(l=!0,s++),r[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==i&&l||(s===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}var Nt=n("JIr8"),jt=n("nYR2"),At=n("w1tV"),Dt=n("bOdf");class Ft{}class Mt{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Mt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Mt;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Mt?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Lt{encodeKey(t){return Wt(t)}encodeValue(t){return Wt(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Wt(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Bt{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Lt,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const i=t.indexOf("="),[r,o]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],s=n.get(r)||[];s.push(o),n.set(r,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Bt({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Vt(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function qt(t){return"undefined"!=typeof Blob&&t instanceof Blob}function zt(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Ut{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new Mt),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Bt,this.urlWithParams=e}serializeBody(){return null===this.body?null:Vt(this.body)||qt(this.body)||zt(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zt(this.body)?null:qt(this.body)?this.body.type||null:Vt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Ut(e,n,r,{params:c,headers:a,reportProgress:s,responseType:i,withCredentials:o})}}var Ht=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Qt extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new Mt,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=Ht.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Qt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function Kt(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Yt=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof Ut)i=t;else{let r=void 0;r=n.headers instanceof Mt?n.headers:new Mt(n.headers);let o=void 0;n.params&&(o=n.params instanceof Bt?n.params:new Bt({fromObject:n.params})),i=new Ut(t,e,void 0!==n.body?n.body:null,{headers:r,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=Object(c.a)(i).pipe(Object(Dt.a)(t=>this.handler.handle(t)));if(t instanceof Ut||"events"===n.observe)return r;const o=r.pipe(Object(m.a)(t=>t instanceof Qt));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return o.pipe(Object(g.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(g.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(g.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(g.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Bt).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Kt(n,e))}post(t,e,n={}){return this.request("POST",t,Kt(n,e))}put(t,e,n={}){return this.request("PUT",t,Kt(n,e))}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Ft))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})();var Gt=n("jhN1");const Xt=["*"];function $t(t){return Error(`Unable to find icon with the name "${t}"`)}function Zt(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function Jt(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class te{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let ee=(()=>{class t{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new te(n,null,i))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){const r=this._sanitizer.sanitize(o.I.HTML,n);if(!r)throw Jt(n);return this._addSvgIconConfig(t,e,new te("",r,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new te(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(o.I.HTML,e);if(!i)throw Jt(e);return this._addSvgIconSetConfig(t,new te("",i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(o.I.RESOURCE_URL,t);if(!e)throw Zt(t);const n=this._cachedIconsByUrl.get(e);return n?Object(c.a)(ne(n)):this._loadSvgIconFromConfig(new te(t,null)).pipe(Object(h.a)(t=>this._cachedIconsByUrl.set(e,t)),Object(g.a)(t=>ne(t)))}getNamedSvgIcon(t,e=""){const n=ie(e,t);let i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);if(i=this._getIconConfigFromResolvers(e,t),i)return this._svgIconConfigs.set(n,i),this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):Object(Tt.a)($t(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Object(c.a)(ne(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Object(g.a)(t=>ne(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Object(c.a)(n):function(...t){if(1===t.length){const e=t[0];if(Object(xt.a)(e))return Pt(e,null);if(Object(Rt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Pt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Pt(t=1===t.length&&Object(xt.a)(t[0])?t[0]:t,null).pipe(Object(g.a)(t=>e(...t)))}return Pt(t,null)}(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(Object(Nt.a)(e=>{const n=this._sanitizer.sanitize(o.I.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),Object(c.a)(null)})))).pipe(Object(g.a)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw $t(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.svgText&&i.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(i),n=this._extractSvgIconFromSet(e,t,i.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Object(h.a)(e=>t.svgText=e),Object(g.a)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Object(c.a)(null):this._fetchIcon(t).pipe(Object(h.a)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const i=t.querySelector(`[id="${e}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(r),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let i=0;i<n.length;i++){const{name:t,value:r}=n[i];"id"!==t&&e.setAttribute(t,r)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,r=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(o.I.RESOURCE_URL,n);if(!s)throw Zt(n);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:r}).pipe(Object(jt.a)(()=>this._inProgressUrlFetches.delete(s)),Object(At.a)());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(ie(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let i=0;i<this._resolvers.length;i++){const r=this._resolvers[i](e,t);if(r)return(n=r).url&&n.options?new te(r.url,null,r.options):new te(r,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Yt,8),o.Wb(Gt.b),o.Wb(i.d,8),o.Wb(o.m))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(Yt,8),Object(o.Wb)(Gt.b),Object(o.Wb)(i.d,8),Object(o.Wb)(o.m))},token:t,providedIn:"root"}),t})();function ne(t){return t.cloneNode(!0)}function ie(t,e){return t+":"+e}class re{constructor(t){this._elementRef=t}}const oe=it(re),se=new o.q("mat-icon-location",{providedIn:"root",factory:function(){const t=Object(o.V)(i.d),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),ae=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ce=ae.map(t=>`[${t}]`).join(", "),le=/^url\(['"]?#(.*?)['"]?\)$/;let he=(()=>{class t extends oe{constructor(t,e,n,i,r){super(t),this._iconRegistry=e,this._location=i,this._errorHandler=r,this._inline=!1,this._currentIconFetch=a.a.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=b(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let i=0;i<e.length;i++)e[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(ce),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)ae.forEach(t=>{const r=e[i],o=r.getAttribute(t),s=o?o.match(le):null;if(s){let e=n.get(r);e||(e=[],n.set(r,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(Object(y.a)(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(ee),o.Xb("aria-hidden"),o.Mb(se),o.Mb(o.m))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(o.Bb("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),o.Eb("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.xb],ngContentSelectors:Xt,decls:1,vars:0,template:function(t,e){1&t&&(o.hc(),o.gc(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),ue=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[et],et]}),t})();var de=n("zx2A");function pe(t){return e=>e.lift(new fe(t))}class fe{constructor(t){this.notifier=t}call(t,e){const n=new _e(t),i=Object(de.c)(this.notifier,new de.a(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class _e extends de.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class me{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new s.a,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let ge=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[st,_t,et,mt,i.c],st,et,mt,It]}),t})();var ye=n("VRyK"),be=n("7Hc7"),ve=n("eIep"),we=n("WMd4");function Ce(t,e=d.a){var n;const i=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new Ee(i,e))}class Ee{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Oe(t,this.delay,this.scheduler))}}class Oe extends u.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,i=t.scheduler,r=t.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const e=Math.max(0,n[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Oe.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new Se(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(we.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(we.a.createComplete()),this.unsubscribe()}}class Se{constructor(t,e){this.time=t,this.notification=e}}var Ie=n("R0Ic");class Te{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class xe extends Te{constructor(t,e,n,i){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=i}}class Re extends Te{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class ke extends Te{constructor(t){super(),this.element=t instanceof o.l?t.nativeElement:t}}class Pe extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof xe?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Re?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof ke?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,n,i,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=r}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Ne=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)}}),t})();var je=n("n6bG");function Ae(t,e,n,i){return Object(je.a)(n)&&(i=n,n=void 0),i?Ae(t,e,n).pipe(Object(g.a)(t=>Object(xt.a)(t)?i(...t):i(t))):new N.a(i=>{De(t,e,function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},i,n)})}function De(t,e,n,i,r){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const i=t;t.addEventListener(e,n,r),o=()=>i.removeEventListener(e,n,r)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const i=t;t.on(e,n),o=()=>i.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const i=t;t.addListener(e,n),o=()=>i.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)De(t[o],e,n,i,r)}i.add(o)}n("3N8a"),n("IjjT");class Fe{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Me(t,this.compare,this.keySelector))}}class Me extends u.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Le{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new We(t,this.durationSelector))}}class We extends de.b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=Object(de.c)(n,new de.a(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var Be=n("Y7HM"),Ve=n("z+Ro");function qe(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}function ze(t,e=d.a){return n=()=>function(t=0,e,n){let i=-1;return Object(Be.a)(e)?i=Number(e)<1?1:Number(e):Object(Ve.a)(e)&&(n=e),Object(Ve.a)(n)||(n=d.a),new N.a(e=>{const r=Object(Be.a)(t)?t:+t-n.now();return n.schedule(qe,r,{index:0,period:i,subscriber:e})})}(t,e),function(t){return t.lift(new Le(n))};var n}var Ue=n("qgXg"),He=n("pxpQ"),Qe=n("9ppp"),Ke=n("Ylt2");class Ye extends s.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Ge(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let o;if(this.closed)throw new Qe.a;if(this.isStopped||this.hasError?o=a.a.EMPTY:(this.observers.push(t),o=new Ke.a(this,t)),i&&t.add(t=new He.a(t,i)),e)for(let s=0;s<r&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<r&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ue.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let o=0;for(;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i}}class Ge{constructor(t,e){this.time=t,this.value=e}}function Xe(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,o,s=0,a=!1,c=!1;return function(l){let h;s++,!r||a?(a=!1,r=new Ye(t,e,i),h=r.subscribe(this),o=l.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){c=!0,o=void 0,r.complete()}})):h=r.subscribe(this),this.add(()=>{s--,h.unsubscribe(),o&&!c&&n&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}let $e=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new s.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new N.a(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(ze(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(c.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(m.a)(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=E(e),i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ae(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(o.z),o.Wb(x),o.Wb(i.d,8))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(o.z),Object(o.Wb)(x),Object(o.Wb)(i.d,8))},token:t,providedIn:"root"}),t})(),Ze=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new s.a,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,i=n.getBoundingClientRect();return{top:-i.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-i.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(ze(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(x),o.Wb(o.z),o.Wb(i.d,8))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(x),Object(o.Wb)(o.z),Object(o.Wb)(i.d,8))},token:t,providedIn:"root"}),t})(),Je=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)}}),t})(),tn=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[Y,R,Je],Y,Je]}),t})();const en=P();class nn{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=C(-this._previousScrollPosition.left),t.style.top=C(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,i=e.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),en&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),en&&(e.scrollBehavior=i,n.scrollBehavior=r)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class rn{constructor(t,e,n,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class on{enable(){}disable(){}attach(){}}function sn(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function an(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class cn{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();sn(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ln=(()=>{class t{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new on,this.close=t=>new rn(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new nn(this._viewportRuler,this._document),this.reposition=t=>new cn(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=i}}return t.\u0275fac=function(e){return new(e||t)(o.Wb($e),o.Wb(Ze),o.Wb(o.z),o.Wb(i.d))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)($e),Object(o.Wb)(Ze),Object(o.Wb)(o.z),Object(o.Wb)(i.d))},token:t,providedIn:"root"}),t})();class hn{constructor(t){if(this.scrollStrategy=new on,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class un{constructor(t,e,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class dn{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let pn=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(i.d))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(i.d))},token:t,providedIn:"root"}),t})(),fn=(()=>{class t extends pn{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(i.d))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(i.d))},token:t,providedIn:"root"}),t})(),_n=(()=>{class t extends pn{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let i=n.length-1;i>-1;i--){const r=n[i];if(!(r._outsidePointerEvents.observers.length<1)&&r.hasAttached()){if(r.overlayElement.contains(e))break;r._outsidePointerEvents.next(t)}}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("click",this._clickListener,!0),this._document.body.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=this._document.body.style.cursor,this._document.body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("click",this._clickListener,!0),this._document.body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(i.d),o.Wb(x))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(i.d),Object(o.Wb)(x))},token:t,providedIn:"root"}),t})();const mn=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let gn=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||mn){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),mn?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(i.d),o.Wb(x))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(i.d),Object(o.Wb)(x))},token:t,providedIn:"root"}),t})();class yn{constructor(t,e,n,i,r,o,c,l,h){this._portalOutlet=t,this._host=e,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=h,this._backdropElement=null,this._backdropClick=new s.a,this._attachments=new s.a,this._detachments=new s.a,this._locationChanges=a.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new s.a,this._outsidePointerEvents=new s.a,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Object(y.a)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=C(this._config.width),t.height=C(this._config.height),t.minWidth=C(this._config.minWidth),t.minHeight=C(this._config.minHeight),t.maxWidth=C(this._config.maxWidth),t.maxHeight=C(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const i=t.classList;w(e).forEach(t=>{t&&(n?i.add(t):i.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(pe(Object(ye.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const bn="cdk-overlay-connected-position-bounding-box",vn=/([A-Za-z%]+)$/;class wn{constructor(t,e,n,i,r){this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new s.a,this._resizeSubscription=a.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(bn),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,i=[];let r;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),c=this._getOverlayFit(a,e,n,o);if(c.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(c,a,n)?i.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!r||r.overlayFit.visibleArea<c.visibleArea)&&(r={overlayFit:c,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(i.length){let t=null,e=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>e&&(e=i,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,i;if("center"==e.originX)n=t.left+t.width/2;else{const i=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;n="start"==e.originX?i:r}return i="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:i}}_getOverlayPoint(t,e,n){let i,r;return i="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+i,y:t.y+r}}_getOverlayFit(t,e,n,i){const r=On(e);let{x:o,y:s}=t,a=this._getOffset(i,"x"),c=this._getOffset(i,"y");a&&(o+=a),c&&(s+=c);let l=0-s,h=s+r.height-n.height,u=this._subtractOverflows(r.width,0-o,o+r.width-n.width),d=this._subtractOverflows(r.height,l,h),p=u*d;return{visibleArea:p,isCompletelyWithinViewport:r.width*r.height===p,fitsInViewportVertically:d===r.height,fitsInViewportHorizontally:u==r.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const i=n.bottom-e.y,r=n.right-e.x,o=En(this._overlayRef.getConfig().minHeight),s=En(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=r;return(t.fitsInViewportVertically||null!=o&&o<=i)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=On(e),r=this._viewportRect,o=Math.max(t.x+i.width-r.width,0),s=Math.max(t.y+i.height-r.height,0),a=Math.max(r.top-n.top-t.y,0),c=Math.max(r.left-n.left-t.x,0);let l=0,h=0;return l=i.width<=r.width?c||-o:t.x<this._viewportMargin?r.left-n.left-t.x:0,h=i.height<=r.height?a||-s:t.y<this._viewportMargin?r.top-n.top-t.y:0,this._previousPushAmount={x:l,y:h},{x:t.x+l,y:t.y+h}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new dn(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,i=this._isRtl();let r,o,s,a,c,l;if("top"===e.overlayY)o=t.y,r=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,r=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),i=this._lastBoundingBoxSize.height;r=2*e,o=t.y-e,r>i&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-i/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)l=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)c=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),i=this._lastBoundingBoxSize.width;a=2*e,c=t.x-e,a>i&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.x-i/2)}return{top:o,left:c,bottom:s,right:l,width:a,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=C(n.height),i.top=C(n.top),i.bottom=C(n.bottom),i.width=C(n.width),i.left=C(n.left),i.right=C(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(i.maxHeight=C(t)),r&&(i.maxWidth=C(r))}this._lastBoundingBoxSize=n,Cn(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Cn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const i=this._viewportRuler.getViewportScrollPosition();Cn(n,this._getExactOverlayY(e,t,i)),Cn(n,this._getExactOverlayX(e,t,i))}else n.position="static";let s="",a=this._getOffset(e,"x"),c=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),c&&(s+=`translateY(${c}px)`),n.transform=s.trim(),o.maxHeight&&(i?n.maxHeight=C(o.maxHeight):r&&(n.maxHeight="")),o.maxWidth&&(i?n.maxWidth=C(o.maxWidth):r&&(n.maxWidth="")),Cn(this._pane.style,n)}_getExactOverlayY(t,e,n){let i={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=o,"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=C(r.y),i}_getExactOverlayX(t,e,n){let i,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),i=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===i?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=C(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:an(t,n),isOriginOutsideView:sn(t,n),isOverlayClipped:an(e,n),isOverlayOutsideView:sn(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&w(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.l)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Cn(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function En(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(vn);return n&&"px"!==n?null:parseFloat(e)}return t||null}function On(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class Sn{constructor(t,e,n,i,r,o,s){this._preferredPositions=[],this._positionStrategy=new wn(n,i,r,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,i){const r=new un(t,e,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const In="cdk-global-overlay-wrapper";class Tn{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(In),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:o,maxHeight:s}=n,a=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==r&&"100vh"!==r||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(In),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let xn=(()=>{class t{constructor(t,e,n,i){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=i}global(){return new Tn}connectedTo(t,e,n){return new Sn(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new wn(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Ze),o.Wb(i.d),o.Wb(x),o.Wb(gn))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(Ze),Object(o.Wb)(i.d),Object(o.Wb)(x),Object(o.Wb)(gn))},token:t,providedIn:"root"}),t})(),Rn=0,kn=(()=>{class t{constructor(t,e,n,i,r,o,s,a,c,l,h){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=o,this._ngZone=s,this._document=a,this._directionality=c,this._location=l,this._outsideClickDispatcher=h}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),i=this._createPortalOutlet(n),r=new hn(t);return r.direction=r.direction||this._directionality.value,new yn(i,e,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+Rn++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(o.g)),new Pe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(ln),o.Wb(gn),o.Wb(o.j),o.Wb(xn),o.Wb(fn),o.Wb(o.r),o.Wb(o.z),o.Wb(i.d),o.Wb(K),o.Wb(i.g),o.Wb(_n))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})();const Pn={provide:new o.q("cdk-connected-overlay-scroll-strategy"),deps:[kn],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Nn=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[kn,Pn],imports:[[Y,Ne,tn],tn]}),t})();const jn=["mat-menu-item",""],An=["*"];function Dn(t,e){if(1&t){const t=o.Tb();o.Sb(0,"div",0),o.Zb("keydown",function(e){return o.pc(t),o.dc()._handleKeydown(e)})("click",function(){return o.pc(t),o.dc().closed.emit("click")})("@transformMenu.start",function(e){return o.pc(t),o.dc()._onAnimationStart(e)})("@transformMenu.done",function(e){return o.pc(t),o.dc()._onAnimationDone(e)}),o.Sb(1,"div",1),o.gc(2),o.Rb(),o.Rb()}if(2&t){const t=o.dc();o.ic("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),o.Bb("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Fn={transformMenu:Object(Ie.m)("transformMenu",[Object(Ie.j)("void",Object(Ie.k)({opacity:0,transform:"scale(0.8)"})),Object(Ie.l)("void => enter",Object(Ie.e)("120ms cubic-bezier(0, 0, 0.2, 1)",Object(Ie.k)({opacity:1,transform:"scale(1)"}))),Object(Ie.l)("* => void",Object(Ie.e)("100ms 25ms linear",Object(Ie.k)({opacity:0})))]),fadeInItems:Object(Ie.m)("fadeInItems",[Object(Ie.j)("showing",Object(Ie.k)({opacity:1})),Object(Ie.l)("void => *",[Object(Ie.k)({opacity:0}),Object(Ie.e)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Mn=new o.q("MatMenuContent"),Ln=new o.q("MAT_MENU_PANEL");class Wn{}const Bn=rt(nt(Wn));let Vn=(()=>{class t extends Bn{constructor(t,e,n,i){super(),this._elementRef=t,this._focusMonitor=n,this._parentMenu=i,this.role="menuitem",this._hovered=new s.a,this._focused=new s.a,this._highlighted=!1,this._triggersSubmenu=!1,i&&i.addItem&&i.addItem(this)}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t,e;const n=this._elementRef.nativeElement.cloneNode(!0),i=n.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++){const e=i[r];null===(t=e.parentNode)||void 0===t||t.removeChild(e)}return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(i.d),o.Mb(W),o.Mb(Ln,8))},t.\u0275cmp=o.Gb({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,e){1&t&&o.Zb("click",function(t){return e._checkDisabled(t)})("mouseenter",function(){return e._handleMouseEnter()}),2&t&&(o.Bb("role",e.role)("tabindex",e._getTabIndex())("aria-disabled",e.disabled.toString())("disabled",e.disabled||null),o.Eb("mat-menu-item",!0)("mat-menu-item-highlighted",e._highlighted)("mat-menu-item-submenu-trigger",e._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[o.xb],attrs:jn,ngContentSelectors:An,decls:2,vars:2,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"]],template:function(t,e){1&t&&(o.hc(),o.gc(0),o.Nb(1,"div",0)),2&t&&(o.Ab(1),o.ic("matRippleDisabled",e.disableRipple||e.disabled)("matRippleTrigger",e._getHostElement()))},directives:[ft],encapsulation:2,changeDetection:0}),t})();const qn=new o.q("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let zn=0,Un=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._ngZone=e,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new o.D,this._tabSubscription=a.a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new s.a,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new o.n,this.close=this.closed,this.panelId="mat-menu-panel-"+zn++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=b(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=b(t)}set panelClass(t){const e=this._previousPanelClass;e&&e.length&&e.split(" ").forEach(t=>{this._classList[t]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(t=>{this._classList[t]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new D(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Object(X.a)(this._directDescendantItems),Object(ve.a)(t=>Object(ye.a)(...t.map(t=>t._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Object(X.a)(this._directDescendantItems),Object(ve.a)(t=>Object(ye.a)(...t.map(t=>t._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const e=t.keyCode,n=this._keyManager;switch(e){case 27:l(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:38!==e&&40!==e||n.setFocusOrigin("keyboard"),n.onKeydown(t)}}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe(Object(y.a)(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const e=this._keyManager;if(e.setFocusOrigin(t).setFirstItemActive(),!e.activeItem&&this._directDescendantItems.length){let t=this._directDescendantItems.first._getHostElement().parentElement;for(;t;){if("menu"===t.getAttribute("role")){t.focus();break}t=t.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const e="mat-elevation-z"+Math.min(4+t,24),n=Object.keys(this._classList).find(t=>t.startsWith("mat-elevation-z"));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)}setPositionClasses(t=this.xPosition,e=this.yPosition){const n=this._classList;n["mat-menu-before"]="before"===t,n["mat-menu-after"]="after"===t,n["mat-menu-above"]="above"===e,n["mat-menu-below"]="below"===e}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Object(X.a)(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(t=>t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.z),o.Mb(qn))},t.\u0275dir=o.Hb({type:t,contentQueries:function(t,e,n){if(1&t&&(o.Fb(n,Mn,!0),o.Fb(n,Vn,!0),o.Fb(n,Vn,!1)),2&t){let t;o.lc(t=o.ac())&&(e.lazyContent=t.first),o.lc(t=o.ac())&&(e._allItems=t),o.lc(t=o.ac())&&(e.items=t)}},viewQuery:function(t,e){if(1&t&&o.Bc(o.L,!0),2&t){let t;o.lc(t=o.ac())&&(e.templateRef=t.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),t})(),Hn=(()=>{class t extends Un{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.z),o.Mb(qn))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,e){2&t&&o.Bb("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[o.zb([{provide:Ln,useExisting:t}]),o.xb],ngContentSelectors:An,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,e){1&t&&(o.hc(),o.wc(0,Dn,3,6,"ng-template"))},directives:[i.i],styles:['.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:"";display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[Fn.transformMenu,Fn.fadeInItems]},changeDetection:0}),t})();const Qn=new o.q("mat-menu-scroll-strategy"),Kn={provide:Qn,deps:[kn],useFactory:function(t){return()=>t.scrollStrategies.reposition()}},Yn=k({passive:!0});let Gn=(()=>{class t{constructor(t,e,n,i,r,s,c,l){this._overlay=t,this._element=e,this._viewContainerRef=n,this._menuItemInstance=s,this._dir=c,this._focusMonitor=l,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=a.a.EMPTY,this._hoverSubscription=a.a.EMPTY,this._menuCloseSubscription=a.a.EMPTY,this._handleTouchStart=()=>this._openedBy="touch",this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new o.n,this.onMenuOpen=this.menuOpened,this.menuClosed=new o.n,this.onMenuClose=this.menuClosed,this._scrollStrategy=i,this._parentMaterialMenu=r instanceof Un?r:void 0,e.nativeElement.addEventListener("touchstart",this._handleTouchStart,Yn),s&&(s._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(t=>{this._destroyMenu(t),"click"!==t&&"tab"!==t||!this._parentMaterialMenu||this._parentMaterialMenu.closed.emit(t)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Yn),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),e=t.getConfig();this._setPosition(e.positionStrategy),e.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Un&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(t,e){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const e=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),!this.restoreFocus||"keydown"!==t&&this._openedBy&&this.triggersSubmenu()||this.focus(this._openedBy),this._openedBy=void 0,e instanceof Un?(e._resetAnimation(),e.lazyContent?e._animationDone.pipe(Object(m.a)(t=>"void"===t.toState),Object(y.a)(1),pe(e.lazyContent._attached)).subscribe({next:()=>e.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),e.lazyContent&&e.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedBy||"program")}_setMenuElevation(){if(this.menu.setElevation){let t=0,e=this.menu.parentMenu;for(;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new hn({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(t=>{this.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})}_setPosition(t){let[e,n]="before"===this.menu.xPosition?["end","start"]:["start","end"],[i,r]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[o,s]=[i,r],[a,c]=[e,n],l=0;this.triggersSubmenu()?(c=e="before"===this.menu.xPosition?"start":"end",n=a="end"===e?"start":"end",l="bottom"===i?8:-8):this.menu.overlapTrigger||(o="top"===i?"bottom":"top",s="top"===r?"bottom":"top"),t.withPositions([{originX:e,originY:o,overlayX:a,overlayY:i,offsetY:l},{originX:n,originY:o,overlayX:c,overlayY:i,offsetY:l},{originX:e,originY:s,overlayX:a,overlayY:r,offsetY:-l},{originX:n,originY:s,overlayX:c,overlayY:r,offsetY:-l}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),e=this._overlayRef.detachments(),n=this._parentMaterialMenu?this._parentMaterialMenu.closed:Object(c.a)(),i=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Object(m.a)(t=>t!==this._menuItemInstance),Object(m.a)(()=>this._menuOpen)):Object(c.a)();return Object(ye.a)(t,n,i,e)}_handleMousedown(t){F(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const e=t.keyCode;13!==e&&32!==e||(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Object(m.a)(t=>t===this._menuItemInstance&&!t.disabled),Ce(0,be.b)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Un&&this.menu._isAnimating?this.menu._animationDone.pipe(Object(y.a)(1),Ce(0,be.b),pe(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new Re(this.menu.templateRef,this._viewContainerRef)),this._portal}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(kn),o.Mb(o.l),o.Mb(o.Q),o.Mb(Qn),o.Mb(Ln,8),o.Mb(Vn,10),o.Mb(K,8),o.Mb(W))},t.\u0275dir=o.Hb({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:["aria-haspopup","true",1,"mat-menu-trigger"],hostVars:2,hostBindings:function(t,e){1&t&&o.Zb("mousedown",function(t){return e._handleMousedown(t)})("keydown",function(t){return e._handleKeydown(t)})("click",function(t){return e._handleClick(t)}),2&t&&o.Bb("aria-expanded",e.menuOpen||null)("aria-controls",e.menuOpen?e.menu.panelId:null)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"]}),t})(),Xn=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[Kn],imports:[et]}),t})(),$n=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[Kn],imports:[[i.c,et,_t,Nn,Xn],Je,et,Xn]}),t})(),Zn=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[i.c,et,A],et]}),t})();n("NXyV");const Jn={provide:new o.q("mat-select-scroll-strategy"),deps:[kn],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let ti=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[Jn],imports:[[i.c,Nn,gt,et],Je,Zn,gt,et]}),t})();n("itXk"),n("GyhO");const ei={provide:new o.q("mat-tooltip-scroll-strategy"),deps:[kn],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}};let ni=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[ei],imports:[[H,i.c,Nn,et],et,Je]}),t})(),ii=(()=>{class t{constructor(){this.changes=new s.a,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,e,n)=>{if(0==n||0==e)return"0 of "+n;const i=t*e;return`${i+1} \u2013 ${i<(n=Math.max(n,0))?Math.min(i+e,n):i+e} of ${n}`}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const ri={provide:ii,deps:[[new o.A,new o.J,ii]],useFactory:function(t){return t||new ii}};let oi=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[ri],imports:[[i.c,Ot,ti,ni,et]]}),t})();const si=["primaryValueBar"];class ai{constructor(t){this._elementRef=t}}const ci=it(ai,"primary"),li=new o.q("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=Object(o.V)(i.d),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let hi=0,ui=(()=>{class t extends ci{constructor(t,e,n,i){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=n,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new o.n,this._animationEndSubscription=a.a.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+hi++;const r=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${r}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===n}get value(){return this._value}set value(t){this._value=di(v(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=di(t||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=Ae(t,"transitionend").pipe(Object(m.a)(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(o.z),o.Mb($.a,8),o.Mb(li,8))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){if(1&t&&o.Bc(si,!0),2&t){let t;o.lc(t=o.ac())&&(e._primaryValueBar=t.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(o.Bb("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),o.Eb("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[o.xb],decls:9,vars:4,consts:[["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(o.cc(),o.Sb(0,"svg",0),o.Sb(1,"defs"),o.Sb(2,"pattern",1),o.Nb(3,"circle",2),o.Rb(),o.Rb(),o.Nb(4,"rect",3),o.Rb(),o.bc(),o.Nb(5,"div",4),o.Nb(6,"div",5,6),o.Nb(8,"div",7)),2&t&&(o.Ab(2),o.ic("id",e.progressbarId),o.Ab(2),o.Bb("fill",e._rectangleFillValue),o.Ab(1),o.ic("ngStyle",e._bufferTransform()),o.Ab(1),o.ic("ngStyle",e._primaryTransform()))},directives:[i.l],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function di(t,e=0,n=100){return Math.max(e,Math.min(n,t))}let pi=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[i.c,et],et]}),t})();const fi=["*",[["mat-toolbar-row"]]],_i=["*","mat-toolbar-row"];class mi{constructor(t){this._elementRef=t}}const gi=it(mi);let yi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.Hb({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),bi=(()=>{class t extends gi{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(x),o.Mb(i.d))},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){if(1&t&&o.Fb(n,yi,!0),2&t){let t;o.lc(t=o.ac())&&(e._toolbarRows=t)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&o.Eb("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[o.xb],ngContentSelectors:_i,decls:2,vars:0,template:function(t,e){1&t&&(o.hc(fi),o.gc(0),o.gc(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),vi=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[et],et]}),t})();var wi=n("2Vo4");class Ci extends class{constructor(){this.expansionModel=new me(!0)}toggle(t){this.expansionModel.toggle(this._trackByValue(t))}expand(t){this.expansionModel.select(this._trackByValue(t))}collapse(t){this.expansionModel.deselect(this._trackByValue(t))}isExpanded(t){return this.expansionModel.isSelected(this._trackByValue(t))}toggleDescendants(t){this.expansionModel.isSelected(this._trackByValue(t))?this.collapseDescendants(t):this.expandDescendants(t)}collapseAll(){this.expansionModel.clear()}expandDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.select(...e.map(t=>this._trackByValue(t)))}collapseDescendants(t){let e=[t];e.push(...this.getDescendants(t)),this.expansionModel.deselect(...e.map(t=>this._trackByValue(t)))}_trackByValue(t){return this.trackBy?this.trackBy(t):t}}{constructor(t,e,n){super(),this.getLevel=t,this.isExpandable=e,this.options=n,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(t){const e=[];for(let n=this.dataNodes.indexOf(t)+1;n<this.dataNodes.length&&this.getLevel(t)<this.getLevel(this.dataNodes[n]);n++)e.push(this.dataNodes[n]);return e}expandAll(){this.expansionModel.select(...this.dataNodes.map(t=>this._trackByValue(t)))}}const Ei=new o.q("CDK_TREE_NODE_OUTLET_NODE");let Oi=(()=>{class t{constructor(t,e){this.viewContainer=t,this._node=e}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.Q),o.Mb(Ei,8))},t.\u0275dir=o.Hb({type:t,selectors:[["","cdkTreeNodeOutlet",""]]}),t})();class Si{constructor(t){this.$implicit=t}}let Ii=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.L))},t.\u0275dir=o.Hb({type:t,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),t})(),Ti=(()=>{class t{constructor(t,e){this._differs=t,this._changeDetectorRef=e,this._onDestroy=new s.a,this._levels=new Map,this.viewChange=new wi.a({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(t=>!t.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;var e,n;(n=this._dataSource)&&"function"==typeof n.connect?t=this._dataSource.connect(this):(e=this._dataSource)&&(e instanceof N.a||"function"==typeof e.lift&&"function"==typeof e.subscribe)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=Object(c.a)(this._dataSource)),t&&(this._dataSubscription=t.pipe(pe(this._onDestroy)).subscribe(t=>this.renderNodeChanges(t)))}renderNodeChanges(t,e=this._dataDiffer,n=this._nodeOutlet.viewContainer,i){const r=e.diff(t);r&&(r.forEachOperation((e,r,o)=>{if(null==e.previousIndex)this.insertNode(t[o],o,n,i);else if(null==o)n.remove(r),this._levels.delete(e.item);else{const t=n.get(r);n.move(t,o)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,e){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(n=>n.when&&n.when(e,t))||this._defaultNodeDef}insertNode(t,e,n,i){const r=this._getNodeDef(t,e),o=new Si(t);o.level=this.treeControl.getLevel?this.treeControl.getLevel(t):void 0!==i&&this._levels.has(i)?this._levels.get(i)+1:0,this._levels.set(t,o.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(r.template,o,e),xi.mostRecentTreeNode&&(xi.mostRecentTreeNode.data=t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.s),o.Mb(o.h))},t.\u0275cmp=o.Gb({type:t,selectors:[["cdk-tree"]],contentQueries:function(t,e,n){if(1&t&&o.Fb(n,Ii,!0),2&t){let t;o.lc(t=o.ac())&&(e._nodeDefs=t)}},viewQuery:function(t,e){if(1&t&&o.uc(Oi,!0),2&t){let t;o.lc(t=o.ac())&&(e._nodeOutlet=t.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,e){1&t&&o.Ob(0,0)},directives:[Oi],encapsulation:2}),t})(),xi=(()=>{class t{constructor(e,n){this._elementRef=e,this._tree=n,this._destroyed=new s.a,this._dataChanges=new s.a,t.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}_setExpanded(t){this._isAriaExpanded=t,this._elementRef.nativeElement.setAttribute("aria-expanded",""+t)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(t){let e=t.parentElement;for(;e&&!Ri(e);)e=e.parentElement;return e?e.classList.contains("cdk-nested-tree-node")?v(e.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",""+(this.level+1))}ngDoCheck(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}ngOnDestroy(){t.mostRecentTreeNode===this&&(t.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(Ti))},t.\u0275dir=o.Hb({type:t,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),t.mostRecentTreeNode=null,t})();function Ri(t){const e=t.classList;return!(!(null==e?void 0:e.contains("cdk-nested-tree-node"))&&!(null==e?void 0:e.contains("cdk-tree")))}const ki=/([A-Za-z%]+)$/;let Pi=(()=>{class t{constructor(t,e,n,i){this._treeNode=t,this._tree=e,this._element=n,this._dir=i,this._destroyed=new s.a,this.indentUnits="px",this._indent=40,this._setPadding(),i&&i.change.pipe(pe(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.subscribe(()=>this._setPadding())}get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,e=null==this._level?t:this._level;return"number"==typeof e?`${e*this._indent}${this.indentUnits}`:null}_setPadding(t=!1){const e=this._paddingIndent();if(e!==this._currentPadding||t){const t=this._element.nativeElement,n=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",i="paddingLeft"===n?"paddingRight":"paddingLeft";t.style[n]=e||"",t.style[i]="",this._currentPadding=e}}_setLevelInput(t){this._level=v(t,null),this._setPadding()}_setIndentInput(t){let e=t,n="px";if("string"==typeof t){const i=t.split(ki);e=i[0],n=i[1]||n}this.indentUnits=n,this._indent=v(e),this._setPadding()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(xi),o.Mb(Ti),o.Mb(o.l),o.Mb(K,8))},t.\u0275dir=o.Hb({type:t,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),t})(),Ni=(()=>{class t{constructor(t,e){this._tree=t,this._treeNode=e,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=b(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(Ti),o.Mb(xi))},t.\u0275dir=o.Hb({type:t,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,e){1&t&&o.Zb("click",function(t){return e._toggle(t)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),t})(),ji=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)}}),t})();const Ai=ot(nt(xi));let Di=(()=>{class t extends Ai{constructor(t,e,n){super(t,e),this._elementRef=t,this._tree=e,this.tabIndex=Number(n)||0,this._elementRef.nativeElement.classList.add("mat-tree-node")}ngOnInit(){super.ngOnInit()}ngDoCheck(){super.ngDoCheck()}ngOnDestroy(){super.ngOnDestroy()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.l),o.Mb(Ti),o.Xb("tabindex"))},t.\u0275dir=o.Hb({type:t,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[o.zb([{provide:xi,useExisting:t}]),o.xb]}),t})(),Fi=(()=>{class t extends Ii{}return t.\u0275fac=function(e){return Mi(e||t)},t.\u0275dir=o.Hb({type:t,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[o.zb([{provide:Ii,useExisting:t}]),o.xb]}),t})();const Mi=o.Ub(Fi);let Li=(()=>{class t extends Pi{get level(){return this._level}set level(t){this._setLevelInput(t)}get indent(){return this._indent}set indent(t){this._setIndentInput(t)}}return t.\u0275fac=function(e){return Wi(e||t)},t.\u0275dir=o.Hb({type:t,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[o.zb([{provide:Pi,useExisting:t}]),o.xb]}),t})();const Wi=o.Ub(Li);let Bi=(()=>{class t{constructor(t,e){this.viewContainer=t,this._node=e}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(o.Q),o.Mb(Ei,8))},t.\u0275dir=o.Hb({type:t,selectors:[["","matTreeNodeOutlet",""]],features:[o.zb([{provide:Oi,useExisting:t}])]}),t})(),Vi=(()=>{class t extends Ti{}return t.\u0275fac=function(e){return qi(e||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["mat-tree"]],viewQuery:function(t,e){if(1&t&&o.uc(Bi,!0),2&t){let t;o.lc(t=o.ac())&&(e._nodeOutlet=t.first)}},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[o.zb([{provide:Ti,useExisting:t}]),o.xb],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,e){1&t&&o.Ob(0,0)},directives:[Bi],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),t})();const qi=o.Ub(Vi);let zi=(()=>{class t extends Ni{get recursive(){return this._recursive}set recursive(t){this._recursive=b(t)}}return t.\u0275fac=function(e){return Ui(e||t)},t.\u0275dir=o.Hb({type:t,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[o.zb([{provide:Ni,useExisting:t}]),o.xb]}),t})();const Ui=o.Ub(zi);let Hi=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[ji,et],et]}),t})();class Qi{constructor(t,e,n,i){this.transformFunction=t,this.getLevel=e,this.isExpandable=n,this.getChildren=i}_flattenNode(t,e,n,i){const r=this.transformFunction(t,e);if(n.push(r),this.isExpandable(r)){const r=this.getChildren(t);r&&(Array.isArray(r)?this._flattenChildren(r,e,n,i):r.pipe(Object(y.a)(1)).subscribe(t=>{this._flattenChildren(t,e,n,i)}))}return n}_flattenChildren(t,e,n,i){t.forEach((r,o)=>{let s=i.slice();s.push(o!=t.length-1),this._flattenNode(r,e+1,n,s)})}flattenNodes(t){let e=[];return t.forEach(t=>this._flattenNode(t,0,e,[])),e}expandFlattenedNodes(t,e){let n=[],i=[];return i[0]=!0,t.forEach(t=>{let r=!0;for(let e=0;e<=this.getLevel(t);e++)r=r&&i[e];r&&n.push(t),this.isExpandable(t)&&(i[this.getLevel(t)+1]=e.isExpanded(t))}),n}}class Ki extends class{}{constructor(t,e,n=[]){super(),this._treeControl=t,this._treeFlattener=e,this._flattenedData=new wi.a([]),this._expandedData=new wi.a([]),this._data=new wi.a(n)}get data(){return this._data.value}set data(t){this._data.next(t),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}connect(t){const e=[t.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return Object(ye.a)(...e).pipe(Object(g.a)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}let Yi=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[Ot,It,ue,ge,$n,_t,oi,pi,vi,Hi,Nn]}),t})();var Gi=n("Kqap"),Xi=n("Xui1");const $i={showItem:Object(Ie.m)("showItem",[Object(Ie.l)(":enter",[Object(Ie.k)({opacity:"0"}),Object(Ie.e)("250ms ease-out",Object(Ie.k)({opacity:"1"}))]),Object(Ie.l)(":leave",[Object(Ie.k)({opacity:"1"}),Object(Ie.e)("250ms ease-out",Object(Ie.k)({opacity:"0"}))])])};var Zi=n("EY2u"),Ji=n("5+tZ"),tr=n("BFxc"),er=n("xbPD"),nr=n("mCNh");function ir(t,e){return arguments.length>=2?function(n){return Object(nr.a)(Object(Gi.a)(t,e),Object(tr.a)(1),Object(er.a)(e))(n)}:function(e){return Object(nr.a)(Object(Gi.a)((e,n,i)=>t(e,n,i+1)),Object(tr.a)(1))(e)}}var rr=n("SxV6");class or{constructor(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}call(t,e){return e.subscribe(new sr(t,this.project,this.concurrent,this.scheduler))}}class sr extends de.b{constructor(t,e,n,i){super(t),this.project=e,this.concurrent=n,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(t){const{subscriber:e,result:n,value:i,index:r}=t;e.subscribeToProjection(n,i,r)}_next(t){const e=this.destination;if(e.closed)return void this._complete();const n=this.index++;if(this.active<this.concurrent){e.next(t);try{const{project:e}=this,i=e(t,n);this.scheduler?this.destination.add(this.scheduler.schedule(sr.dispatch,0,{subscriber:this,result:i,value:t,index:n})):this.subscribeToProjection(i,t,n)}catch(i){e.error(i)}}else this.buffer.push(t)}subscribeToProjection(t,e,n){this.active++,this.destination.add(Object(de.c)(t,new de.a(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this._next(t)}notifyComplete(){const t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var ar=function(t){return t.job="job",t.story="story",t.comment="comment",t.poll="poll",t.pollopt="pollopt",t}({}),cr=n("l7GE"),lr=n("ZUHj");class hr{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new ur(t,this.observables,this.project))}}class ur extends cr.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++){let t=e[r];this.add(Object(lr.a)(this,t,void 0,r))}}notifyNext(t,e,n){this.values[n]=e;const i=this.toRespond;if(i.length>0){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class dr{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new pr(t,this.predicate))}}class pr extends u.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var fr=n("spgP");function _r(t,e){return e?Object(ve.a)(()=>t,e):Object(ve.a)(()=>t)}n("6Uf2");var mr=n("tf+s");const gr=new o.q("angularfire2.auth.use-emulator"),yr=new o.q("angularfire2.auth.settings"),br=new o.q("angularfire2.auth.tenant-id"),vr=new o.q("angularfire2.auth.langugage-code"),wr=new o.q("angularfire2.auth.use-device-language"),Cr=new o.q("angularfire.auth.persistence");let Er=(()=>{class t{constructor(t,e,r,o,a,l,h,u,d,p){const f=new fr.d(o),_=Object(fr.h)(f),y=new s.a,b=Object(c.a)(void 0).pipe(Object(He.b)(f.outsideAngular),Object(ve.a)(()=>o.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(g.a)(()=>Object(fr.g)(t,o,e)),Object(g.a)(t=>o.runOutsideAngular(()=>{const e=a,n=l;return Object(fr.f)(t.name+".auth","AngularFireAuth",t,()=>{const i=o.runOutsideAngular(()=>t.auth());return e&&i.useEmulator("http://"+e.join(":")),h&&(i.tenantId=h),i.languageCode=u,d&&i.useDeviceLanguage(),n&&(i.settings=n),p&&i.setPersistence(p),i},[e,h,u,d,n,p])})),Xe({bufferSize:1,refCount:!1}));if(Object(i.u)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(c.a)(null);else{b.pipe(Object(rr.a)()).subscribe();const t=b.pipe(Object(ve.a)(t=>t.getRedirectResult().then(t=>t,()=>null)),_,Xe({bufferSize:1,refCount:!1})),e=t=>new N.a(e=>({unsubscribe:o.runOutsideAngular(()=>t(e))})),n=b.pipe(Object(ve.a)(t=>e(t.onAuthStateChanged.bind(t)))),i=b.pipe(Object(ve.a)(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(_r(n),Object(mr.a)(f.outsideAngular),Object(He.b)(f.insideAngular)),this.user=t.pipe(_r(i),Object(mr.a)(f.outsideAngular),Object(He.b)(f.insideAngular)),this.idToken=this.user.pipe(Object(ve.a)(t=>t?Object(kt.a)(t.getIdToken()):Object(c.a)(null))),this.idTokenResult=this.user.pipe(Object(ve.a)(t=>t?Object(kt.a)(t.getIdTokenResult()):Object(c.a)(null))),this.credential=Object(ye.a)(t,y,this.authState.pipe(Object(m.a)(t=>!t))).pipe(Object(g.a)(t=>(null==t?void 0:t.user)?t:null),Object(mr.a)(f.outsideAngular),Object(He.b)(f.insideAngular))}return Object(fr.i)(this,b,o,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>y.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(fr.c),o.Wb(fr.b,8),o.Wb(o.B),o.Wb(o.z),o.Wb(gr,8),o.Wb(yr,8),o.Wb(br,8),o.Wb(vr,8),o.Wb(wr,8),o.Wb(Cr,8))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(fr.c),Object(o.Wb)(fr.b,8),Object(o.Wb)(o.B),Object(o.Wb)(o.z),Object(o.Wb)(gr,8),Object(o.Wb)(yr,8),Object(o.Wb)(br,8),Object(o.Wb)(vr,8),Object(o.Wb)(wr,8),Object(o.Wb)(Cr,8))},token:t,providedIn:"any"}),t})();Object(fr.e)(Er,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Or=n("Jgta");function Sr(t){return null==t}function Ir(t){return"function"==typeof t.set}function Tr(t,e){return Ir(e)?e:t.ref(e)}function xr(t,e){if("string"==typeof t)return e.stringCase();if(Ir(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Rr(t,e,n="on",i=d.b){return new N.a(r=>{let o=null;return o=t[n](e,(t,e)=>{i.schedule(()=>{r.next({snapshot:t,prevKey:e})}),"once"===n&&i.schedule(()=>r.complete())},t=>{i.schedule(()=>r.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(g.a)(t=>{const{snapshot:n,prevKey:i}=t;let r=null;return n.exists()&&(r=n.key),{type:e,payload:n,prevKey:i,key:r}}),Object(At.a)())}function kr(t,e){const n=t.length;for(let i=0;i<n;i++)if(t[i].payload.key===e)return i;return-1}function Pr(t,e){const{payload:n,prevKey:i,key:r}=e,o=kr(t,r),s=function(t,e){if(Sr(e))return 0;{const n=kr(t,e);return-1===n?t.length:n+1}}(t,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const i={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,i],!1})}return t;case"child_added":if(o>-1){const r=t[o-1];(r&&r.key||null)!==i&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==i)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===r?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Nr(t){return(Sr(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function jr(t,e,n){return function(t,e,n){return Rr(t,"value","once",n).pipe(Object(ve.a)(i=>{const r=[Object(c.a)(i)];return e.forEach(e=>r.push(Rr(t,e,"on",n))),Object(ye.a)(...r).pipe(Object(Gi.a)(Pr,[]))}),t=>t.lift(new Fe(undefined,undefined)))}(t,e=Nr(e),n)}function Ar(t,e,n){const i=(e=Nr(e)).map(e=>Rr(t,e,"on",n));return Object(ye.a)(...i)}function Dr(t,e){return function(n,i){return xr(n,{stringCase:()=>t.child(n)[e](i),firebaseCase:()=>n[e](i),snapshotCase:()=>n.ref[e](i)})}}function Fr(t,e){return function(){return Rr(t,"value","on",e)}}const Mr=new o.q("angularfire2.realtimeDatabaseURL"),Lr=new o.q("angularfire2.database.use-emulator");let Wr=(()=>{class t{constructor(t,e,n,i,r,o,s){this.schedulers=new fr.d(r),this.keepUnstableUntilFirst=Object(fr.h)(this.schedulers);const a=o,c=Object(fr.g)(t,r,e);!Or.a.auth&&s&&Object(fr.j)(),this.database=Object(fr.f)(`${c.name}.database.${n}`,"AngularFireDatabase",c,()=>{const t=r.runOutsideAngular(()=>c.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Tr(this.database,t));let i=n;return e&&(i=e(n)),function(t,e){const n=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Dr(i,"update"),set:Dr(i,"set"),push:t=>i.push(t),remove:(r=i,function(t){return t?xr(t,{stringCase:()=>r.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):r.remove()}),snapshotChanges:i=>jr(t,i,n).pipe(e.keepUnstableUntilFirst),stateChanges:i=>Ar(t,i,n).pipe(e.keepUnstableUntilFirst),auditTrail:i=>function(t,e,n){return function(t,e,n){return function(t,e){return Rr(t,"value","on",e).pipe(Object(g.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new hr(t,n))}}(e),Object(g.a)(([t,e])=>{const n=t.lastKeyToLoad,i=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:i}}),(i=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new dr(i))),Object(g.a)(t=>t.actions));var i}(t,Ar(t,e).pipe(Object(Gi.a)((t,e)=>[...t,e],[])),n)}(t,i,n).pipe(e.keepUnstableUntilFirst),valueChanges:(i,r)=>jr(t,i,n).pipe(Object(g.a)(t=>t.map(t=>r&&r.idField?Object.assign(Object.assign({},t.payload.val()),{[r.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var r}(i,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Tr(this.database,t));return i=this,{query:n=e,snapshotChanges:()=>Fr(n,i.schedulers.outsideAngular)().pipe(i.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Fr(n,i.schedulers.outsideAngular)().pipe(i.keepUnstableUntilFirst,Object(g.a)(t=>t.payload.exists()?t.payload.val():null))};var n,i}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(fr.c),o.Wb(fr.b,8),o.Wb(Mr,8),o.Wb(o.B),o.Wb(o.z),o.Wb(Lr,8),o.Wb(gr,8))},t.\u0275prov=Object(o.Ib)({factory:function(){return new t(Object(o.Wb)(fr.c),Object(o.Wb)(fr.b,8),Object(o.Wb)(Mr,8),Object(o.Wb)(o.B),Object(o.Wb)(o.z),Object(o.Wb)(Lr,8),Object(o.Wb)(gr,8))},token:t,providedIn:"any"}),t})(),Br=(()=>{class t{constructor(t){this.db=t,this.DEBUG=!1}getItemsContent(t){return Object(kt.a)(t).pipe(Object(Ji.a)(t=>this.getItem(t)),ir((t,e)=>t.push(e)&&t,[]))}getStoryIndices(t){return this.db.list("/v0",e=>e.child(t)).valueChanges().pipe(Object(rr.a)(),Object(h.a)(t=>this.DEBUG&&console.debug("GET Story ids",t)))}getRecursiveReplies(t){return this.getItem(t).pipe(Object(g.a)(t=>({node:t})),function(t,e=Number.POSITIVE_INFINITY,n){return e=(e||0)<1?Number.POSITIVE_INFINITY:e,i=>i.lift(new or(t,e,n))}(({node:t})=>t?Object(kt.a)(t.kids).pipe(Object(Ji.a)(e=>this.getItem(e).pipe(Object(g.a)(e=>({node:e,parent:t}))))):Zi.a),ir((t,{node:e,parent:n})=>n?n.replies.push(e)&&t:e),function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(g.a)(function(t,e){return n=>{let i=n;for(let r=0;r<e;r++){const e=null!=i?i[t[r]]:void 0;if(void 0===e)return;i=e}return i}}(t,e))(n)}("node"))}getStoryComments(t){return Object(kt.a)(t).pipe(Object(Dt.a)(t=>t.kids),Object(Ji.a)(t=>this.getRecursiveReplies(t)),ir((t,e)=>t.push(e)&&t,[]))}getItem(t){return this.db.object("/v0/item/"+t).valueChanges().pipe(Object(rr.a)(),Object(m.a)(t=>null!==t&&!t.deleted),Object(g.a)(t=>(!("kids"in t)&&(t.kids=[]),t.type===ar.comment&&(t.replies=[]),t)),Object(h.a)(t=>this.DEBUG&&console.debug("GET Item",t)))}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(Wr))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac}),t})();var Vr=n("naTb");let qr=(()=>{class t{transform(t){const e=t.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!==e&&e.length>2&&"string"==typeof e[2]&&e[2].length>0?e[2]:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Lb({name:"domain",type:t,pure:!0}),t})(),zr=(()=>{class t{transform(t){return 0===t?"":1===t?"1 reply hidden.":t+" replies hidden."}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Lb({name:"replies",type:t,pure:!0}),t})(),Ur=(()=>{class t{transform(t){const e=Math.abs(Date.now()-1e3*t)/36e5,n=Math.trunc(60*e),i=Math.floor(e),r=Math.floor(i/24);return r>1?r+" days ago":1===r?r+" day ago":i>1?i+" hours ago":1===i?i+" hour ago":n+" minutes ago"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Lb({name:"postFrom",type:t,pure:!0}),t})(),Hr=(()=>{class t{transform(t){switch(t){case Xi.a.TOP:return Xi.b.TOP;case Xi.a.BEST:return Xi.b.BEST;case Xi.a.NEW:return Xi.b.NEW;case Xi.a.SHOW:return Xi.b.SHOW;case Xi.a.ASK:return Xi.b.ASK;case Xi.a.JOB:return Xi.b.JOB;default:return Xi.b.TOP}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Lb({name:"headerTitle",type:t,pure:!0}),t})(),Qr=(()=>{class t{transform(t){switch(t){case Xi.e.DARK:return Xi.f.DARK;case Xi.e.LIGHT:default:return Xi.f.LIGHT}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Lb({name:"iconTheme",type:t,pure:!0}),t})(),Kr=(()=>{class t{transform(t){return t?10:30}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Lb({name:"commentPadding",type:t,pure:!0}),t})();const Yr=["scrollElement"];function Gr(t,e){1&t&&o.Ob(0)}function Xr(t,e){if(1&t&&(o.Sb(0,"div"),o.Sb(1,"a",19),o.yc(2),o.ec(3,"domain"),o.Rb(),o.Rb()),2&t){const t=o.dc().$implicit;o.ic("@showItem",void 0),o.Ab(1),o.ic("href",t.url,o.rc),o.Ab(1),o.Ac(" ",o.fc(3,3,t.url)," ")}}function $r(t,e){if(1&t){const t=o.Tb();o.Qb(0),o.Sb(1,"div",14),o.Sb(2,"div"),o.Sb(3,"a",15),o.Zb("click",function(){o.pc(t);const n=e.$implicit;return o.dc().navigateIntoComments(n.id)}),o.yc(4),o.Rb(),o.Rb(),o.wc(5,Xr,4,5,"div",16),o.Sb(6,"div",17),o.Sb(7,"span"),o.yc(8),o.Rb(),o.Sb(9,"span"),o.yc(10),o.Rb(),o.Sb(11,"span"),o.yc(12,"By "),o.Sb(13,"span",18),o.yc(14),o.Rb(),o.Rb(),o.Sb(15,"span"),o.yc(16),o.ec(17,"postFrom"),o.Rb(),o.Rb(),o.Rb(),o.Nb(18,"mat-divider"),o.Pb()}if(2&t){const t=e.$implicit;o.Ab(2),o.ic("@showItem",void 0),o.Ab(2),o.Ac(" ",t.title," "),o.Ab(1),o.ic("ngIf",t.url),o.Ab(1),o.ic("@showItem",void 0),o.Ab(2),o.Ac("",t.score," points"),o.Ab(2),o.Ac("",t.descendants," comments"),o.Ab(4),o.zc(t.by),o.Ab(2),o.Ac("From ",o.fc(17,8,t.time),"")}}function Zr(t,e){if(1&t){const t=o.Tb();o.Sb(0,"div",20),o.Sb(1,"button",21),o.Zb("click",function(){return o.pc(t),o.dc().infiniteLoad()}),o.yc(2," Keep loading more! "),o.Rb(),o.Rb()}}function Jr(t,e){if(1&t){const t=o.Tb();o.Sb(0,"button",22),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.TOP)}),o.Sb(1,"span",23),o.yc(2," Top "),o.Rb(),o.Rb(),o.Sb(3,"button",24),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.BEST)}),o.Sb(4,"span",23),o.yc(5," Best "),o.Rb(),o.Rb(),o.Sb(6,"button",25),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.NEW)}),o.Sb(7,"span",23),o.yc(8," New "),o.Rb(),o.Rb(),o.Sb(9,"button",26),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.ASK)}),o.Sb(10,"span",23),o.yc(11," Ask "),o.Rb(),o.Rb(),o.Sb(12,"button",27),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.SHOW)}),o.Sb(13,"span",23),o.yc(14," Show "),o.Rb(),o.Rb(),o.Sb(15,"button",28),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.JOB)}),o.Sb(16,"span",23),o.yc(17," Jobs "),o.Rb(),o.Rb()}}function to(t,e){if(1&t){const t=o.Tb();o.Sb(0,"button",29),o.Sb(1,"mat-icon"),o.yc(2,"menu"),o.Rb(),o.Rb(),o.Sb(3,"mat-menu",null,30),o.Sb(5,"button",31),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.TOP)}),o.Sb(6,"mat-icon"),o.yc(7,"whatshot"),o.Rb(),o.Sb(8,"span"),o.yc(9," Top "),o.Rb(),o.Rb(),o.Sb(10,"button",31),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.BEST)}),o.Sb(11,"mat-icon"),o.yc(12,"favorite"),o.Rb(),o.Sb(13,"span"),o.yc(14," Best "),o.Rb(),o.Rb(),o.Sb(15,"button",31),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.NEW)}),o.Sb(16,"mat-icon"),o.yc(17,"new_releases"),o.Rb(),o.Sb(18,"span"),o.yc(19," New "),o.Rb(),o.Rb(),o.Sb(20,"button",31),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.ASK)}),o.Sb(21,"mat-icon"),o.yc(22,"help"),o.Rb(),o.Sb(23,"span"),o.yc(24," Ask "),o.Rb(),o.Rb(),o.Sb(25,"button",31),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.SHOW)}),o.Sb(26,"mat-icon"),o.yc(27,"preview"),o.Rb(),o.Sb(28,"span"),o.yc(29," Show "),o.Rb(),o.Rb(),o.Sb(30,"button",31),o.Zb("click",function(){o.pc(t);const e=o.dc();return e.setFeedType(e.FeedType.JOB)}),o.Sb(31,"mat-icon"),o.yc(32,"work"),o.Rb(),o.Sb(33,"span"),o.yc(34," Jobs "),o.Rb(),o.Rb(),o.Rb()}if(2&t){const t=o.mc(4);o.ic("matMenuTriggerFor",t)}}let eo=(()=>{class t{constructor(t,e,n){this.router=t,this.hn=e,this.shared=n,this.page=0,this.scrollTop=0,this.ids=[],this.FeedType=Xi.a,this.LoadState=Xi.c,this.idTracker=(t,e)=>e.id,this.loadState$=new wi.a(Xi.c.WAITING),this.type$=new wi.a(Xi.a.TOP),this.stories$=new wi.a([]),this.router.events.subscribe(t=>{t instanceof r.b&&"/"===t.url&&(this.scrollEl.nativeElement.style.setProperty("scroll-behavior","initial"),this.scrollEl.nativeElement.scrollTop=this.scrollTop,this.scrollEl.nativeElement.style.setProperty("scroll-behavior","smooth"))})}ngOnInit(){this.setFeedType(Xi.a.TOP)}switchTheme(){const t=this.shared.currentTheme$.getValue();this.shared.currentTheme$.next(t===Xi.e.LIGHT?Xi.e.DARK:Xi.e.LIGHT)}navigateIntoComments(t){this.scrollTop=this.scrollEl.nativeElement.scrollTop,this.router.navigate([t])}setFeedType(t){this.loadState$.next(Xi.c.WAITING),this.stories$.next([]),this.type$.next(t),this.page=0,this.hn.getStoryIndices(this.type$.getValue()).subscribe(t=>{this.ids=t,this.requestContentFromStories()})}requestContentFromStories(t=0){this.hn.getItemsContent(this.ids.slice(t,t+30)).pipe(Object(Gi.a)((t,e)=>[...t,...e],this.stories$.getValue())).subscribe(t=>{this.stories$.next(t),this.loadState$.next(Xi.c.IDLE)})}infiniteLoad(){this.page++,this.requestContentFromStories(30*this.page)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(r.d),o.Mb(Br),o.Mb(Vr.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-feed"]],viewQuery:function(t,e){if(1&t&&o.uc(Yr,!0),2&t){let t;o.lc(t=o.ac())&&(e.scrollEl=t.first)}},decls:30,vars:25,consts:[["color","primary"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"spacer"],["mat-icon-button","","aria-label","Switch between Light/Dark theme",3,"click"],["color","primary",3,"mode"],[1,"scroll-element"],["scrollElement",""],[1,"centered-container"],[1,"mat-h1"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more",4,"ngIf"],["mat-mini-fab","","aria-label","Scroll up to the top",1,"arrow-upward",3,"click"],["desktopContent",""],["mobileContent",""],[1,"story"],[1,"mat-h2",3,"click"],[4,"ngIf"],[1,"details","mat-body"],[1,"mat-body-strong"],["target","_blank","rel","noopener noreferrer",1,"mat-h3",3,"href"],[1,"load-more"],["mat-flat-button","","color","primary",1,"mat-h3",3,"click"],["mat-button","","aria-label","Show Top section",3,"click"],[1,"mat-h3"],["mat-button","","aria-label","Show Best section",3,"click"],["mat-button","","aria-label","Show New section",3,"click"],["mat-button","","aria-label","Show Ask section",3,"click"],["mat-button","","aria-label","Show Show section",3,"click"],["mat-button","","aria-label","Show Jobs section",3,"click"],["mat-icon-button","","aria-label","Show Stories section",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(o.Sb(0,"mat-toolbar",0),o.wc(1,Gr,1,0,"ng-container",1),o.ec(2,"async"),o.Nb(3,"span",2),o.Sb(4,"button",3),o.Zb("click",function(){return e.switchTheme()}),o.Sb(5,"mat-icon"),o.yc(6),o.ec(7,"iconTheme"),o.ec(8,"async"),o.Rb(),o.Rb(),o.Rb(),o.Nb(9,"mat-progress-bar",4),o.ec(10,"async"),o.Sb(11,"div",5,6),o.Sb(13,"div",7),o.Sb(14,"div",8),o.yc(15),o.ec(16,"headerTitle"),o.ec(17,"async"),o.Rb(),o.Nb(18,"mat-divider"),o.wc(19,$r,19,10,"ng-container",9),o.ec(20,"async"),o.Rb(),o.wc(21,Zr,3,0,"div",10),o.ec(22,"async"),o.Rb(),o.Sb(23,"button",11),o.Zb("click",function(){return e.scrollEl.nativeElement.scrollTop=0}),o.Sb(24,"mat-icon"),o.yc(25,"arrow_upward"),o.Rb(),o.Rb(),o.wc(26,Jr,18,0,"ng-template",null,12,o.xc),o.wc(28,to,35,1,"ng-template",null,13,o.xc)),2&t){const t=o.mc(27),n=o.mc(29);o.Ab(1),o.ic("ngIf",o.fc(2,9,e.shared.isMobile$))("ngIfThen",n)("ngIfElse",t),o.Ab(5),o.zc(o.fc(7,11,o.fc(8,13,e.shared.currentTheme$))),o.Ab(3),o.ic("mode",o.fc(10,15,e.loadState$)),o.Ab(6),o.zc(o.fc(16,17,o.fc(17,19,e.type$))),o.Ab(4),o.ic("ngForOf",o.fc(20,21,e.stories$))("ngForTrackBy",e.idTracker),o.Ab(2),o.ic("ngIf",o.fc(22,23,e.loadState$)===e.LoadState.IDLE)}},directives:[bi,i.k,Et,he,ui,St,i.j,Gn,Hn,Vn],pipes:[i.b,Qr,Hr,Ur,qr],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;height:100%}.load-more[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:80px}.arrow-upward[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1.75rem}"],data:{animation:[$i.showItem]}}),t})();const no=["scrollElement"];function io(t,e){1&t&&o.Ob(0)}const ro=function(t){return{"border-color":t}};function oo(t,e){if(1&t&&(o.Sb(0,"mat-tree-node",14),o.ec(1,"commentPadding"),o.ec(2,"async"),o.Sb(3,"div",15),o.Sb(4,"div",16),o.Sb(5,"span"),o.yc(6,"By "),o.Sb(7,"span",17),o.yc(8),o.Rb(),o.Rb(),o.Sb(9,"span"),o.yc(10),o.ec(11,"postFrom"),o.Rb(),o.Rb(),o.Nb(12,"div",18),o.Rb(),o.Rb()),2&t){const t=e.$implicit,n=o.dc();o.ic("matTreeNodePaddingIndent",o.fc(1,7,o.fc(2,9,n.shared.isMobile$))),o.Ab(3),o.ic("ngStyle",o.kc(13,ro,t.color)),o.Ab(1),o.ic("@showItem",void 0),o.Ab(4),o.zc(t.by),o.Ab(2),o.Ac("From ",o.fc(11,11,t.time),""),o.Ab(2),o.ic("innerHTML",t.text,o.qc)("@showItem",void 0)}}function so(t,e){if(1&t&&(o.Sb(0,"mat-tree-node",14),o.ec(1,"commentPadding"),o.ec(2,"async"),o.Sb(3,"div",19),o.Sb(4,"div",16),o.Sb(5,"span"),o.yc(6,"By "),o.Sb(7,"a",17),o.yc(8),o.Rb(),o.Rb(),o.Sb(9,"span"),o.yc(10),o.ec(11,"postFrom"),o.Rb(),o.Sb(12,"span",20),o.yc(13),o.ec(14,"replies"),o.Rb(),o.Rb(),o.Nb(15,"div",18),o.Rb(),o.Rb()),2&t){const t=e.$implicit,n=o.dc();o.ic("matTreeNodePaddingIndent",o.fc(1,9,o.fc(2,11,n.shared.isMobile$))),o.Ab(3),o.ic("ngStyle",o.kc(17,ro,t.color)),o.Ab(1),o.ic("@showItem",void 0),o.Ab(4),o.zc(t.by),o.Ab(2),o.Ac("From ",o.fc(11,13,t.time),""),o.Ab(2),o.ic("hidden",n.treeControl.isExpanded(t)),o.Ab(1),o.Ac(" ",o.fc(14,15,t.kids.length)," "),o.Ab(2),o.ic("innerHTML",t.text,o.qc)("@showItem",void 0)}}function ao(t,e){1&t&&o.Ob(0)}function co(t,e){if(1&t&&(o.Sb(0,"div"),o.Sb(1,"a",26),o.yc(2),o.ec(3,"domain"),o.Rb(),o.Rb()),2&t){const t=o.dc(2).item;o.ic("@showItem",void 0),o.Ab(1),o.ic("href",t.url,o.rc),o.Ab(1),o.Ac(" ",o.fc(3,3,t.url)," ")}}function lo(t,e){if(1&t&&(o.Sb(0,"div",22),o.Sb(1,"div"),o.Sb(2,"a",23),o.yc(3),o.Rb(),o.Rb(),o.wc(4,co,4,5,"div",24),o.Sb(5,"div",25),o.Sb(6,"span"),o.yc(7),o.Rb(),o.Sb(8,"span"),o.yc(9),o.Rb(),o.Sb(10,"span"),o.yc(11),o.Rb(),o.Sb(12,"span"),o.yc(13),o.ec(14,"postFrom"),o.Rb(),o.Rb(),o.Rb()),2&t){const t=o.dc().item;o.Ab(1),o.ic("@showItem",void 0),o.Ab(2),o.Ac(" ",t.title," "),o.Ab(1),o.ic("ngIf",t.url),o.Ab(1),o.ic("@showItem",void 0),o.Ab(2),o.Ac("",t.score," points"),o.Ab(2),o.Ac("",t.descendants," comments"),o.Ab(2),o.Ac("By ",t.by,""),o.Ab(2),o.Ac("From ",o.fc(14,8,t.time),"")}}function ho(t,e){1&t&&o.wc(0,lo,15,10,"div",21),2&t&&o.ic("ngIf",e.item)}function uo(t,e){1&t&&(o.Sb(0,"div",27),o.yc(1," \ud83c\udfdc\ufe0f There's nothing to read here \ud83c\udfdc\ufe0f "),o.Rb()),2&t&&o.ic("@showItem",void 0)}const po=function(){return["../"]},fo=function(t){return{item:t}};let _o=(()=>{class t{constructor(t,e,n){this.route=t,this.hn=e,this.shared=n,this.transformer=(t,e)=>Object.assign(Object.assign({},t),{level:e,color:Xi.d[e%7],expandable:!!t.kids&&t.kids.length>0}),this.treeControl=new Ci(t=>t.level,t=>t.expandable),this.treeFlattener=new Qi(this.transformer,t=>t.level,t=>t.expandable,t=>t.replies),this.dataSource=new Ki(this.treeControl,this.treeFlattener),this.hasChild=(t,e)=>e.expandable,this.loadState$=new wi.a(Xi.c.WAITING),this.emptyItem$=new wi.a(!1)}ngOnInit(){this.currentItem$=this.hn.getItem(+this.route.snapshot.params.id),this.hn.getStoryComments(this.currentItem$).subscribe(t=>{0===t.length?this.emptyItem$.next(!0):(this.dataSource.data=t,this.treeControl.expandAll()),this.loadState$.next(Xi.c.IDLE)})}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(r.a),o.Mb(Br),o.Mb(Vr.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-comments"]],viewQuery:function(t,e){if(1&t&&o.uc(no,!0),2&t){let t;o.lc(t=o.ac())&&(e.scrollEl=t.first)}},decls:24,vars:18,consts:[["color","primary"],["mat-icon-button","",3,"routerLink"],["color","primary",3,"mode"],[1,"scroll-element"],["scrollElement",""],[1,"centered-container"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dataSource","treeControl"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent",4,"matTreeNodeDef"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent",4,"matTreeNodeDef","matTreeNodeDefWhen"],[4,"ngIf","ngIfThen"],["itemHeader",""],["emptyComments",""],["mat-mini-fab","","aria-label","Scroll up to the top",1,"arrow-upward",3,"click"],["matTreeNodePadding","",3,"matTreeNodePaddingIndent"],[1,"comment-wrapper",3,"ngStyle"],[1,"details"],[1,"mat-body-strong"],[1,"mat-body",3,"innerHTML"],["matTreeNodeToggle","",1,"comment-wrapper",3,"ngStyle"],[3,"hidden"],["class","story",4,"ngIf"],[1,"story"],[1,"mat-h2"],[4,"ngIf"],[1,"details","mat-body"],["target","_blank","rel","noopener noreferrer",1,"mat-h3",3,"href"],[1,"mat-body","empty-comments"]],template:function(t,e){if(1&t&&(o.Sb(0,"mat-toolbar",0),o.Sb(1,"button",1),o.Sb(2,"mat-icon"),o.yc(3,"arrow_back"),o.Rb(),o.Rb(),o.Rb(),o.Nb(4,"mat-progress-bar",2),o.ec(5,"async"),o.Sb(6,"div",3,4),o.Sb(8,"div",5),o.wc(9,io,1,0,"ng-container",6),o.ec(10,"async"),o.Nb(11,"mat-divider"),o.Sb(12,"mat-tree",7),o.wc(13,oo,13,15,"mat-tree-node",8),o.wc(14,so,16,19,"mat-tree-node",9),o.Rb(),o.wc(15,ao,1,0,"ng-container",10),o.ec(16,"async"),o.Rb(),o.Rb(),o.wc(17,ho,1,1,"ng-template",null,11,o.xc),o.wc(19,uo,2,1,"ng-template",null,12,o.xc),o.Sb(21,"button",13),o.Zb("click",function(){return e.scrollEl.nativeElement.scrollTop=0}),o.Sb(22,"mat-icon"),o.yc(23,"arrow_upward"),o.Rb(),o.Rb()),2&t){const t=o.mc(18),n=o.mc(20);o.Ab(1),o.ic("routerLink",o.jc(15,po)),o.Ab(3),o.ic("mode",o.fc(5,9,e.loadState$)),o.Ab(5),o.ic("ngTemplateOutlet",t)("ngTemplateOutletContext",o.kc(16,fo,o.fc(10,11,e.currentItem$))),o.Ab(3),o.ic("dataSource",e.dataSource)("treeControl",e.treeControl),o.Ab(2),o.ic("matTreeNodeDefWhen",e.hasChild),o.Ab(1),o.ic("ngIf",o.fc(16,13,e.emptyItem$))("ngIfThen",n)}},directives:[bi,Et,r.e,he,ui,i.p,St,Vi,Fi,i.k,Di,Li,i.l,zi],pipes:[i.b,Kr,Ur,zr,qr],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;height:100%}.mat-divider[_ngcontent-%COMP%]{margin:24px 0}.comment-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:auto;margin:.6rem;padding:0 12px;border-left:3px solid}.empty-comments[_ngcontent-%COMP%]{text-align:center}.arrow-upward[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1.75rem}"],data:{animation:[$i.showItem]}}),t})(),mo=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)}}),t})();const go=[{path:"",component:eo},{path:":id",component:_o}];let yo=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},providers:[Br],imports:[[i.c,r.f.forChild(go),Yi,mo]]}),t})()}}]);