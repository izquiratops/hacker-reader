<!-- Nav -->
<mat-toolbar autoHide [scrollElement]="scrollElement" color="primary" style="gap: 8px">
    <!-- If route is '/' then show Feed buttons, else Comments buttons -->
    <ng-container *ngIf="shared.isMobile$ | async; then mobileContent else desktopContent"></ng-container>
    
    <!-- Buttons at the end -->
    <span class="top-bar-spacer"></span>
    <button mat-icon-button aria-label="Switch between Light/Dark theme" (click)="switchTheme()">
        <mat-icon>{{shared.isDark$ | async | themeName}}</mat-icon>
    </button>
</mat-toolbar>

<!-- TODO: [mode]="isLoading" -->
<mat-progress-bar color="primary" value="0" [mode]="isLoading | progressMode"></mat-progress-bar>

<!-- Stories List -->
<div class="scroll-element" #scrollElement>
    <div class="centered-container">
        <!-- Section Label -->
        <div class="mat-h1 m0">{{shared.feedType |Â formatTitle}}</div>

        <!-- Items -->
        <ng-container *ngFor="let story of shared.feedStories | async; trackBy: idTracker; let idx = index">
            <hr *ngIf="idx | firstOfPage : ITEMS_PER_PAGE">
            <hn-item [item]="story" @showItem></hn-item>
        </ng-container>
    </div>

    <!-- Load More Button -->
    <div class="load-more">
        <button mat-flat-button color="primary" class="mat-h3" (click)="infiniteLoad()">
            Load next page
        </button>
    </div>
</div>

<!-- Scroll up button -->
<button mat-mini-fab (click)="scrollToTheTop()" aria-label="Scroll up to the top"
    class="arrow-upward">
    <mat-icon>arrow_upward</mat-icon>
</button>

<!-- Toolbar Templates -->
<ng-template #desktopContent>
    <ng-container *ngFor="let label of TYPE_LABELS; let idx = index">
        <!-- TODO: aria-label="'Show ${TYPES[idx]} section'" -->
        <button mat-button (click)="getFeedContent(TYPES[idx])">
            <span class="mat-h4 m0"> {{ label }} </span>
        </button>
    </ng-container>
</ng-template>

<ng-template #mobileContent>
    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Show Stories section">
        <mat-icon>tune</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
        <ng-container *ngFor="let label of TYPE_LABELS; let idx = index">
            <!-- TODO: aria-label="'Show ${TYPES[idx]} section'" -->
            <button mat-menu-item (click)="getFeedContent(TYPES[idx])">
                <mat-icon> {{ TYPE_ICONS[idx] }} </mat-icon>
                <span> {{ label }} </span>
            </button>
        </ng-container>
    </mat-menu>
</ng-template>